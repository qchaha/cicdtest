webpackJsonp([94],{"56K/":function(e,s){e.exports={render:function(){var e=this,s=e.$createElement,o=e._self._c||s;return o("m-page-list",{attrs:{path:e.api.path,params:e.api.params,methods:e.methods,"response-handle":e.responseHandle,"page-info-path":e.pageInfoApi.path,"page-info-params":e.pageInfoApi.params,"reload-data-when-params-changed":!0},on:{"on-page-info-success":e.handleListPageInfoSuccess}},[o("m-action-bar"),e._v(" "),o("m-action-bar",{attrs:{slot:"search"},slot:"search"},[o("m-action-search-bar",{attrs:{"search-condition":e.searchCondition,"search-condition-handle":e.searchConditionHandle}},[o("div",{staticClass:"searchItems"},[o("m-form-item",{attrs:{label:"美图ID"}},[o("Input",{staticStyle:{width:"200px"},model:{value:e.searchCondition.opusId,callback:function(s){e.$set(e.searchCondition,"opusId",s)},expression:"searchCondition.opusId"}})],1),e._v(" "),o("m-form-item",{attrs:{label:"美图标签"}},[o("Select",{staticStyle:{width:"200px"},attrs:{filterable:"",multiple:""},model:{value:e.searchCondition.opusTags,callback:function(s){e.$set(e.searchCondition,"opusTags",s)},expression:"searchCondition.opusTags"}},e._l(e.searchResource.opusTags,function(s){return o("Option-group",{attrs:{label:s.label}},e._l(s.children,function(s){return o("Option",{key:s.value,attrs:{value:s.value}},[e._v(e._s(s.label)+"\n                            ")])}))}))],1),e._v(" "),o("m-form-item",{attrs:{label:"是否在前端已显示"}},[o("Select",{staticStyle:{width:"200px"},model:{value:e.searchCondition.showing,callback:function(s){e.$set(e.searchCondition,"showing",s)},expression:"searchCondition.showing"}},[o("Option",{attrs:{value:"all"}},[e._v("不限")]),e._v(" "),o("Option",{attrs:{value:"yes"}},[e._v("是")]),e._v(" "),o("Option",{attrs:{value:"no"}},[e._v("否")])],1)],1),e._v(" "),o("m-form-item",{attrs:{label:"搜索"}},[o("Input",{staticStyle:{width:"280px"},model:{value:e.searchCondition.value,callback:function(s){e.$set(e.searchCondition,"value",s)},expression:"searchCondition.value"}},[o("Select",{staticStyle:{width:"120px"},attrs:{slot:"prepend"},slot:"prepend",model:{value:e.searchCondition.valueType,callback:function(s){e.$set(e.searchCondition,"valueType",s)},expression:"searchCondition.valueType"}},e._l(e.searchResource.valueTypes,function(s){return o("Option",{attrs:{value:s.value}},[e._v("\n                            "+e._s(s.name)+"\n\n                        ")])}))],1)],1),e._v(" "),o("m-form-item",{attrs:{label:"显示时间"}},[o("DatePicker",{staticStyle:{width:"200px",display:"inline-block"},attrs:{type:"datetime",placeholder:"起始"},model:{value:e.searchCondition.showTimeBegin,callback:function(s){e.$set(e.searchCondition,"showTimeBegin",s)},expression:"searchCondition.showTimeBegin"}}),e._v("\n                    --\n                    "),o("DatePicker",{staticStyle:{width:"200px",display:"inline-block"},attrs:{type:"datetime",placeholder:"结束"},model:{value:e.searchCondition.showTimeEnd,callback:function(s){e.$set(e.searchCondition,"showTimeEnd",s)},expression:"searchCondition.showTimeEnd"}})],1)],1)])],1),e._v(" "),o("Tabs",{on:{"on-click":e.switchTab},model:{value:e.opusesHasGoodsOrNot,callback:function(s){e.opusesHasGoodsOrNot=s},expression:"opusesHasGoodsOrNot"}},[o("TabPane",{attrs:{label:"未配置推荐商品",name:"noGoodsOpuses"}},e._l(e.noGoodsOpuses,function(s,a){return o("Card",{staticClass:"imageCard",attrs:{padding:5}},[o("div",{staticClass:"opusImage"},[o("img",{attrs:{src:s.url}})]),e._v(" "),o("div",[e._v(e._s(s.user))]),e._v(" "),o("div",[e._v("显示时间："),o("span",{staticStyle:{color:"#2d8cf0"}},[e._v(e._s(s.time))])]),e._v(" "),o("div",{staticStyle:{"max-height":"54px",overflow:"hidden"}},e._l(s.opusTags,function(s){return o("Tag",[e._v(e._s(s.name))])})),e._v(" "),o("Button",{staticStyle:{width:"200px",position:"absolute",bottom:"5px",left:"5px"},attrs:{type:"primary"},on:{click:function(o){e.toRecommendGoods(s.id)}}},[e._v("+添加商品")])],1)})),e._v(" "),o("TabPane",{attrs:{label:"已配置推荐商品",name:"hasGoodsOpuses"}},e._l(e.hasGoodsOpuses,function(s,a){return o("Card",{staticClass:"imageCard",attrs:{padding:5}},[o("div",{staticClass:"opusImage"},[o("img",{attrs:{src:s.url}})]),e._v(" "),o("div",[e._v(e._s(s.user))]),e._v(" "),o("div",[e._v("显示时间："),o("span",{staticStyle:{color:"#2d8cf0"}},[e._v(e._s(s.time))])]),e._v(" "),o("div",{staticStyle:{"max-height":"54px",overflow:"hidden"}},e._l(s.opusTags,function(s){return o("Tag",[e._v(e._s(s.name))])})),e._v(" "),o("div",{staticStyle:{color:"#2d8cf0"}},[e._v("商品数："+e._s(s.recommendGoodsCount))]),e._v(" "),o("Button",{staticStyle:{width:"200px",position:"absolute",bottom:"5px",left:"5px"},attrs:{type:"primary"},on:{click:function(o){e.toRecommendGoods(s.id)}}},[e._v("编辑")])],1)}))],1),e._v(" "),o("div")],1)},staticRenderFns:[]}},PGw8:function(e,s,o){var a=o("alFF");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);o("rjj0")("3ac9cb3a",a,!0)},alFF:function(e,s,o){s=e.exports=o(0)(),s.push([e.i,".ivu-table{display:none}.imageCard .ivu-card-body{height:380px;overflow-y:hidden}.searchItems .m-form-item{line-height:32px}",""])},myFR:function(e,s,o){s=e.exports=o(0)(),s.push([e.i,".hidden[data-v-65b16696]{display:none}.m-form-item[data-v-65b16696]{margin:5px 20px}.imageCard[data-v-65b16696]{display:inline-block;width:210px;margin:10px}.imageCard .opusImage[data-v-65b16696]{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;background:#efefef;width:200px;height:200px}.imageCard img[data-v-65b16696]{max-width:200px;max-height:200px;cursor:pointer}",""])},"n+hu":function(e,s,o){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var a=null;s.default={name:"app",data:function(){return{recommendGoodsRoute:"/community/opus/opus/recommend-goods/",api:{path:"/boss/community/opus/opus/find-list",params:{fields:"{opus_id,user{nickname},show_time,tags{name},cover{s(w:200){url}},recommend_goods_count}",limit:80,hasGoods:0}},pageInfoApi:{path:"/boss/community/opus/opus/list-page-info",params:{hasGoods:0}},searchCondition:{opusId:"",showing:"all",opusTags:[],valueType:"content_match",value:"",showTimeBegin:"",showTimeEnd:""},searchResource:{opusTags:[],valueTypes:[{name:"旧美图标签内容",value:"content_match"}]},columns:[],noGoodsOpuses:[],hasGoodsOpuses:[],opusesHasGoodsOrNot:"noGoodsOpuses",opusId:0,methods:{},responseHandle:function(e,s){return"noGoodsOpuses"===a.opusesHasGoodsOrNot?a.noGoodsOpuses=[]:a.hasGoodsOpuses=[],e.data.map(function(e){var s=void 0===e.cover.s?"":void 0===e.cover.s.url?"":e.cover.s.url,o=void 0===e.user||null===e.user?"":e.user.nickname,t={id:e.opus_id,url:s,user:o,time:a.$Util.dateFormat(e.show_time,"yyyy-MM-dd hh:mm:ss"),opusTags:e.tags,recommendGoodsCount:e.recommend_goods_count};"noGoodsOpuses"===a.opusesHasGoodsOrNot?a.noGoodsOpuses.push(t):a.hasGoodsOpuses.push(t)}),e}}},methods:{toRecommendGoods:function(e){window.open("/backend/#"+this.recommendGoodsRoute+e)},switchTab:function(e){"noGoodsOpuses"===this.opusesHasGoodsOrNot?(this.api.params.hasGoods=0,this.pageInfoApi.params.hasGoods=0):(this.api.params.hasGoods=1,this.pageInfoApi.params.hasGoods=1)},handleListPageInfoSuccess:function(e){var s=[];e.data.filter.opusTags.map(function(e){var o={label:e.name,value:e.name,children:[]};e.son.map(function(e){o.children.push({label:e.name,value:e.name})}),s.push(o)}),this.searchResource.opusTags=s},searchConditionHandle:function(e){var s={};return s.opusId=e.opusId,s.valueType=e.valueType,s.value=e.value,s.opusTags=e.opusTags,s.showing=e.showing,e.showTimeBegin instanceof Date?s.showTimeBegin=parseInt(e.showTimeBegin.getTime()/1e3):s.showTimeBegin=0,e.showTimeEnd instanceof Date?s.showTimeEnd=parseInt(e.showTimeEnd.getTime()/1e3):s.showTimeEnd=0,s}},created:function(){a=this,window.a=this}}},vqBp:function(e,s,o){var a=o("myFR");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);o("rjj0")("46d34674",a,!0)},xjBU:function(e,s,o){o("PGw8"),o("vqBp");var a=o("VU/8")(o("n+hu"),o("56K/"),"data-v-65b16696",null);e.exports=a.exports}});