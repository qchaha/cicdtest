webpackJsonp([21],{"/zI4":function(e,t,i){i("TCJX");var o=i("VU/8")(i("pI6u"),i("t/B4"),"data-v-ef0f5584",null);e.exports=o.exports},"33En":function(e,t,i){i("4kV1");var o=i("VU/8")(i("c7do"),i("Gtft"),"data-v-72ecfd1c",null);e.exports=o.exports},"4kV1":function(e,t,i){var o=i("aTQt");"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);i("rjj0")("047af82b",o,!0)},"7IoT":function(e,t,i){t=e.exports=i(0)(),t.push([e.i,"",""])},DHNN:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"MReplyModal",props:{path:{type:String,default:""},title:{type:String,default:""},commentParam:{type:String,default:{commentId:"",share_id:"",topic_id:""}},isVisible:{type:Boolean,default:!1},imageComment:{type:Boolean,default:!1}},data:function(){return{responseData:{},addQuickReplyBox:!1,backendAccount:[{}],account:"back",commentContent:"",user:"",image:{},showExpression:!1,nextPage:!1,emoticonsPath:"http://m.meijiabang.cn/img/emoticons/",expressionImgs:[[{fileName:"keai_2x.png",title:"可爱"},{fileName:"touxiao_2x.png",title:"偷笑"},{fileName:"deyi_2x.png",title:"得意"},{fileName:"ku_2x.png",title:"酷"},{fileName:"memeda_2x.png",title:"么么哒"},{fileName:"huachi_2x.png",title:"花痴"},{fileName:"ding_2x.png",title:"顶"},{fileName:"zan_2x.png",title:"赞"},{fileName:"haixiu_2x.png",title:"害羞"},{fileName:"mogui_2x.png",title:"魔鬼"},{fileName:"liuhan_2x.png",title:"流汗"},{fileName:"guzhang_2x.png",title:"鼓掌"},{fileName:"weiqv_2x.png",title:"委屈"},{fileName:"outu_2x.png",title:"呕吐"},{fileName:"kuqi_2x.png",title:"哭泣"},{fileName:"kuaikule_2x.png",title:"快哭了"},{fileName:"lianhong_2x.png",title:"脸红"},{fileName:"jingxia_2x.png",title:"惊吓"},{fileName:"yiwen_2x.png",title:"疑问"},{fileName:"hua_2x.png",title:"献花"},{fileName:"shaxiao_2x.png",title:"傻笑"}],[{fileName:"bianbian_2x.png",title:"便便"},{fileName:"biezui_2x.png",title:"瘪嘴"},{fileName:"bishi.png",title:"鄙视"},{fileName:"chiyao_2x.png",title:"吃药"},{fileName:"dage_2x.png",title:"打嗝"},{fileName:"fendou_2x.png",title:"奋斗"},{fileName:"haqian_2x.png",title:"哈欠"},{fileName:"jin_2x.png",title:"禁"},{fileName:"jinzhang_2x.png",title:"紧张"},{fileName:"jiong_2x.png",title:"囧"},{fileName:"kule.png",title:"哭"},{fileName:"lei_2x.png",title:"雷"},{fileName:"ma_2x.png",title:"骂"},{fileName:"nu_2x.png",title:"怒"},{fileName:"qidao_2x.png",title:"祈祷"},{fileName:"se_2x.png",title:"色"},{fileName:"tu_2x.png",title:"吐"},{fileName:"xigua_2x.png",title:"西瓜"},{fileName:"yun_2x.png",title:"晕"},{fileName:"zhuakuang_2x.png",title:"抓狂"}]],quickReplyList:[],quickReplyListApi:{path:"/boss/community/topic/comment/reply_temps"},addQuickReplyApi:{path:"/boss/community/topic/comment/reply_temps",params:{reply:""}},removeQuickReplyApi:{path:"/boss/community/topic/comment/reply_temps",params:{reply:""}}}},methods:{cancel:function(){this.$emit("cancel")},ok:function(){if(this.path&&this.user&&(this.commentParam.commentId||this.commentParam.share_id||this.commentParam.topic_id)&&this.commentContent){var e={api:{path:this.path}},t={share_id:this.commentParam.share_id?this.commentParam.share_id:0,uid:this.user,content:this.commentContent,reply_id:this.commentParam.commentId?this.commentParam.commentId:0};this.commentParam.topic_id&&(t.topic_id=this.commentParam.topic_id),this.imageComment&&this.image&&(t.image=this.image),this.$Util.api.post(e,t,this).then(function(e){this.responseData.error_code=e.error_code,this.responseData.error_description=e.error_description,0==e.error_code?(this.$Modal.success({title:"评论成功！"}),this.clearUserDataAfterCloseModal()):this.$Notice.warning({title:"回复评论失败！",desc:e.error_description}),this.$emit("on-response",this.responseData)},function(){this.$Notice.warning({title:"回复评论失败！",desc:""})})}else if(!this.user){var i="回复失败，你忘了选择回复账号";this.$Message.error(i),this.responseData={error_code:-1,error_description:i},this.$emit("on-response",this.responseData)}this.$emit("confirm")},clearUserDataAfterCloseModal:function(){this.commentContent=""},showExpressionImg:function(){this.showExpression=!this.showExpression},appendToCommentContent:function(e){this.commentContent=this.commentContent+e,this.nextPage=!1,this.showExpression=!1},showExpressionNextPage:function(){this.nextPage=!this.nextPage},deleteQuickReply:function(e){this.removeQuickReplyApi.params.reply=e;var t={api:this.removeQuickReplyApi,reload:!1};this.$Util.api.delete(t,this).then(function(t){if(t.data){var i=this.quickReplyList.indexOf(e);this.quickReplyList.splice(i,1),this.$Message.info("删除成功")}else this.$Message.warning("唷，删除失败")},function(){this.$Message.warning("唷，删除失败")})},addNewQuickReply:function(){var e={api:this.addQuickReplyApi};this.$Util.api.post(e,this.addQuickReplyApi.params,this).then(function(e){e.data?(this.quickReplyList.push(this.addQuickReplyApi.params.reply),this.addQuickReplyBox=!1,this.addQuickReplyApi.params.reply="",this.$Message.info("添加成功")):this.$Message.warning("唷，新增失败")},function(){})},paddingData:function(){var e={api:this.quickReplyListApi};this.$Util.api.get(e,this).then(function(e){this.quickReplyList=e.data},function(){})}},created:function(){this.$nextTick(function(){this.paddingData()})}}},Gtft:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("Modal",{attrs:{title:"添加推荐区","mask-closable":!1},on:{"on-ok":e.ok,"on-cancel":e.cancel},model:{value:e.showRecommendModal,callback:function(t){e.showRecommendModal=t},expression:"showRecommendModal"}},[i("RadioGroup",{attrs:{vertical:""},model:{value:e.when,callback:function(t){e.when=t},expression:"when"}},[i("Radio",{attrs:{label:"now"}},[i("span",[e._v("立即加入推荐区")])]),e._v(" "),i("Radio",{attrs:{label:"timed"}},[i("span",[e._v("定时加入推荐区")])])],1),e._v(" "),i("Date-picker",{staticStyle:{width:"160px"},attrs:{type:"datetime",placeholder:"设置进入推荐区时间",disabled:!e.timed},model:{value:e.recommend_time,callback:function(t){e.recommend_time=t},expression:"recommend_time"}})],1)],1)},staticRenderFns:[]}},IW3u:function(e,t,i){var o=i("b4U5");"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);i("rjj0")("2b914227",o,!0)},JlrV:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=i("mnw/"),a=i.n(o),n=i("/zI4"),s=i.n(n),r=i("33En"),c=i.n(r);t.default={name:"list",components:{MReplyModal:a.a,MChangeTopicGroupModal:s.a,MRecommendModal:c.a},data:function(){var e=this;return{showRecommendModal:!1,recommendId:"",showChangeTopicGroupButton:!1,showChangeTopicGroupModal:!1,topicIdsSelectedToChangeGroup:"",listData:[],idsSelected:"",batchRemoveSubmitButton:"none",addRoute:"/community/topic/topic/add",editRoute:"/community/topic/topic/edit",sourceList:[],cateTree:[],deleteReasonList:["广告内容","发布微信号等其他账号导流","黄反信息","不符合当前版规","其他原因","不发送小秘书"],showDeleteReasonBox:!1,imageComment:!0,commentParam:{topic_id:""},showReplyModal:!1,removeApi:{path:"/boss/community/topic/topic/topics",params:{ids:"",reason:""}},replyApi:{path:"/boss/community/topic/comment/reply",params:{}},cancelRecommendApi:{path:"/boss/community/topic/topic_channel/topics",params:{topic_ids:""}},api:{path:"/boss/community/topic/topic/topics",params:{base_fields:"total_count,list[].topic_id,list[].title,list[].content_html,list[].status,list[].is_free,list[].share_id,list[].author.uid,list[].author.avatar.s(180),list[].author.nickname,list[].create_time,list[].comment_count,list[].is_top,list[].is_hot,list[].collect_count,list[].praise_count,list[].is_hide,list[].group.nickname,list[].group.type,list[].group.name,list[].view_count,list[].is_first,list[].images[].s(320),list[].recommend_time,list[].deleted_reason,list[].edit_pattern",limit:24,offset:0}},pageInfoApi:{path:"/boss/community/topic/topic/topics_page_info",params:{}},selectOptionsApi:{path:"/boss/community/topic/topic/form_params",params:{}},searchCondition:{topic_id:"",keyword:"",uid:"",user_name:"",start_time:"",end_time:"",group_id:"",is_first:"",status:"",source:"",is_hide:""},dateTimeRange:[],columns:[{width:500,title:"帖子内容",render:function(t,i){var o=i.row.content_html;o=o.replace(/<style>(.|\n)*style>/g,""),o=o.replace(/<script>(.|\n)*script>/g,""),o=o.replace(/<[^>|\n]*>/g,"");var a=i.row.title+" "+o;return a=a.slice(0,30),null==i.row.images&&(i.row.images=[]),i.row.images=i.row.images.slice(0,9),t("div",{style:{position:"relative",padding:"15px 5px"}},[t("p","ID:"+i.row.topic_id),t("span",{style:{display:1===Number(i.row.edit_pattern)?"block":"none",position:"absolute",right:"10px",top:"10px",color:"#2196F3"}},"编辑器模式"),t("div",{style:{margin:"10px 5px"}},[t("img",{style:{borderRadius:"50%"},attrs:{src:i.row.author?i.row.author.avatar.s.url:"",height:30,width:30}}),t("i-button",{props:{type:"text",size:"small"},on:{click:function(){i.row.author&&e.showUserInfo(i.row.author.uid)}}},[t("span",{style:{color:"#39f"}},"["+(i.row.author?i.row.author.uid:"")+"]")]),t("span",i.row.author?i.row.author.nickname:"")]),t("p",a),t("div",{style:{margin:"10px 0"}},i.row.images.map(function(e){return t("img",{style:{width:"50px",height:"50px",padding:"0 5px"},attrs:{src:e.s.url}})})),t("div",[t("span",(i.row.group?i.row.group.name:"")+" "+i.row.create_time),t("span",{style:{color:"#39f",float:"right"}})])])}},{title:"帖子数据",render:function(e,t){return e("div",[e("p",{style:{margin:"10px 0",float:"center"}},[e("span","收藏数 "+t.row.collect_count)]),e("p",{style:{margin:"10px 0",float:"center"}},[e("span","点赞数 "+t.row.praise_count)]),e("a",{style:{margin:"15px 0"},attrs:{href:"/backend/#/community/topic/comment/list/"+t.row.topic_id,target:"_blank"}},"评论数 "+t.row.comment_count),e("p",{style:{margin:"10px 0",float:"center"}},[e("span","阅读数 "+t.row.view_count)])])}},{title:"帖子状态",render:function(t,i){var o={};if(1==i.row.status){o={color:"",text:"正常显示"};var a=new Date;Date.parse(i.row.create_time)>Date.parse(a)&&(o={color:"#368514",text:"定时"+i.row.create_time+"发布未显示"})}else o={color:"#ee1010",text:"已删除  "+i.row.deleted_reason};1==i.row.is_hide&&(o={color:"#ee1010",text:"已隐藏"});var n={};if(i.row.is_hot)n={color:"#368514",text:"已进入推荐区"};else if(i.row.recommend_time>0){var s=(new Date,e.$Util.dateFormat(i.row.recommend_time,"yyyy-MM-dd hh:mm:ss"));n={text:"定时在"+s+"进入推荐区",color:"#368514"}}else n={color:"",text:"未进入推荐区"};var r={};if(i.row.is_top){r={color:"#368514",text:i.row.group?"在"+i.row.group.name+"被置顶":"被置顶"}}else r={color:"",text:"未被置顶"};var c=i.row.is_first?{color:"#368514",text:"首贴"}:{color:"",text:"非首贴"},l=[o,n,r,c],p=[];return l.map(function(e){p.push(t("p",{style:{margin:"10px 0",float:"center",color:e.color}},[t("span",e.text)]))}),t("div",p)}},{title:"操作",key:"action",align:"center",render:function(t,i){var o=0,a=[];return o=i.row.topic_id,a[0]=t("Button",{props:{type:"text",size:"small"},style:{display:"block",color:"#39f"},on:{click:function(){e.review(o)}}},"H5浏览"),a[1]=t("Button",{props:{type:"text",size:"small"},style:{display:"block",color:"#39f"},on:{click:function(){e.toEdit(o)}}},"编辑"),a[2]=t("Button",{props:{type:"text",size:"small"},style:{display:"block",color:"#39f"},on:{click:function(){e.showReplyModal=!0,e.commentParam.topic_id=o}}},"回复"),i.row.is_hot?a[3]=t("Button",{props:{type:"text",size:"small"},style:{display:"block",color:"#39f"},on:{click:function(){e.cancelRecommend(o)}}},"从推荐区移除"):i.row.recommend_time>0?a[3]=t("Button",{props:{type:"text",size:"small"},style:{display:"block",color:"#39f"},on:{click:function(){e.cancelRecommend(o)}}},"取消推荐"):a[3]=t("Button",{props:{type:"text",size:"small"},style:{display:"block",color:"#39f"},on:{click:function(){e.toRecommend(o)}}},"加入推荐区"),a[4]=t("Button",{props:{type:"text",size:"small"},style:{display:"block",color:"#39f"},on:{click:function(){e.toRemove(o)}}},"删除"),t("div",a)}}]}},methods:{onResponse:function(e){},hideRecommendModal:function(){this.showRecommendModal=!1},responseHandle:function(e,t){return e.data.map(function(e,i){e.create_time=t.$Util.dateFormat(e.create_time,"yyyy-MM-dd hh:mm:ss")}),this.listData=e.data,e},toAdd:function(){window.location.hash=this.addRoute+"?ref="+encodeURIComponent(this.getLocationUrl()),window.location.search="_="+(new Date).getTime()},toEdit:function(e){window.location.hash=this.editRoute+"/"+e+"?ref="+encodeURIComponent(this.getLocationUrl()),window.location.search="_="+(new Date).getTime()},review:function(e){window.open("https://m.meijiabang.cn/#!topic/"+e,"","width=375,height=667")},toRemove:function(e){this.showDeleteReasonBox=!0,this.removeApi.params.ids=e},remove:function(){this.removeApi.params.ids||(this.removeApi.params.ids=this.idsSelected),this.showDeleteReasonBox=!1,vm.$Util.api.delete({api:this.removeApi},vm).then(function(e){0===e.error_code?(this.$Message.info("删除成功"),this.pageReload()):this.$Message.warning(e.error_description)},function(e){this.$Message.error("删除失败")}),this.cancelBatchRemove()},toRecommend:function(e){this.showRecommendModal=!0,this.recommendId=e},submitReply:function(){this.showReplyModal=!1},cancelRecommend:function(e){this.cancelRecommendApi.params.topic_ids=e,vm.$Util.api.delete({api:this.cancelRecommendApi},vm).then(function(e){0===e.error_code?(this.$Message.info("已取消推荐"),this.pageReload()):this.$Message.warning(e.error_description)},function(e){this.$Message.error("取消失败")})},paddingData:function(){this.$Util.api.get({api:this.selectOptionsApi},this).then(function(e){var t=this;0===e.error_code&&(t.cateTree=e.data.cate_tree,t.sourceList=e.data.source)},function(e){})},searchConditionHandle:function(e){return e.start_time=isNaN(Date.parse(this.dateTimeRange[0]))?"":Date.parse(this.dateTimeRange[0])/1e3,e.end_time=isNaN(Date.parse(this.dateTimeRange[1]))?"":Date.parse(this.dateTimeRange[1])/1e3,e},recommendSuccess:function(){this.pageReload()},showUserInfo:function(e){e&&window.open("/admin.php?uid="+e+"&m=Admin&c=User&c=User&a=index")},closeReply:function(){this.showReplyModal=!1},prepareToBatchRemove:function(){4==this.columns.length&&this.columns.unshift({type:"selection",width:30,align:"center"}),this.batchRemoveSubmitButton=""},cancelBatchRemove:function(){this.batchRemoveSubmitButton="none",5==this.columns.length&&this.columns.shift(),this.cancelSelect()},cancelSelect:function(){var e=[];this.listData.map(function(t){t._checked=!1,e.push(t)}),this.listData=e},batchRemove:function(){this.showDeleteReasonBox=!0},selectionChange:function(e){var t=[];e.map(function(e){t.push(e.topic_id)}),this.idsSelected=t.join(",")},prepareToChangeTopicGroup:function(){this.showChangeTopicGroupModal=!1,this.idsSelected?(this.topicIdsSelectedToChangeGroup=this.idsSelected,this.showChangeTopicGroupModal=!0):this.$Message.warning("请勾选要转移的帖子")},toShowChangeButton:function(){this.showChangeTopicGroupButton=!0,4==this.columns.length&&this.columns.unshift({type:"selection",width:30,align:"center"})},cancelChangeTopicGroup:function(){this.showChangeTopicGroupButton=!this.showChangeTopicGroupButton,5==this.columns.length&&this.columns.shift(),this.cancelSelect()},changeTopicGroupFinished:function(){this.cancelSelect(),this.showChangeTopicGroupButton=!this.showChangeTopicGroupButton,this.showChangeTopicGroupModal=!1,5==this.columns.length&&this.columns.shift()},pageReload:function(){var e=this.getLocationUrl();setTimeout(function(){window.location.href=e,window.location.search="_="+(new Date).getTime()},1e3)},getLocationUrl:function(){var e="";return this.searchCondition.user_name&&(e+=(e?"&":"")+"user_name="+this.searchCondition.user_name),this.searchCondition.keyword&&(e+=(e?"&":"")+"keyword="+this.searchCondition.keyword),this.searchCondition.topic_id&&(e+=(e?"&":"")+"topic_id="+this.searchCondition.topic_id),this.searchCondition.uid&&(e+=(e?"&":"")+"uid="+this.searchCondition.uid),this.searchCondition.group_id&&(e+=(e?"&":"")+"group_id="+this.searchCondition.group_id),this.searchCondition.is_first&&(e+=(e?"&":"")+"is_first="+this.searchCondition.is_first),this.searchCondition.is_hide&&(e+=(e?"&":"")+"is_hide="+this.searchCondition.is_hide),this.searchCondition.status&&(e+=(e?"&":"")+"status="+this.searchCondition.status),this.searchCondition.source&&(e+=(e?"&":"")+"source="+this.searchCondition.source),this.searchCondition.create_time&&this.searchCondition.create_time[0]&&"number"!=typeof this.searchCondition.create_time[0]&&this.searchCondition.create_time[1]&&"number"!=typeof this.searchCondition.create_time[1]&&(e+=(e?"&":"")+"start_time="+Date.parse(this.searchCondition.create_time[0])/1e3,e+=(e?"&":"")+"end_time="+Date.parse(this.searchCondition.create_time[1])/1e3),"#/community/topic/topic/list?"+e},replyResponseHandle:function(e){if(e&&0===e.error_code){setTimeout(function(){this.showReplyModal=!1},1e3)}else{e&&e.error_description&&e.error_description}},initParams:function(){var e=this.$route.query.uid,t=this.$route.query.keyword,i=this.$route.query.topic_id,o=this.$route.query.user_name,a=this.$route.query.start_time,n=this.$route.query.end_time,s=this.$route.query.is_hide,r=this.$route.query.is_first,c=this.$route.query.group_id,l=this.$route.query.source,p=this.$route.query.status;(e||t||i||o||a||n||s||r||c||l||p)&&(this.sortable=!1,this.searchCondition.user_name=o,this.searchCondition.topic_id=i,this.searchCondition.keyword=t,this.searchCondition.uid=e,this.searchCondition.is_hide=s,this.searchCondition.is_first=r,this.searchCondition.group_id=c,this.searchCondition.source=l,this.searchCondition.status=p,a&&n&&(this.dateTimeRange.push(1e3*a),this.dateTimeRange.push(1e3*n)),this.api.params.user_name=o,this.api.params.topic_id=i,this.api.params.keyword=t,this.api.params.uid=e,this.api.params.start_time=a,this.api.params.end_time=n,this.api.params.is_hide=s,this.api.params.status=p,this.api.params.source=l,this.api.params.group_id=c,this.api.params.is_first=r)}},created:function(){this.$nextTick(function(){this.paddingData(),this.initParams()})}}},L5X0:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("Modal",{attrs:{title:"回复","mask-closable":!1},on:{"on-ok":e.ok,"on-cancel":e.cancel},model:{value:e.isVisible,callback:function(t){e.isVisible=t},expression:"isVisible"}},[i("div",{staticClass:"mrm-modal-block"},[i("div",{staticClass:"mrm-modal-top"},[i("p",{staticClass:"mrm-modal-top-center"},[e._v("账号")])]),e._v(" "),i("RadioGroup",{staticClass:"mrm-modal-top",model:{value:e.account,callback:function(t){e.account=t},expression:"account"}},[i("div",{staticClass:"mrm-modal-top-account"},[i("div",[i("MUserPicking",{attrs:{width:300,containRandom:!0},model:{value:e.user,callback:function(t){e.user=t},expression:"user"}})],1)])])],1),e._v(" "),i("div",{staticClass:"mrm-modal-block"},[i("div",{staticClass:"mrm-modal-top"},[i("p",{staticClass:"mrm-modal-top-center"},[e._v("评论")])]),e._v(" "),i("div",{staticClass:"mrm-modal-comment-content"},[i("Input",{attrs:{size:"large ",type:"textarea",rows:4,placeholder:"请输入评论内容..."},model:{value:e.commentContent,callback:function(t){e.commentContent=t},expression:"commentContent"}})],1),e._v(" "),i("div",{staticClass:"mrm-modal-quick-reply"},[e._l(e.quickReplyList,function(t,o){return i("Tag",{key:t,attrs:{type:"border",closable:"",color:"blue",closable:""},on:{"on-close":function(i){e.deleteQuickReply(t)}},nativeOn:{click:function(i){e.appendToCommentContent(t)}}},[e._v("\n                    "+e._s(t.substring(0,25))+"\n                ")])}),e._v(" "),i("Button",{attrs:{icon:"ios-plus-empty",size:"small",type:"border"},on:{click:function(t){e.addQuickReplyBox=!0}}},[e._v("快捷回复\n                ")])],2),e._v(" "),i("div",{staticClass:"mrm-modal-expression"},[i("div",{staticClass:"mrm-modal-expression-span"},[i("Button",{attrs:{shape:"circle",icon:"happy-outline"},on:{click:e.showExpressionImg}})],1),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:e.showExpression,expression:"showExpression"}],staticClass:"mrm-modal-expression-img"},[i("div",{attrs:{id:"emojiContainer"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:!e.nextPage,expression:"!nextPage"}]},[e._l(e.expressionImgs[0],function(t,o){return i("img",{attrs:{src:e.emoticonsPath+t.fileName,title:t.title},on:{click:function(i){e.appendToCommentContent("["+t.title+"]")}}})}),e._v(" "),i("Icon",{staticStyle:{float:"right",margin:"10px 20px 0 0",cursor:"pointer"},attrs:{type:"toggle",size:"35",title:"切换表情"},nativeOn:{click:function(t){return e.showExpressionNextPage(t)}}})],2),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:e.nextPage,expression:"nextPage"}]},[e._l(e.expressionImgs[1],function(t,o){return i("img",{attrs:{src:e.emoticonsPath+t.fileName,title:t.title},on:{click:function(i){e.appendToCommentContent("["+t.title+"]")}}})}),e._v(" "),i("Icon",{staticStyle:{float:"right",margin:"10px 20px 0 0",cursor:"pointer"},attrs:{type:"toggle-filled",size:"35",title:"切换表情"},nativeOn:{click:function(t){return e.showExpressionNextPage(t)}}})],2)])])]),e._v(" "),e.imageComment?i("div",{staticClass:"mrm-modal-comment-img"},[i("m-upload-image",{model:{value:e.image,callback:function(t){e.image=t},expression:"image"}})],1):e._e()])]),e._v(" "),i("Modal",{attrs:{width:"360"},model:{value:e.addQuickReplyBox,callback:function(t){e.addQuickReplyBox=t},expression:"addQuickReplyBox"}},[i("p",{staticStyle:{"text-align":"left"},attrs:{slot:"header"},slot:"header"},[i("span",[e._v("新增快捷回复")])]),e._v(" "),i("Input",{attrs:{type:"textarea",autosize:{minRows:5,maxRows:10}},model:{value:e.addQuickReplyApi.params.reply,callback:function(t){e.$set(e.addQuickReplyApi.params,"reply",t)},expression:"addQuickReplyApi.params.reply"}}),e._v(" "),i("div",{attrs:{slot:"footer"},slot:"footer"},[i("Button",{attrs:{type:"primary"},on:{click:e.addNewQuickReply}},[e._v("确定")])],1)],1)],1)},staticRenderFns:[]}},"R+Hu":function(e,t,i){i("oDIx");var o=i("VU/8")(i("JlrV"),i("fIma"),"data-v-89b05226",null);e.exports=o.exports},TCJX:function(e,t,i){var o=i("7IoT");"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);i("rjj0")("5b6e5c1f",o,!0)},X94K:function(e,t,i){t=e.exports=i(0)(),t.push([e.i,".form-item[data-v-89b05226]{margin:6px 0}",""])},aTQt:function(e,t,i){t=e.exports=i(0)(),t.push([e.i,"",""])},b4U5:function(e,t,i){t=e.exports=i(0)(),t.push([e.i,".mrm-modal-block[data-v-48e2c5b2],.mrm-modal-top[data-v-48e2c5b2]{float:left}.mrm-modal-top-left[data-v-48e2c5b2]{width:100px}.mrm-modal-top-center[data-v-48e2c5b2]{width:100px;text-align:center}.mrm-modal-top-account[data-v-48e2c5b2]{padding-bottom:50px}.mrm-modal-top-account div[data-v-48e2c5b2]{float:left}.mrm-modal-comment-content[data-v-48e2c5b2]{width:300px;float:left}.mrm-modal-quick-reply[data-v-48e2c5b2]{padding-left:100px;width:100%;float:left}.mrm-modal-comment-img[data-v-48e2c5b2]{float:right;margin-top:20px;padding-left:100px;width:100%}#emojiContainer div img[data-v-48e2c5b2]{width:35px;cursor:pointer;margin:3px}.mrm-modal-expression[data-v-48e2c5b2]{float:left;width:100%;position:relative}.mrm-modal-expression-span[data-v-48e2c5b2]{padding:20px 0 0 90px}.mrm-modal-expression-img[data-v-48e2c5b2]{position:absolute;border:1px solid #eee;background-color:#fff;top:-120px;left:100px;padding:2px;border-radius:10px}",""])},c7do:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"MRecommendModal",props:{id:{type:Number,default:0},showRecommendModal:{type:Boolean,default:!1}},data:function(){return{when:"now",recommend_time:{},timed:!1,recommendApi:{path:"/boss/community/topic/topic_channel/topics",params:{topic_ids:"",recommend_time:""}}}},methods:{ok:function(){if(this.timed){if(isNaN(Date.parse(this.recommend_time)))return this.$Message.warning("请选择合适的定时推荐时间"),!1;if(!(this.recommend_time>Date.now()))return this.$Message.warning("定时推荐时间不能晚于当前"),!1;this.recommendApi.params.recommend_time=Date.parse(this.recommend_time)/1e3}this.recommendApi.params.topic_ids=this.id,this.$Util.api.post({api:this.recommendApi},this.recommendApi.params,this).then(function(e){0===e.error_code?(this.$Message.info("操作成功"),this.$emit("on-recommend-success")):this.$Message.warning(e.error_description)},function(){this.$Message.error("操作失败")}),this.showRecommendModal=!1,this.when="now",this.$emit("on-hide-recommend-modal")},cancel:function(){this.showRecommendModal=!1,this.when="now",this.$emit("on-hide-recommend-modal")}},watch:{when:function(e){"timed"===e?this.timed=!0:(this.recommend_time={},this.timed=!1)}}}},fIma:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("m-page-list",{attrs:{path:e.api.path,params:e.api.params,columns:e.columns,methods:e.methods,"response-handle":e.responseHandle,"page-info-path":e.pageInfoApi.path,"page-info-params":e.pageInfoApi.params,listData:e.listData,"not-fixed":""},on:{"on-selection-change":e.selectionChange}},[i("m-action-bar",{attrs:{slot:"search"},slot:"search"},[i("m-action-search-bar",{attrs:{"search-condition":e.searchCondition,"search-condition-handle":e.searchConditionHandle}},[i("m-form-item",{staticClass:"form-item"},[i("i-input",{staticStyle:{width:"100px"},attrs:{placeholder:"帖子id"},model:{value:e.searchCondition.topic_id,callback:function(t){e.$set(e.searchCondition,"topic_id",t)},expression:"searchCondition.topic_id"}})],1),e._v(" "),i("m-form-item",[i("i-input",{attrs:{placeholder:"帖子内容搜索"},model:{value:e.searchCondition.keyword,callback:function(t){e.$set(e.searchCondition,"keyword",t)},expression:"searchCondition.keyword"}})],1),e._v(" "),i("m-form-item",{staticClass:"form-item"},[i("i-input",{staticStyle:{width:"200px"},attrs:{placeholder:"用户id搜索"},model:{value:e.searchCondition.uid,callback:function(t){e.$set(e.searchCondition,"uid",t)},expression:"searchCondition.uid"}})],1),e._v(" "),i("m-form-item",[i("i-input",{staticStyle:{width:"200px"},attrs:{placeholder:"用户名搜索"},model:{value:e.searchCondition.user_name,callback:function(t){e.$set(e.searchCondition,"user_name",t)},expression:"searchCondition.user_name"}})],1),e._v(" "),i("m-form-item",{staticClass:"form-item"},[i("DatePicker",{staticStyle:{width:"250px"},attrs:{type:"datetimerange",format:"yyyy-MM-dd HH:mm",placeholder:"发帖时间"},model:{value:e.dateTimeRange,callback:function(t){e.dateTimeRange=t},expression:"dateTimeRange"}})],1),e._v(" "),i("m-form-item",{staticClass:"form-item"},[i("Select",{staticStyle:{width:"150px"},attrs:{placeholder:"选择版块",filterable:""},model:{value:e.searchCondition.group_id,callback:function(t){e.$set(e.searchCondition,"group_id",t)},expression:"searchCondition.group_id"}},e._l(e.cateTree,function(t){return i("Option",{key:t.group_id,attrs:{value:t.group_id}},[e._v(e._s(t.title_show)+"\n                    ")])}))],1),e._v(" "),i("m-form-item",{staticClass:"form-item"},[i("Select",{staticStyle:{width:"100px"},attrs:{placeholder:"是否首贴"},model:{value:e.searchCondition.is_first,callback:function(t){e.$set(e.searchCondition,"is_first",t)},expression:"searchCondition.is_first"}},[i("Option",{attrs:{value:""}},[e._v("所有")]),e._v(" "),i("Option",{attrs:{value:"1"}},[e._v("是")]),e._v(" "),i("Option",{attrs:{value:"0"}},[e._v("否")])],1)],1),e._v(" "),i("m-form-item",{staticClass:"form-item"},[i("Select",{staticStyle:{width:"100px"},attrs:{placeholder:"是否隐藏"},model:{value:e.searchCondition.is_hide,callback:function(t){e.$set(e.searchCondition,"is_hide",t)},expression:"searchCondition.is_hide"}},[i("Option",{attrs:{value:""}},[e._v("所有")]),e._v(" "),i("Option",{attrs:{value:"1"}},[e._v("是")]),e._v(" "),i("Option",{attrs:{value:"0"}},[e._v("否")])],1)],1),e._v(" "),i("m-form-item",{staticClass:"form-item"},[i("Select",{staticStyle:{width:"100px"},attrs:{placeholder:"状态"},model:{value:e.searchCondition.status,callback:function(t){e.$set(e.searchCondition,"status",t)},expression:"searchCondition.status"}},[i("Option",{attrs:{value:""}},[e._v("所有")]),e._v(" "),i("Option",{attrs:{value:"1"}},[e._v("正常")]),e._v(" "),i("Option",{attrs:{value:"0"}},[e._v("删除")])],1)],1),e._v(" "),i("m-form-item",{staticClass:"form-item"},[i("Select",{staticStyle:{width:"110px"},attrs:{placeholder:"发布来源"},model:{value:e.searchCondition.source,callback:function(t){e.$set(e.searchCondition,"source",t)},expression:"searchCondition.source"}},e._l(e.sourceList,function(e){return i("Option",{key:e.value,attrs:{value:e.value,label:e.name}})}))],1)],1)],1),e._v(" "),i("m-action-bar",[i("Button",{attrs:{type:"primary"},on:{click:e.toAdd}},[e._v("新增")]),e._v(" "),i("Button",{attrs:{type:"primary"},on:{click:e.prepareToBatchRemove}},[e._v("批量删除")]),e._v(" "),i("Button",{attrs:{type:"primary"},on:{click:e.toShowChangeButton}},[e._v("批量转移版块")]),e._v(" "),i("br"),e._v(" "),i("br"),e._v(" "),i("div",{style:{display:e.batchRemoveSubmitButton}},[i("Button",{attrs:{type:"primary"},on:{click:e.batchRemove}},[e._v("确认删除")]),e._v(" "),i("Button",{on:{click:e.cancelBatchRemove}},[e._v("取消")])],1),e._v(" "),i("m-change-topic-group-modal",{attrs:{cateTree:e.cateTree,showChangeTopicGroupButton:e.showChangeTopicGroupButton,showModal:e.showChangeTopicGroupModal,topicIds:e.topicIdsSelectedToChangeGroup},on:{prepareToChangeTopicGroup:e.prepareToChangeTopicGroup,cancelChangeTopicGroup:e.cancelChangeTopicGroup,changeTopicGroupFinished:e.changeTopicGroupFinished,tryToChangeGroupAgain:e.tryToChangeGroupAgain}})],1),e._v(" "),i("m-reply-modal",{attrs:{path:e.replyApi.path,title:e.回复评论,commentParam:e.commentParam,isVisible:e.showReplyModal,imageComment:e.imageComment},on:{confirm:e.submitReply,"on-response":e.replyResponseHandle,cancel:e.closeReply}}),e._v(" "),i("Modal",{attrs:{width:"360"},model:{value:e.showDeleteReasonBox,callback:function(t){e.showDeleteReasonBox=t},expression:"showDeleteReasonBox"}},[i("p",{staticStyle:{color:"#f60"},attrs:{slot:"header"},slot:"header"},[i("Icon",{attrs:{type:"information-circled"}}),e._v(" "),i("span",[e._v("删除原因")])],1),e._v(" "),i("Select",{staticStyle:{width:"200px"},model:{value:e.removeApi.params.reason,callback:function(t){e.$set(e.removeApi.params,"reason",t)},expression:"removeApi.params.reason"}},e._l(e.deleteReasonList,function(t){return i("Option",{key:t,attrs:{value:t}},[e._v(e._s(t))])})),e._v(" "),i("div",{attrs:{slot:"footer"},slot:"footer"},[i("Button",{attrs:{type:"info",loading:e.modal_loading},on:{click:e.remove}},[e._v("确定")])],1)],1),e._v(" "),i("m-recommend-modal",{attrs:{id:e.recommendId,showRecommendModal:e.showRecommendModal},on:{"on-recommend-success":e.recommendSuccess,"on-hide-recommend-modal":e.hideRecommendModal}})],1)},staticRenderFns:[]}},"mnw/":function(e,t,i){i("IW3u");var o=i("VU/8")(i("DHNN"),i("L5X0"),"data-v-48e2c5b2",null);e.exports=o.exports},oDIx:function(e,t,i){var o=i("X94K");"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);i("rjj0")("7787b1e8",o,!0)},pI6u:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"MChangeTopicGroupModal",props:{cateTree:{type:Array,default:function(){return[]}},topicIds:{type:String,default:""},showModal:{type:Boolean,default:!1},showChangeTopicGroupButton:{type:Boolean,default:!1}},data:function(){return{display:"none"}},watch:{showChangeTopicGroupButton:function(e){this.display=e?"":"none"}},methods:{ok:function(){if(this.topicIds)if(this.group_id){var e={api:{path:"/boss/community/topic/topic_group/"+this.group_id+"/topics"}},t={topic_ids:this.topicIds};this.$Util.api.post(e,t,this).then(function(e){void 0!=e.error_code&&0==e.error_code&&this.$Message.info("转移成功")},function(e){this.$Message.info("转移失败")})}else this.$Message.warning("请选择转移的版块");else this.$Message.warning("请选择帖子");this.$emit("changeTopicGroupFinished")},prepareToChangeTopicGroup:function(){this.$emit("prepareToChangeTopicGroup")},cancelChangeTopicGroup:function(){this.$emit("cancelChangeTopicGroup")}}}},"t/B4":function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{style:{display:e.display}},[i("Button",{attrs:{type:"primary"},on:{click:e.prepareToChangeTopicGroup}},[e._v("确认转移")]),e._v(" "),i("Button",{on:{click:e.cancelChangeTopicGroup}},[e._v("取消")]),e._v(" "),i("Modal",{attrs:{title:"转移帖子","mask-closable":!1},on:{"on-ok":e.ok,"on-cancel":e.cancel},model:{value:e.showModal,callback:function(t){e.showModal=t},expression:"showModal"}},[i("Select",{staticStyle:{width:"150px"},attrs:{placeholder:"选择版块",filterable:"",required:""},model:{value:e.group_id,callback:function(t){e.group_id=t},expression:"group_id"}},e._l(e.cateTree,function(t){return i("Option",{key:t.group_id,attrs:{value:t.group_id}},[e._v(e._s(t.title_show)+"\n            ")])}))],1)],1)},staticRenderFns:[]}}});