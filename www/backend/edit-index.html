<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>牧云BOSS系统</title>
    <script>
        let STATIC = '/static/admin/';
        window.backend = {};
        window.backend.compatible = function (fn) {
            backend.callback = fn;
            seajs.use("app/init");
        }
    </script>
    <link href="../static/admin/css/init.css" rel="stylesheet">
    <script src="../static/admin/js/init.js"></script>
</head>
<body>
<div id="app">
    <div class="c-editor" data-component="code-editor" data-width="600" data-height="1000" data-textarea="content" data-obj-type="topic" data-action-list="insert-image,insert-component,js-beautifier,compress-code,replace-135-img" data-preview-url=""></div>
    <textarea id="content" class="areainput PUB_TXT" position="0" name="content" style="height: 0; width: 0;opacity: 0;"></textarea>
</div>
<style>
    body{
        overflow-x: hidden;
    }
</style>
<!-- built files will be auto injected -->
<script>
    define('page/init', ['common/util'], function (require) {
        let Util = require('common/util');

        let getUrlParam = function (key, url) {
            var reg = new RegExp("(#|&|\\?)" + key + "=([^&=\?#]+)");
            var ret = (url || document.location.href).match(reg);
            return (ret && ret[2]) || '';
        };

        if (getUrlParam('id')) {
            $('.c-editor').attr('data-preview-url','../admin.php?m=Admin&c=Index&a=index?m=Admin&c=Topic&a=topicPreview&id='+ getUrlParam('id'));
        }

        Util.componentInit();
    });

    function editInit() {
        console.log('初始化编辑器');
        seajs.use("app/init");
    }
</script>
<script type="text/javascript" src="../vendor/vendors.305f0b472d067387b69f.js"></script></body>
</html>
