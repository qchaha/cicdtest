webpackJsonp([205],{"9nfU":function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("m-page-list",{attrs:{path:t.api.path,params:t.api.params,columns:t.columns,"response-handle":t.responseHandle,"page-info-path":t.pageInfoApi.path,"page-info-params":t.pageInfoApi.params},on:{"on-page-info-success":t.handlePageInfoSuccess}},[i("m-action-bar",{attrs:{slot:"search"},slot:"search"},[i("m-action-search-bar",{attrs:{"search-condition":t.searchCondition,"search-condition-handle":t.searchConditionHandle}},[i("m-form-item",[i("Date-picker",{staticStyle:{width:"250px"},attrs:{type:"daterange",placeholder:"请选择时间"},model:{value:t.searchCondition.search_time,callback:function(e){t.$set(t.searchCondition,"search_time",e)},expression:"searchCondition.search_time"}})],1),t._v(" "),i("m-form-item",{attrs:{label:""}},[i("Input",{staticStyle:{width:"150px"},attrs:{placeholder:"请输入用户uid查询"},model:{value:t.searchCondition.uid,callback:function(e){t.$set(t.searchCondition,"uid",e)},expression:"searchCondition.uid"}})],1),t._v(" "),i("m-form-item",[i("Select",{staticStyle:{width:"200px"},attrs:{clearable:"",filterable:"",placeholder:"请选择用户行为"},model:{value:t.searchCondition.behavior_id,callback:function(e){t.$set(t.searchCondition,"behavior_id",e)},expression:"searchCondition.behavior_id"}},t._l(t.behaviors,function(e){return i("Option",{attrs:{value:e.code}},[t._v(t._s(e.name))])}))],1),t._v(" "),i("m-form-item",[i("Select",{staticStyle:{width:"200px"},attrs:{clearable:"",filterable:"",placeholder:"请选择简历内容"},model:{value:t.searchCondition.content_id,callback:function(e){t.$set(t.searchCondition,"content_id",e)},expression:"searchCondition.content_id"}},t._l(t.contents,function(e){return i("Option",{attrs:{value:e.content_id}},[t._v(t._s(e.description))])}))],1),t._v(" "),i("m-form-item",[i("Select",{staticStyle:{width:"200px"},attrs:{clearable:"",filterable:"",placeholder:"请选择用户状态"},model:{value:t.searchCondition.user_recruitment_status,callback:function(e){t.$set(t.searchCondition,"user_recruitment_status",e)},expression:"searchCondition.user_recruitment_status"}},[i("Option",{attrs:{value:1}},[t._v("正常")]),t._v(" "),i("Option",{attrs:{value:2}},[t._v("可疑")])],1)],1),t._v(" "),i("m-form-item",[i("Select",{staticStyle:{width:"200px"},attrs:{clearable:"",filterable:"",placeholder:"请选择用户身份"},model:{value:t.searchCondition.user_identity,callback:function(e){t.$set(t.searchCondition,"user_identity",e)},expression:"searchCondition.user_identity"}},[i("Option",{attrs:{value:1}},[t._v("招聘者")]),t._v(" "),i("Option",{attrs:{value:2}},[t._v("求职者")])],1)],1)],1)],1),t._v(" "),i("m-action-bar",[i("Button",{attrs:{type:"primary"},on:{click:t.exportExcel}},[t._v("导出")])],1)],1)},staticRenderFns:[]}},cEAJ:function(t,e,i){var a=i("VU/8")(i("jC3C"),i("9nfU"),null,null);t.exports=a.exports},jC3C:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a={suspect:{api:{path:"/boss/education/recruitment/recruitment-user/mark-suspect"}},cancelSuspect:{api:{path:"/boss/education/recruitment/recruitment-user/cancel-suspect"}},markSuspectReason:{api:{path:"/boss/education/recruitment/recruitment-user/suspect-reason"}}};e.default={name:"list",data:function(){var t=this;return{api:{path:"/boss/riskcontrol/behavior/decision-result/find-list",params:{fields:"{uid,user{identity},suspect_reason,create_time,behavior_name,behavior_times,limit_times,real_times,user_recruitment_status,remark,content_id,content_description}"}},exportApi:{api:{path:"/boss/riskcontrol/behavior/decision-result/export?fields={}",params:{searchCondition:this.searchCondition}}},pageInfoApi:{path:"/boss/riskcontrol/behavior/decision-result/list-page-info",params:{}},behaviors:[],contents:[],columns:[{title:"uid",key:"uid"},{title:"时间",key:"create_time"},{title:"用户行为",key:"behavior_name"},{title:"限制次数",key:"behavior_times"},{title:"实际次数435",sortable:!0,key:"real_times"},{title:"用户状态",key:"user_status"},{title:"审核原因",key:"suspect_remark",render:function(e,i){return e("m-input-text-editor",{props:{value:i.row.suspect_reason},style:{height:"40px",weight:"80px"},on:{"on-change":function(e){t.changeText(e,i.row.uid)}}})}},{title:"用户身份",key:"user_identity"},{title:"备注",key:"remark"},{title:"操作",key:"action",render:function(t,e){var i=[],n=[];return 1==e.row.user_recruitment_status?n.push({name:"标记可疑",handle:function(){bus.$emit("on-loading");var t={uid:e.row.uid};vm.$Util.api.post(a.suspect,t,vm).then(function(){location.reload()},function(t){alert(t)})}}):n.push({name:"取消可疑",handle:function(){bus.$emit("on-loading");var t={uid:e.row.uid};vm.$Util.api.post(a.cancelSuspect,t,vm).then(function(){location.reload()},function(t){alert(t)})}}),n.map(function(e){i.push(t("i-button",{props:{type:"text",size:"small"},on:{click:function(){e.handle()}}},[t("span",{style:{color:"#39f"}},e.name)]))}),t("div",i)}}],responseHandle:function(t,e){for(var i in t.data)t.data[i].create_time=e.$Util.dateFormat(t.data[i].create_time,"yyyy-MM-dd"),""==t.data[i].behavior_name&&(t.data[i].behavior_name=t.data[i].content_description),0==t.data[i].behavior_times&&(t.data[i].behavior_times=t.data[i].limit_times),1==t.data[i].user_recruitment_status?t.data[i].user_status='<p style="color:#00cc66;">正常</p>':t.data[i].user_status='<p style="color:#ff3300;">可疑</p>',t.data[i].user_identity="",t.data[i].user&&(1==t.data[i].user.identity?t.data[i].user_identity="招聘者":2==t.data[i].user.identity&&(t.data[i].user_identity="求职者"));return t},searchCondition:{uid:"",behavior_id:"",content_id:"",search_time:"",user_recruitment_status:"",user_identity:"",start_time:0,end_time:0},searchConditionHandle:function(t){return t.search_time.length>0&&(t.search_time[0]&&"number"!=typeof t.search_time[0]&&(t.start_time=Date.parse(t.search_time[0])/1e3),t.search_time[1]&&"number"!=typeof t.search_time[1]&&(t.end_time=Date.parse(t.search_time[1])/1e3,t.end_time=t.end_time+86400-1)),t}}},methods:{handlePageInfoSuccess:function(t){this.behaviors=t.data.filter.behaviors,this.contents=t.data.filter.contents},changeText:function(t,e){bus.$emit("on-loading");var i={uid:e,reason:t};vm.$Util.api.post(a.markSuspectReason,i,vm).then(function(){bus.$emit("on-loading"),this.$Message.success("修改成功")},function(t){bus.$emit("on-loading")})},exportExcel:function(){var t=this.searchCondition.uid,e=this.searchCondition.behavior_id,i=this.searchCondition.content_id,a=this.searchCondition.start_time,n=this.searchCondition.end_time,s=this.searchCondition.user_recruitment_status,r=this.searchCondition.user_identity,o=this.exportApi.api.path;t&&(o=o+"&uid="+t),e&&(o=o+"&behavior_id="+e),i&&(o=o+"&content_id="+i),a&&(o=o+"&start_time="+a),n&&(o=o+"&end_time="+a),s&&(o=o+"&user_recruitment_status="+s),r&&(o=o+"&user_identity="+r),window.open(o)},handleSort:function(){}}}}});