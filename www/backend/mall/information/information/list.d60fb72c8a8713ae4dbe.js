webpackJsonp([211],{"6xmp":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=void 0;t.default={name:"list",data:function(){return{addRoute:"/mall/information/information/add",api:{path:"/boss/mall/information/information/find-list",params:{fields:"{id,title,app_route,desc,start_time,end_time,cover(w:320,h:320){url,width,height},create_time,receivers{receive_type,uid,user_tag}}"}},pageInfoApi:{path:"/boss/mall/information/information/list-page-info",params:{}},columns:[{title:"id",key:"id"},{title:"标题",key:"title",width:200,render:function(e,t){return e("div",t.row.title.length>40?t.row.title.substr(0,40)+"...":t.row.title)}},{title:"说明",key:"desc",width:200,render:function(e,t){return e("div",t.row.desc.length>40?t.row.desc.substr(0,40)+"...":t.row.desc)}},{title:"接收对象",key:"receivers_show",width:200,render:function(e,t){return e("div",t.row.receivers_show.length>40?t.row.receivers_show.substr(0,40)+"...":t.row.receivers_show)}},{title:"跳转路由",key:"app_route"},{title:"发送时间",key:"start_time"},{title:"结束时间",key:"end_time"},{title:"操作",key:"action",render:function(e,t){return e("div",[e("i-button",{props:{type:"text",size:"small"},on:{click:function(){location.hash="/mall/information/information/edit/"+t.row.id}}},[e("span",{style:{color:"#39f"}},"编辑")]),e("i-button",{props:{type:"text",size:"small"},on:{click:function(){var e={api:{path:"/boss/mall/information/information/delete",params:{id:t.row.id}}};confirm("确认删除?")&&(bus.$emit("loading"),r.$Util.api.delete(e,r).then(function(){location.reload()},function(e){alert(e)}))}}},[e("span",{style:{color:"red"}},"删除")])])}}],searchCondition:{start_time:"",end_time:"",title:""},methods:{},responseHandle:function(e,t){var i=e.data,r={UNION:"并集",INTERSECTION:"交集",EXCEPT:"差集",NOT:"非"};for(var a in i){i[a].start_time=t.$Util.dateFormat(i[a].start_time,"yyyy-MM-dd<br>hh:mm:ss"),i[a].end_time=t.$Util.dateFormat(i[a].end_time,"yyyy-MM-dd<br>hh:mm:ss"),i[a].create_time=t.$Util.dateFormat(i[a].create_time,"yyyy-MM-dd<br>hh:mm:ss");var n=i[a].receivers[0].receive_type;if(1==n)i[a].receivers_show="全量用户";else if(2==n){var o=i[a].receivers.length,s=10;i[a].receivers_show="指定用户["+o+"]:";for(var d=0;d<o&&d<s;d++)i[a].receivers_show+=i[a].receivers[d].uid+(d<s-1&&d<o-1?",":"");o>s&&(i[a].receivers_show+="...")}else if(3==n){var l=i[a].receivers[0].user_tag.split("|");i[a].receivers_show="指定标签["+r[l[0]]+"]"+l[1]}}return e},handleSearchCondition:function(e){return""!=e.start_time&&"number"!=typeof e.start_time&&(e.start_time=e.start_time.getTime()),""!=e.end_time&&"number"!=typeof e.end_time&&(e.end_time=e.end_time.getTime()),e}}},created:function(){r=this}}},T9Uw:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("m-page-list",{attrs:{path:e.api.path,params:e.api.params,columns:e.columns,methods:e.methods,"page-info-path":e.pageInfoApi.path,"response-handle":e.responseHandle,"page-info-params":e.pageInfoApi.params}},[i("m-action-bar",[i("m-action-button-add",{attrs:{route:e.addRoute}})],1),e._v(" "),i("m-action-bar",{attrs:{slot:"search"},slot:"search"},[i("m-action-search-bar",{attrs:{"search-condition":e.searchCondition,"search-condition-handle":e.handleSearchCondition}},[i("m-form-item",{attrs:{label:"发送时间"}},[i("Date-picker",{attrs:{type:"datetime",format:"yyyy-MM-dd HH:mm:ss",placeholder:"选择发送时间范围"},model:{value:e.searchCondition.start_time,callback:function(t){e.$set(e.searchCondition,"start_time",t)},expression:"searchCondition.start_time"}})],1),e._v(" "),i("m-form-item",{attrs:{label:"结束时间"}},[i("Date-picker",{attrs:{type:"datetime",format:"yyyy-MM-dd HH:mm:ss",placeholder:"选择结束时间范围"},model:{value:e.searchCondition.end_time,callback:function(t){e.$set(e.searchCondition,"end_time",t)},expression:"searchCondition.end_time"}})],1),e._v(" "),i("m-form-item",{attrs:{label:"标题"}},[i("Input",{staticStyle:{width:"150px"},attrs:{placeholder:"输入标题搜索"},model:{value:e.searchCondition.title,callback:function(t){e.$set(e.searchCondition,"title",t)},expression:"searchCondition.title"}})],1)],1)],1)],1)},staticRenderFns:[]}},b5S6:function(e,t,i){var r=i("VU/8")(i("6xmp"),i("T9Uw"),null,null);e.exports=r.exports}});