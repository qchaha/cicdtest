webpackJsonp([208],{"+UwJ":function(t,e,o){var i=o("VU/8")(o("AMPS"),o("v7xB"),null,null);t.exports=i.exports},AMPS:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=[{value:"5",text:"组合购"},{value:"6",text:"加价购"},{value:"8",text:"全场满赠"},{value:"9",text:"包邮"}];e.default={name:"app",data:function(){return{addRoute:"/mall/promotion/promotion/add",api:{path:"/boss/mall/promotion/promotion/find-list",params:{fields:"{id,name,type,start_time,end_time,show_time,update_time,status}"}},pageInfoApi:{path:"/boss/mall/promotion/promotion/list-page-info",params:{}},promotionTypes:i,searchCondition:{type:"",name:"",start_time:"",end_time:""},columns:[{title:"ID",key:"id"},{title:"促销活动名称",key:"name",width:250,render:function(t,e){return t("div",e.row.name.length>50?e.row.desc.substr(0,50)+"...":e.row.name)}},{title:"促销活动类型",key:"type",width:120,render:function(t,e){var o={};return i.forEach(function(t){o[t.value]=t.text}),t("div",o[e.row.type])}},{title:"促销开始时间",key:"start_time",width:120},{title:"促销结束时间",key:"end_time",width:120},{title:"预告开始时间",key:"show_time",width:120},{title:"修改时间",key:"update_time",width:120},{title:"状态",key:"status",render:function(t,e){return 1==e.row.status?t("div","正常"):t("span",{style:{color:"grey"}},"停用")}},{title:"操作",key:"action",render:function(t,e){var o=[t("i-button",{props:{type:"text",size:"small"},on:{click:function(){location.hash="/mall/promotion/promotion/edit/"+e.row.id}}},[t("span",{style:{color:"#39f"}},"编辑")])];return 1==e.row.status&&o.push(t("i-button",{props:{type:"text",size:"small"},on:{click:function(){var t={5:"combine",6:"premium",8:"gift-reach-for-all",9:"free-shipment"};void 0!=t[e.row.type]&&(location.hash="/mall/promotion/"+e.row.id+"/"+t[e.row.type]+"/list/")}}},[t("span",{style:{color:"#39f"}},"规则设置")])),t("div",o)}}],methods:{toEditPromotion:function(t){location.hash="/mall/promotion/promotion/edit/"+t},toDelPromotion:function(t,e){if(confirm("确认删除?")){var o={api:{path:"/boss/mall/promotion/promotion/delete",params:{id:t}}};e.$emit("loading"),e.$Util.api.delete(o,e).then(function(t){location.reload()},function(t){})}},rulesList:function(t){var e=t.split(","),o=e[0],i=e[1],a={5:"combine",6:"premium"};void 0!=a[i]&&(location.hash="/mall/promotion/"+o+"/"+a[i]+"/list/")}},responseHandle:function(t,e){var o=t.data;for(var i in o)o[i].start_time=e.$Util.dateFormat(o[i].start_time,"yyyy-MM-dd<br>hh:mm:ss"),o[i].end_time=e.$Util.dateFormat(o[i].end_time,"yyyy-MM-dd<br>hh:mm:ss"),o[i].show_time>0?o[i].show_time=e.$Util.dateFormat(o[i].show_time,"yyyy-MM-dd<br>hh:mm:ss"):o[i].show_time="",o[i].update_time=o[i].update_time.date.replace(".000000","");return t},handleSearchCondition:function(t){return""!=t.start_time&&"number"!=typeof t.start_time&&(t.start_time=t.start_time.getTime()),""!=t.end_time&&"number"!=typeof t.end_time&&(t.end_time=t.end_time.getTime()),t}}}}},v7xB:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("m-page-list",{attrs:{path:t.api.path,params:t.api.params,columns:t.columns,methods:t.methods,"response-handle":t.responseHandle,"page-info-path":t.pageInfoApi.path,"page-info-params":t.pageInfoApi.params}},[o("m-action-bar",[o("m-action-button-add",{attrs:{route:t.addRoute}})],1),t._v(" "),o("m-action-bar",{attrs:{slot:"search"},slot:"search"},[o("m-action-search-bar",{attrs:{"search-condition":t.searchCondition,"search-condition-handle":t.handleSearchCondition}},[o("Select",{staticStyle:{width:"200px","margin-right":"10px"},attrs:{clearable:"",placeholder:"请选择促销活动类型"},model:{value:t.searchCondition.type,callback:function(e){t.$set(t.searchCondition,"type",e)},expression:"searchCondition.type"}},t._l(t.promotionTypes,function(e){return o("Option",{key:e,attrs:{value:e.value}},[t._v(t._s(e.text))])})),t._v(" "),o("m-form-item",{attrs:{label:"促销活动名称"}},[o("Input",{staticStyle:{width:"150px","margin-right":"10px"},attrs:{placeholder:"输入促销活动名称"},model:{value:t.searchCondition.name,callback:function(e){t.$set(t.searchCondition,"name",e)},expression:"searchCondition.name"}})],1),t._v(" "),o("m-form-item",{attrs:{label:"开始时间"}},[o("Date-picker",{attrs:{type:"datetime",format:"yyyy-MM-dd HH:mm:ss",placeholder:"选择开始时间"},model:{value:t.searchCondition.start_time,callback:function(e){t.$set(t.searchCondition,"start_time",e)},expression:"searchCondition.start_time"}})],1),t._v(" "),o("m-form-item",{attrs:{label:"结束时间"}},[o("Date-picker",{attrs:{type:"datetime",format:"yyyy-MM-dd HH:mm:ss",placeholder:"选择结束时间"},model:{value:t.searchCondition.end_time,callback:function(e){t.$set(t.searchCondition,"end_time",e)},expression:"searchCondition.end_time"}})],1)],1)],1)],1)},staticRenderFns:[]}}});