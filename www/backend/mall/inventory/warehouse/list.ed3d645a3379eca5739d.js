webpackJsonp([26],{"11tO":function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Card",[a("Table",{attrs:{border:"",columns:t.columns,data:t.data}}),t._v(" "),a("div",{staticClass:"page-bar"},[a("Page",{attrs:{current:t.page.currentPage,"page-size":t.page.pageSize,total:t.page.total,size:"small"},on:{"on-change":t.onChangePage}})],1)],1)},staticRenderFns:[]}},"9M69":function(t,e,a){var r=a("OS0W");"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);a("rjj0")("77449e5b",r,!0)},Bm7k:function(t,e,a){var r=a("DWp4");"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);a("rjj0")("302c8c9a",r,!0)},DWp4:function(t,e,a){e=t.exports=a(0)(),e.push([t.i,".ivu-form>.ivu-row[data-v-e67c3b70]:not(:last-child){margin-bottom:10px}",""])},GQcm:function(t,e,a){e=t.exports=a(0)(),e.push([t.i,".page-bar[data-v-5dc4985e]{display:-ms-flexbox;display:flex;-ms-flex-pack:center;justify-content:center;margin:15px auto 0}",""])},OS0W:function(t,e,a){e=t.exports=a(0)(),e.push([t.i,".ivu-card[data-v-6b6f2102]{margin-bottom:15px}.top[data-v-6b6f2102]{padding:10px;background:rgba(0,153,229,.7);color:#fff;text-align:center;border-radius:2px}",""])},RGBR:function(t,e,a){a("9M69");var r=a("VU/8")(a("bNqb"),a("dvjW"),"data-v-6b6f2102",null);t.exports=r.exports},ahd0:function(t,e,a){a("Bm7k");var r=a("VU/8")(a("tW42"),a("eowr"),"data-v-e67c3b70",null);t.exports=r.exports},bNqb:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a("ahd0"),o=a.n(r),n=a("mGM2"),i=a.n(n);e.default={name:"List",components:{MSearch:o.a,MTable:i.a},data:function(){return{listApi:{api:{path:"/boss/mall/inventory/warehouse/list",params:{offset:0,limit:24,status:1,id:"",name:"",fields:"{id,name,status,create_time,update_time,delete_time}"}}},pageApi:{api:{path:"/boss/mall/inventory/warehouse/page"}},loadTotal:2,loadedNum:0,data:[],page:{total:0,pageSize:24,currentPage:1}}},created:function(){this.$nextTick(function(){bus.$emit("on-loading")}),this.loadList(),this.loadPage(),bus.$on("alert-error-tips",function(t,e){return this.alertErrorTips(t,e)})},watch:{loadedNum:function(){this.loadedNum>=this.loadTotal&&(bus.$emit("on-loading"),this.loadedNum=0)}},methods:{loadList:function(){var t=this;this.$Util.api.get(this.listApi,this).then(function(e){t.loadedNum+=1,t.data=e.data},function(e){t.loadedNum+=1,t.alertErrorTips(e.message?e.message:"发生了未知的错误")})},loadPage:function(){var t=this;this.page.total=0,this.page.currentPage=1,this.pageApi.api.params=this.listApi.api.params,this.$Util.api.get(this.pageApi,this).then(function(e){t.loadedNum+=1,t.page.total=e.data.total},function(e){t.loadedNum+=1,t.alertErrorTips(e.message?e.message:"发生了未知的错误")})},onSearch:function(){this.data=[],this.loadTotal=2,bus.$emit("on-loading"),this.loadList(),this.loadPage()},onChangePage:function(t){this.page.currentPage=t,this.listApi.api.params.offset=(t-1)*this.listApi.api.params.limit,this.loadTotal=1,bus.$emit("on-loading"),this.loadList()},alertErrorTips:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:300;this.$Modal.error({width:e,content:t})}},beforeDestroy:function(){bus.$off("alert-error-tips")}}},dvjW:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("m-page",[a("m-search",{attrs:{searchParams:t.listApi.api.params},on:{"update:searchParams":function(e){t.$set(t.listApi.api,"params",e)},onSearch:t.onSearch}}),t._v(" "),a("m-table",{attrs:{data:t.data,page:t.page},on:{onChangePage:t.onChangePage}}),t._v(" "),a("Back-top",{attrs:{bottom:100,right:100}},[a("div",{staticClass:"top"},[t._v("返回顶端")])])],1)},staticRenderFns:[]}},eowr:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Card",[a("Form",{attrs:{model:t.searchParams}},[a("Row",[a("i-col",{attrs:{span:"3"}},[a("FormItem",{attrs:{label:"状态","label-width":40}},[a("Select",{attrs:{clearable:""},model:{value:t.searchParams.status,callback:function(e){t.$set(t.searchParams,"status",e)},expression:"searchParams.status"}},t._l(t.statusOptions,function(e){return a("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label)+"\n                        ")])}))],1)],1),t._v(" "),a("i-col",{attrs:{span:"4"}},[a("FormItem",{attrs:{label:"仓库ID","label-width":60}},[a("Input",{on:{"on-enter":t.onSearch},model:{value:t.searchParams.id,callback:function(e){t.$set(t.searchParams,"id",e)},expression:"searchParams.id"}})],1)],1),t._v(" "),a("i-col",{attrs:{span:"6"}},[a("FormItem",{attrs:{label:"仓库名","label-width":60}},[a("Input",{on:{"on-enter":t.onSearch},model:{value:t.searchParams.name,callback:function(e){t.$set(t.searchParams,"name",e)},expression:"searchParams.name"}})],1)],1)],1),t._v(" "),a("Row",{attrs:{type:"flex",justify:"space-between"}},[a("i-col",{attrs:{span:"2"}},[a("Button",{attrs:{type:"primary",long:""},on:{click:t.onSearch}},[t._v("搜索")])],1),t._v(" "),a("i-col",{attrs:{span:"2"}},[a("Button",{attrs:{type:"primary",long:""},on:{click:t.toCreate}},[t._v("新建")])],1)],1)],1)],1)},staticRenderFns:[]}},mGM2:function(t,e,a){a("qt67");var r=a("VU/8")(a("r+lC"),a("11tO"),"data-v-5dc4985e",null);t.exports=r.exports},qt67:function(t,e,a){var r=a("GQcm");"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);a("rjj0")("d74fd40c",r,!0)},"r+lC":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"MTable",props:{data:{type:Array,default:function(){return[]}},page:{type:Object,default:function(){return{total:0,pageSize:24,currentPage:1}}}},data:function(){var t=this;return{discardApi:{api:{path:"/boss/mall/catalog/brand/discard"}},restoreApi:{api:{path:"/boss/mall/catalog/brand/restore"}},columns:[{title:"ID",key:"id",align:"center",sortable:!0,width:80},{title:"仓库名",key:"name",align:"center"},{title:"创建时间",key:"create_time",align:"center",sortable:!0,width:120,render:function(e,a){var r=parseInt(a.row.create_time);return e("div",{},[e("p",{},t.$Util.dateFormat(r,"yyyy-MM-dd")),e("p",{},t.$Util.dateFormat(r,"hh:mm:ss"))])}},{title:"更新时间",key:"update_time",align:"center",sortable:!0,width:120,render:function(e,a){var r=parseInt(a.row.update_time);return e("div",{},[e("p",{},t.$Util.dateFormat(r,"yyyy-MM-dd")),e("p",{},t.$Util.dateFormat(r,"hh:mm:ss"))])}},{title:"废弃时间",key:"delete_time",align:"center",sortable:!0,width:120,render:function(e,a){var r=parseInt(a.row.delete_time);return e("div",{},[e("p",{},t.$Util.dateFormat(r,"yyyy-MM-dd")),e("p",{},t.$Util.dateFormat(r,"hh:mm:ss"))])}},{title:"状态",key:"state",align:"center",width:120,render:function(t,e){switch(e.row.status){case 0:return t("Tag",{attrs:{color:"red"}},"已作废");case 1:return t("Tag",{attrs:{color:"green"}},"使用中")}}},{title:"操作",key:"action",align:"center",width:120,render:function(e,a){var r=[e("Button",{attrs:{type:"text",size:"small"},style:{color:"#3366FF"},on:{click:function(){location.hash="/mall/catalog/brand/edit/"+a.row.id}}},"编辑")];return 0!==a.row.status?r.push(e("Button",{attrs:{type:"text",size:"small"},style:{color:"#FF0000"},on:{click:function(){var e=t;e.$Modal.confirm({width:300,loading:!0,content:"确认废弃ID【"+a.row.id+"】的品牌么？",onOk:function(){t.$Util.api.post(t.discardApi,{id:a.row.id},e).then(function(t){0===t.error_code?(a.row.status=0,e.$Modal.remove(),setTimeout(function(){e.$Modal.success({width:250,loading:!1,content:"已成功作废"})},300)):(e.$Modal.remove(),setTimeout(function(){bus.$emit("alert-error-tips",t.error_description?t.error_description:"发生了未知的错误",300)},300))},function(t){e.$Modal.remove(),setTimeout(function(){bus.$emit("alert-error-tips",t.message?t.message:"发生了未知的错误",300)},300)})}})}}},"废弃")):r.push(e("Button",{attrs:{type:"text",size:"small"},style:{color:"#00cc66"},on:{click:function(){bus.$emit("on-loading"),t.$Util.api.post(t.restoreApi,{id:a.row.id},t).then(function(t){bus.$emit("on-loading"),0===t.error_code?a.row.status=1:bus.$emit("alert-error-tips",t.error_description?t.error_description:"发生了未知的错误",300)},function(t){bus.$emit("on-loading"),bus.$emit("alert-error-tips",t.message?t.message:"发生了未知的错误",300)})}}},"恢复")),e("div",{},r)}}]}},methods:{onChangePage:function(t){this.$emit("onChangePage",t)}}}},tW42:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"InventoryHistorySearchForm",props:{searchParams:{type:Object,default:function(){return{status:null,id:null,name:null}}}},data:function(){return{statusOptions:[{label:"已废弃",value:0},{label:"使用中",value:1}]}},methods:{onSearch:function(){this.$emit("onSearch")},toCreate:function(){location.hash="/mall/inventory/warehouse/add"}}}}});