webpackJsonp([122],{"2xhl":function(t,e,a){var i=a("VU/8")(a("na9S"),a("L9MN"),null,null);t.exports=i.exports},FZEN:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={create:{api:{path:"/boss/mall/cart/cart/create"}},update:{api:{path:"/boss/mall/cart/cart/update"}},find:{api:{path:"/boss/mall/cart/cart/find",params:{fields:"{id,name}",cartId:0}},responseHandle:function(t){return t}},resource:{api:{path:"/boss/mall/cart/cart/add-page-info",params:{fields:"{}"}},responseHandle:function(t){return t}}};e.default={name:"MCartForm",props:{id:{type:String,default:""},usage:{type:String,default:"edit"}},data:function(){return{formItem:{id:0,name:""}}},methods:{back:function(){location.hash="/mall/cart/cart/list"},submit:function(){if(this.validateFormData()){var t=this.getRequestParams(),e=i.create;"edit"===this.usage&&(e=i.update),this.submitRequest(t,e)}},validateFormData:function(){return!0},getRequestParams:function(){return{}},submitRequest:function(t,e){this.$emit("loading");var a=this;this.$Util.api.post(e,t,a).then(function(t){a.$Notice.success({title:"请求成功",desc:""}),a.back()},function(t){a.$emit("loading"),a.$Notice.warning({title:"请求失败",desc:""})})},loadResource:function(){this.$emit("loading");var t=this;this.$Util.api.get(i.resource,t).then(function(e){t.$emit("loading"),"edit"===t.usage&&t.$nextTick(function(){t.loadCart()})},function(e){t.$emit("loading"),t.$Notice.warning({title:"加载资源失败",desc:""})})},loadCart:function(){this.$emit("loading");var t=this;this.$Util.api.get(i.find,t).then(function(e){t.$emit("loading"),this.formItem.id=e.data.id,this.formItem.name=e.data.name},function(e){t.$emit("loading"),t.$Notice.warning({title:"加载cart详情失败",desc:""})})},initIds:function(){if("edit"===this.usage){var t=this.id;if(!parseInt(t))return alert("cartid格式有误"),!1;t=parseInt(t),this.formItem.id=t,i.find.api.params.cartId=t}}},created:function(){this.initIds(),"edit"===this.usage&&(i.resource.api.path="/boss/mall/cart/cart/edit-page-info"),this.$nextTick(function(){this.loadResource()})}}},L9MN:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("m-page-edit",{attrs:{"is-loading":t.loadingState}},[a("m-cart-form",{attrs:{usage:"edit",id:t.id},on:{loading:t.changeLoadingState}})],1)},staticRenderFns:[]}},na9S:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("y1A0"),n=a.n(i);e.default={name:"app",components:{MCartForm:n.a},data:function(){return{id:this.$route.params.id,loadingState:!1}},methods:{changeLoadingState:function(){this.loadingState=!this.loadingState}}}},"u+Mg":function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{"padding-top":"20px"}},[a("i-button",{attrs:{type:"primary"},on:{click:t.back}},[t._v("返回")]),t._v(" "),a("Form",{attrs:{model:t.formItem,"label-width":60}},[a("Form-item",[a("i-button",{attrs:{type:"primary"},on:{click:t.submit}},[t._v("提交")]),t._v(" "),a("i-button",{staticStyle:{"margin-left":"8px"},attrs:{type:"ghost"},on:{click:t.back}},[t._v("取消")])],1)],1)],1)},staticRenderFns:[]}},y1A0:function(t,e,a){var i=a("VU/8")(a("FZEN"),a("u+Mg"),null,null);t.exports=i.exports}});