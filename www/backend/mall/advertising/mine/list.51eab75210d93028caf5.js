webpackJsonp([177],{"4RnT":function(t,e,a){a("6UPf");var n=a("VU/8")(a("xw8b"),a("kbhf"),"data-v-41d2fd1d",null);t.exports=n.exports},"6UPf":function(t,e,a){var n=a("CPf9");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);a("rjj0")("3e921dbc",n,!0)},CPf9:function(t,e,a){e=t.exports=a(0)(),e.push([t.i,"",""])},kbhf:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("m-page-list",{attrs:{path:t.api.path,params:t.api.params,columns:t.columns,"page-info-path":t.pageInfoApi.path,"page-info-params":t.pageInfoApi.params}},[a("m-action-bar",[a("m-action-button-add",{attrs:{route:t.toAddPage}})],1),t._v(" "),a("m-action-bar",{attrs:{slot:"search"},slot:"search"},[a("m-action-search-bar",{attrs:{"search-condition":t.searchCondition,"search-condition-handle":t.searchResponseHandle}},[a("m-form-item",{attrs:{label:"广告标题"}},[a("Input",{attrs:{placeholder:"多个搜索词用中/英文逗号分隔"},model:{value:t.searchCondition.name,callback:function(e){t.$set(t.searchCondition,"name",e)},expression:"searchCondition.name"}})],1),t._v(" "),a("m-form-item",{attrs:{label:"展示对象"}},[a("i-select",{attrs:{multiple:""},model:{value:t.searchCondition.audience,callback:function(e){t.$set(t.searchCondition,"audience",e)},expression:"searchCondition.audience"}},t._l(t.audienceOptions,function(e){return a("i-option",{attrs:{value:e.audience}},[t._v(t._s(e.title))])}))],1),t._v(" "),a("m-form-item",{attrs:{label:"显示状态"}},[a("i-select",{attrs:{multiple:""},model:{value:t.searchCondition.status,callback:function(e){t.$set(t.searchCondition,"status",e)},expression:"searchCondition.status"}},t._l(t.statusOptions,function(e){return a("i-option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])}))],1),t._v(" "),a("m-form-item",{attrs:{label:""}},[a("Date-picker",{attrs:{type:"datetime",placeholder:"开始日期"},model:{value:t.searchCondition.start_time,callback:function(e){t.$set(t.searchCondition,"start_time",e)},expression:"searchCondition.start_time"}})],1),t._v(" "),a("m-form-item",[a("Date-picker",{attrs:{type:"datetime",placeholder:"结束日期"},model:{value:t.searchCondition.end_time,callback:function(e){t.$set(t.searchCondition,"end_time",e)},expression:"searchCondition.end_time"}})],1)],1)],1)],1)},staticRenderFns:[]}},xw8b:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"App",data:function(){return{api:{path:"/boss/mall/advertising/mine/list",params:{fields:"{id,name,start_time,end_time,state,audience}",state:[1,3]}},pageInfoApi:{path:"/boss/mall/advertising/mine/list-page-info",params:{}},toAddPage:"/mall/advertising/mine/add",columns:[{title:"广告ID",key:"id"},{title:"广告标题",key:"name"},{title:"展示对象",key:"audience",render:function(t,e){return t("span",{},e.row.audience?e.row.audience:"不限")}},{title:"开始时间",key:"start_time",render:function(t,e){return t("span",{},vm.$Util.dateFormat(e.row.start_time,"yyyy-MM-dd hh:mm:ss"))}},{title:"结束时间",key:"end_time",render:function(t,e){return t("span",{},vm.$Util.dateFormat(e.row.end_time,"yyyy-MM-dd hh:mm:ss"))}},{title:"状态",key:"status",render:function(t,e){var a="",n="";switch(e.row.state){case 0:a="#ff3300",n="已作废";break;case 1:a="#00cc66",n="已发布";break;case 2:a="#9ea7b4",n="已下线";break;case 3:a="#ff9900",n="待发布"}return t("span",{style:{color:a}},n)}},{title:"操作",key:"action",render:function(t,e){var a=[t("Button",{attrs:{type:"text"},style:{color:"#3366FF"},on:{click:function(){location.hash="/boss/mall/advertising/mine/edit/"+e.row.id}}},"编辑")];return 0===e.row.state?a.push(t("Button",{attrs:{type:"text"},style:{color:"#3366FF"},on:{click:function(){vm.$Util.api.get({api:{path:"/boss/mall/advertising/mine/restore/"+e.row.id}},vm).then(function(t){0===t.error_code?e.row.state=1:vm.$Modal.error({width:300,content:t.error_description?t.error_description:"发生了未知的错误"})},function(t){vm.$Modal.error({width:300,content:t.message?t.message:"发生了未知的错误"})})}}},"恢复")):a.push(t("Button",{attrs:{type:"text"},style:{color:"#FF3300"},on:{click:function(){vm.$Modal.confirm({width:300,loading:!0,content:"确认作废ID为【"+e.row.id+"】的广告么？",onOk:function(){vm.$Util.api.get({api:{path:"/boss/mall/advertising/mine/trash/"+e.row.id}},vm).then(function(t){0===t.error_code?(e.row.state=0,vm.$Modal.remove()):vm.$Modal.error({width:300,content:t.error_description?t.error_description:"发生了未知的错误"})},function(t){vm.$Modal.error({width:300,content:t.message?t.message:"发生了未知的错误"})})}})}}},"作废")),t("div",{},a)}}],searchCondition:{name:"",audience:[],status:[1,3],start_time:"",end_time:""},searchResponseHandle:function(t){return t.start_time&&"number"!=typeof t.start_time&&(t.start_time=Date.parse(t.start_time)),t.end_time&&"number"!=typeof t.end_time&&(t.end_time=Date.parse(t.end_time)),t},audienceOptions:[],statusOptions:[{value:0,label:"已废弃"},{value:1,label:"已发布"},{value:2,label:"已下线"},{value:3,label:"待发布"}]}},created:function(){var t=this;this.$nextTick(function(){t.loadTargetOptions()})},methods:{alertErrorTips:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:250;this.$Modal.error({width:e,content:t})},loadTargetOptions:function(){var t=this;this.$Util.api.get({api:{path:"/boss/mall/advertising/home/tag-group-info",params:{fields:"{audience,title}"}}},this).then(function(e){e.data.unshift({audience:"no_tag",title:"不限"}),t.audienceOptions=e.data},function(e){t.alertErrorTips(e.message?e.message:"发生了未知的错误",300)})}}}}});