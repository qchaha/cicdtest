webpackJsonp([4],{"+lPT":function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("Card",[i("section",{attrs:{slot:"title"},slot:"title"},[i("span",{staticClass:"card-title"},[t._v("\n            上新品牌\n        ")]),t._v(" "),i("i-switch",{model:{value:t.group.state,callback:function(e){t.$set(t.group,"state",e)},expression:"group.state"}})],1),t._v(" "),t.group.state?i("section",[i("Form",{ref:t.formRef,attrs:{model:t.group,rules:t.validateRules,"label-width":80}},[i("Form-item",{attrs:{label:"卡片标题",prop:"name"}},[i("Input",{staticClass:"fixed-width-input",attrs:{placeholder:"请输入卡片标题"},model:{value:t.group.name,callback:function(e){t.$set(t.group,"name",e)},expression:"group.name"}}),t._v(" "),i("span",{staticClass:"input-tips"},[t._v("最多不超过15个字符，不可有特殊字符")])],1)],1),t._v(" "),t._l(t.itemChunks,function(e,n){return i("Row",t._l(e,function(e,s){return i("Col",{attrs:{span:"9",offset:s?2:0}},[i("m-brand-item-settings",{attrs:{type:t.type,position:2*n+s,group:t.group,basicBrandOptions:t.basicBrandOptions,item:t.group.items[2*n+s]},on:{"update:group":function(e){t.group=e},"update:item":function(e){t.$set(t.group.items,2*n+s,e)}}})],1)}))})],2):t._e()])},staticRenderFns:[]}},"+mom":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i("SAou"),s=i.n(n);e.default={name:"MA2Settings",components:{MGoodsSettings:s.a},props:{group:{type:Object,default:function(){return{items:[]}}}},created:function(){var t=this;this.$nextTick(function(){t.adjustItems()})},data:function(){return{}},computed:{itemChunks:function(){var t=[];return this.group.items.forEach(function(e,i){i%2==0&&t.push([]),t[t.length-1].push(e)}),t},showRemoveBtn:function(){return this.group.items.length>2}},methods:{adjustItems:function(){this.group.items instanceof Array?this.group.items.length<2&&this.fillItems(2-this.group.items.length):(this.group.items=[],this.fillItems(2))},fillItems:function(t){for(var e=0;e<t;e++)this.group.items.push({name:null,description:null,route:null,ratio:1,image:null})}}}},"/1Ng":function(t,e,i){e=t.exports=i(0)(),e.push([t.i,".ivu-card[data-v-37d78d0a]{background-color:#f2f2f2}.error-ghost-btn[data-v-37d78d0a]{border-color:#ed3f14;color:#ed3f14}.input-tips[data-v-37d78d0a]{margin-left:10px;font-size:12px;font-weight:400;color:#9ea7b4}.ivu-form-item[data-v-37d78d0a]:not(:last-child){margin-bottom:24px}.fixed-width-input[data-v-37d78d0a]{display:inline-block;width:300px}",""])},"/kNZ":function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",t._l(t.itemChunks,function(e,n){return i("Row",t._l(e,function(e,s){return i("Col",{attrs:{span:"8",offset:s?2:0}},[i("m-goods-settings",{attrs:{position:2*n+s,showRemoveBtn:t.showRemoveBtn,group:t.group,item:t.group.items[2*n+s]},on:{"update:group":function(e){t.group=e},"update:item":function(e){t.$set(t.group.items,2*n+s,e)}}})],1)}))}))},staticRenderFns:[]}},"0qgq":function(t,e,i){var n=i("C3EL");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);i("rjj0")("3d236c90",n,!0)},"0xdb":function(t,e,i){e=t.exports=i(0)(),e.push([t.i,".fixed-width-input[data-v-d7cb9cda]{display:inline-block;width:300px}.ivu-form-item-required[data-v-d7cb9cda]:not(:last-child){margin-bottom:24px}.input-tips[data-v-d7cb9cda]{margin-left:10px;font-size:12px;color:#9ea7b4}",""])},"0zho":function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",t._l(t.itemChunks,function(e,n){return i("Row",t._l(e,function(e,s){return i("Col",{attrs:{span:"8",offset:s?2:0}},[i("m-goods-settings",{attrs:{position:2*n+s,showRemoveBtn:t.showRemoveBtn,group:t.group,item:t.group.items[2*n+s]},on:{"update:group":function(e){t.group=e},"update:item":function(e){t.$set(t.group.items,2*n+s,e)}}})],1)}))}))},staticRenderFns:[]}},"3qms":function(t,e,i){i("Cp4y");var n=i("VU/8")(i("9JRJ"),i("Mnk3"),"data-v-d7cb9cda",null);t.exports=n.exports},"6IZu":function(t,e,i){i("gsdg");var n=i("VU/8")(i("+mom"),i("0zho"),"data-v-9692a3fa",null);t.exports=n.exports},"6LjD":function(t,e,i){e=t.exports=i(0)(),e.push([t.i,".goods-settings-card[data-v-4b346a46]{background-color:#f2f2f2}.A5-first[data-v-4b346a46]{max-width:400px;background-color:#cff}.ivu-form-item[data-v-4b346a46]:not(:first-child):not(:last-child){margin-bottom:24px}.fixed-width-input[data-v-4b346a46]{display:inline-block;width:200px}.input-tips[data-v-4b346a46]{margin-left:10px;font-size:12px;color:#9ea7b4}.info-ghost-btn[data-v-4b346a46]{border-color:#2db7f5;color:#2db7f5}.error-ghost-btn[data-v-4b346a46]{border-color:#ed3f14;color:#ed3f14}.img-ratio-tips[data-v-4b346a46]{font-size:12px;color:#9ea7b4}",""])},"6iXg":function(t,e,i){e=t.exports=i(0)(),e.push([t.i,".ivu-row[data-v-5a500ae0]:not(:last-child){margin-bottom:20px}",""])},"8Ysy":function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("Card",[i("p",{attrs:{slot:"title"},slot:"title"},[t._v("广告组")]),t._v(" "),i("section",{attrs:{slot:"extra"},slot:"extra"},[i("Button",{attrs:{type:"primary"},on:{click:t.addGroup}},[t._v("\n            添加\n        ")]),t._v(" "),t.groups.length>1?i("Button",{staticClass:"error-ghost-btn",attrs:{type:"ghost"},on:{click:t.removeGroup}},[t._v("\n            删除\n        ")]):t._e(),t._v(" "),t.index>0?i("Button",{staticClass:"info-ghost-btn",attrs:{type:"ghost"},on:{click:function(e){t.moveGroup(t.index,t.index-1)}}},[t._v("\n            上移\n        ")]):t._e(),t._v(" "),t.index<t.groups.length-1?i("Button",{staticClass:"info-ghost-btn",attrs:{type:"ghost"},on:{click:function(e){t.moveGroup(t.index,t.index+1)}}},[t._v("\n            下移\n        ")]):t._e()],1),t._v(" "),i("section",[i("div",{staticClass:"goods-group-type-select"},[i("Select",{staticClass:"fixed-width-select",attrs:{filterable:""},model:{value:t.group.type,callback:function(e){t.$set(t.group,"type",e)},expression:"group.type"}},t._l(t.goodsGroupOptions,function(e){return i("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])})),t._v(" "),i("span",{staticClass:"input-tips"},[t._v("长宽比"+t._s(t.group.ratio))])],1),t._v(" "),"A1"===t.group.type?i("m-A1-settings",{attrs:{group:t.group},on:{"update:group":function(e){t.group=e}}}):t._e(),t._v(" "),"A2"===t.group.type?i("m-A2-settings",{attrs:{group:t.group},on:{"update:group":function(e){t.group=e}}}):t._e(),t._v(" "),"A3"===t.group.type?i("m-A3-settings",{attrs:{index:t.index,group:t.group},on:{"update:group":function(e){t.group=e}}}):t._e(),t._v(" "),"A4"===t.group.type?i("m-A4-settings",{attrs:{group:t.group},on:{"update:group":function(e){t.group=e}}}):t._e(),t._v(" "),"A5"===t.group.type?i("m-A5-settings",{attrs:{group:t.group},on:{"update:group":function(e){t.group=e}}}):t._e()],1)])},staticRenderFns:[]}},"9JRJ":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"MNewGoodsSettings",props:{item:{type:Object,default:function(){return{}}}},data:function(){return{formRef:"newGoodsForm",validateRules:{name:[{required:!0,message:"页面标题不能为空",trigger:"blur"},{type:"string",max:15,message:"卡片标题不能多于15个字符",trigger:"blur"}],extra:[{required:!0,message:"Goods_ID不能为空",trigger:"blur"},{type:"string",max:700,message:"不能多于700个字符",trigger:"blur"}]}}},created:function(){var t=this;this.$nextTick(function(){bus.$on("on-submit",function(){t.$refs[t.formRef]&&t.$refs[t.formRef].validate(function(t){t||(bus.$emit("prevent-submit"),bus.$emit("alert-error-tips","有必填项没填写或填写项不合规，请完善。",350))})}),t.item.extra&&(t.item.extra=JSON.parse(t.item.extra).join(","))})}}},C3EL:function(t,e,i){e=t.exports=i(0)(),e.push([t.i,".ivu-row[data-v-d2d710bc]:not(:last-child){margin-bottom:20px}",""])},CgHF:function(t,e,i){i("Erun");var n=i("VU/8")(i("XB1s"),i("tKEN"),"data-v-37d78d0a",null);t.exports=n.exports},Cp4y:function(t,e,i){var n=i("0xdb");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);i("rjj0")("9132b022",n,!0)},DGnU:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("Card",{class:t.goodsSettingsCardClass},[i("p",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(t.position+1))]),t._v(" "),i("section",{attrs:{slot:"extra"},slot:"extra"},[t.position<t.group.items.length-1?i("Button",{staticClass:"info-ghost-btn",attrs:{type:"ghost"},on:{click:function(e){t.moveItem(t.position,t.position+1)}}},[t._v("\n            后移\n        ")]):t._e(),t._v(" "),t.position>0?i("Button",{staticClass:"info-ghost-btn",attrs:{type:"ghost"},on:{click:function(e){t.moveItem(t.position,t.position-1)}}},[t._v("\n            前移\n        ")]):t._e(),t._v(" "),t.showRemoveBtn?i("Button",{staticClass:"error-ghost-btn",attrs:{type:"ghost"},on:{click:function(e){t.removeItem(t.position)}}},[t._v("\n            删除\n        ")]):t._e()],1),t._v(" "),i("Form",{ref:t.formRef,attrs:{model:t.item,rules:t.validateRules,"label-width":50}},[i("Form-item",{attrs:{label:"ID"}},[i("span",[t._v(t._s(t.item.id))])]),t._v(" "),i("Form-item",{attrs:{label:"标题",prop:"name"}},[i("Input",{staticClass:"fixed-width-input",attrs:{placeholder:"请输入标题"},model:{value:t.item.name,callback:function(e){t.$set(t.item,"name",e)},expression:"item.name"}}),t._v(" "),i("span",{staticClass:"input-tips"},[t._v("弱网环境下展示")])],1),t._v(" "),i("Form-item",{attrs:{label:"描述",prop:"description"}},[i("Input",{staticClass:"fixed-width-input",attrs:{placeholder:"请输入描述"},model:{value:t.item.description,callback:function(e){t.$set(t.item,"description",e)},expression:"item.description"}}),t._v(" "),i("span",{staticClass:"input-tips"},[t._v("弱网环境下展示")])],1),t._v(" "),i("Form-item",{attrs:{label:"路由",prop:"route"}},[i("m-app-route",{attrs:{placeholder:"输入路由","default-route":t.item.route},on:{"on-ok":t.handleSelectRoute}})],1),t._v(" "),i("Form-item",{attrs:{label:"图片",prop:"image"}},[i("m-upload-image",{attrs:{"default-images":[{url:t.item.image}]},on:{"on-success":t.handleUploadSuccess}}),t._v(" "),t.item.ratio?i("span",{staticClass:"img-ratio-tips"},[t._v("长宽比"+t._s(t.item.ratio))]):t._e()],1)],1)],1)},staticRenderFns:[]}},Erun:function(t,e,i){var n=i("/1Ng");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);i("rjj0")("8b7fb768",n,!0)},"GD/Z":function(t,e,i){e=t.exports=i(0)(),e.push([t.i,".card-title[data-v-c050d5fc]{line-height:20px;font-size:14px;color:#1c2438;font-weight:700;margin-right:10px}.fixed-width-input[data-v-c050d5fc]{display:inline-block;width:300px}.ivu-form-item[data-v-c050d5fc]{margin-bottom:24px}.input-tips[data-v-c050d5fc]{margin-left:10px;font-size:12px;color:#9ea7b4}.ivu-row[data-v-c050d5fc]:not(:last-child){margin-bottom:20px}",""])},H7aB:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i("SAou"),s=i.n(n);e.default={name:"MA5Settings",components:{MGoodsSettings:s.a},props:{group:{type:Object,default:function(){return{items:[]}}}},created:function(){var t=this;this.$nextTick(function(){t.adjustItems()})},data:function(){return{}},computed:{itemChunks:function(){var t=[];return this.group.items.forEach(function(e,i){i%2==0&&t.push([]),t[t.length-1].push(e)}),t},showRemoveBtn:function(){return this.group.items.length>3}},methods:{adjustItems:function(){this.group.items instanceof Array?this.group.items.length<3&&this.fillItems(3-this.group.items.length):(this.group.items=[],this.fillItems(3))},fillItems:function(t){for(var e=0;e<t;e++)this.group.items.push({name:null,description:null,route:null,ratio:1,image:null})}}}},Mnk3:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("Card",[i("p",{attrs:{slot:"title"},slot:"title"},[t._v("上新商品")]),t._v(" "),i("Form",{ref:t.formRef,attrs:{model:t.item,rules:t.validateRules,"label-width":80}},[i("Form-item",{attrs:{label:"卡片标题",prop:"name"}},[i("Input",{staticClass:"fixed-width-input",attrs:{placeholder:"请输入卡片标题"},model:{value:t.item.name,callback:function(e){t.$set(t.item,"name",e)},expression:"item.name"}}),t._v(" "),i("span",{staticClass:"input-tips"},[t._v("最多不超过15个字符，不可有特殊字符")])],1),t._v(" "),i("Form-item",{attrs:{label:"Goods_ID",prop:"extra"}},[i("Input",{staticClass:"fixed-width-input",attrs:{type:"textarea",rows:5,placeholder:"请输入Goods_ID"},model:{value:t.item.extra,callback:function(e){t.$set(t.item,"extra",e)},expression:"item.extra"}}),t._v(" "),i("span",{staticClass:"input-tips"},[t._v("按展示顺序依次填写，英文逗号隔开")])],1)],1)],1)},staticRenderFns:[]}},"N/3k":function(t,e,i){var n=i("w1jS");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);i("rjj0")("86f1f096",n,!0)},OmPj:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i("xqq3"),s=i.n(n),r=i("6IZu"),o=i.n(r),a=i("tMYM"),u=i.n(a),p=i("eVmo"),l=i.n(p),c=i("j6r2"),d=i.n(c);e.default={name:"MGoodsGroupSettings",components:{MA1Settings:s.a,MA2Settings:o.a,MA3Settings:u.a,MA4Settings:l.a,MA5Settings:d.a},props:{index:{type:Number,default:0},group:{type:Object,default:function(){return{}}},groups:{type:Array,default:function(){return[]}}},data:function(){return{goodsGroupOptions:[{label:"A1商品组",value:"A1"},{label:"A2商品组",value:"A2"},{label:"A3商品组",value:"A3"},{label:"A4商品组",value:"A4"},{label:"A5商品组",value:"A5"}]}},methods:{addGroup:function(){this.groups.splice(this.index+1,0,{type:"A1",ratio:1,items:[{name:null,description:null,route:null,ratio:1,image:null}]})},removeGroup:function(){var t=this;this.$Modal.confirm({width:250,content:"确认删除？",onOk:function(){t.groups.splice(t.index,1)}})},moveGroup:function(t,e){if(e>=0&&e<this.groups.length){var i=this.groups[t];this.groups.splice(t,1,this.groups[e]),this.groups.splice(e,1,i)}}}}},"PQ/0":function(t,e,i){e=t.exports=i(0)(),e.push([t.i,".ivu-row[data-v-78724141]:not(:last-child){margin-bottom:20px}",""])},RSyd:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i("CgHF"),s=i.n(n);e.default={name:"MNewBrandForeshowSettings",components:{MBrandItemSettings:s.a},props:{group:{type:Object,default:function(){return{}}},basicBrandOptions:{type:Array,default:function(){return[]}}},data:function(){return{formRef:"newBrandForm",validateRules:{name:[{required:!0,message:"页面标题不能为空",trigger:"blur"},{type:"string",max:15,message:"卡片标题不能多于15个字符",trigger:"blur"}]}}},computed:{itemChunks:function(){var t=[];return this.group.items.forEach(function(e,i){i%2==0&&t.push([]),t[t.length-1].push(e)}),t}},created:function(){var t=this;this.$nextTick(function(){bus.$on("on-submit",function(){t.$refs[t.formRef]&&t.$refs[t.formRef].validate(function(t){t||(bus.$emit("prevent-submit"),bus.$emit("alert-error-tips","有必填项没填写或填写项不合规，请完善。",350))})})})}}},SAou:function(t,e,i){i("qJG/");var n=i("VU/8")(i("a0fu"),i("DGnU"),"data-v-4b346a46",null);t.exports=n.exports},Tqni:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i("n57U"),s=i.n(n),r=i("3qms"),o=i.n(r),a=i("j0h5"),u=i.n(a),p=i("hCBn"),l=i.n(p),c=i("YYl5"),d=i.n(c);e.default={name:"Add",components:{MGoodsGroupSettings:d.a,MBaseSettings:s.a,MNewGoodsSettings:o.a,MNewBrandSettings:u.a,MNewBrandForeshowSettings:l.a},data:function(){return{advertising:{module:"popular_goods",page:"list",position:"goods",state:1,status:3,name:"",audience:"TAG|UNION|paul_test",start_time:null,end_time:null,groups:[{type:"newest_goods",items:[{name:"",extra:""}]}]},audienceOptions:[],basicBrandOptions:[],currentBrandOptions:[],basicBrandListApi:{api:{path:"/boss/mall/catalog/basic-brand/list",params:{fields:"{id,name}",limit:9999999,offset:0,status:1}}},loadTotal:2,loadedNum:0,canSubmit:!0,submitApi:{api:{path:"/boss/mall/advertising/often-buy/create"}}}},watch:{loadedNum:function(){this.loadedNum>=this.loadTotal&&(bus.$emit("on-loading"),this.loadedNum=0)},"advertising.position":function(t){switch(this.advertising.groups.splice(0,this.advertising.groups.length),t){case"goods":this.advertising.groups.splice(0,1,{type:"newest_goods",items:[{name:null,extra:null}]});break;case"service":this.advertising.groups.splice(0,1,{type:"A1",ratio:1,items:[{name:null,description:null,route:null,ratio:1,image:null}]});break;case"brand":this.advertising.groups.push({type:"brand_conference",state:!1,name:"",items:[{extra:"",route:""}]}),this.advertising.groups.push({type:"brand_conference_tip",state:!1,name:"",items:[{extra:"",route:"",start_time:null}]})}}},created:function(){var t=this;this.$nextTick(function(){bus.$emit("on-loading"),t.loadAudienceOptions(),t.loadBasicBrandOptions(),bus.$on("alert-error-tips",function(e,i){return t.alertErrorTips(e,i)}),bus.$on("prevent-submit",function(){t.canSubmit=!1}),bus.$on("reset-submit",function(){t.canSubmit=!0}),bus.$on("do-submit",function(){t.canSubmit&&t.throughValidate()}),bus.$on("adjust-brand-options",function(){t.adjustBrandOptions()})})},methods:{alertErrorTips:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:250;this.$Modal.error({width:e,content:t})},loadAudienceOptions:function(){var t=this;this.$Util.api.get({api:{path:"/boss/mall/advertising/home/tag-group-info",params:{fields:"{audience,title}"}}},this).then(function(e){t.loadedNum+=1,e.data.unshift({audience:"no_tag",title:"不限"}),t.audienceOptions=e.data},function(e){t.loadedNum+=1,t.alertErrorTips(e.message?e.message:"发生了未知的错误",300)})},loadBasicBrandOptions:function(){var t=this;this.$Util.api.get(this.basicBrandListApi,this).then(function(e){t.loadedNum+=1,t.basicBrandOptions=e.data,t.adjustBrandOptions()},function(e){t.loadedNum+=1,t.alertErrorTips(e.message?e.message:"发生了未知的错误",300)})},adjustBrandOptions:function(){var t=this;this.currentBrandOptions.splice(0,this.currentBrandOptions.length),this.basicBrandOptions.forEach(function(e){var i=t.advertising.groups.findIndex(function(t){return-1!==t.items.findIndex(function(t){return e.id===t.extra})});e.disabled=-1!==i,t.currentBrandOptions.push(e)})},throughValidate:function(){var t=this.advertising.groups;return-1!==t.findIndex(function(t){return"A1"===t.type&&t.items.length>1})?(this.alertErrorTips("A1商品组最多只有1个商品项，请修正",300),!1):-1!==t.findIndex(function(t){return"A2"===t.type&&t.items.length>2})?(this.alertErrorTips("A2商品组最多只有2个商品项，请修正",300),!1):-1!==t.findIndex(function(t){return"A3"===t.type&&t.items.length>3})?(this.alertErrorTips("A3商品组最多只有3个商品项，请修正",300),!1):-1!==t.findIndex(function(t){return"A4"===t.type&&t.items.length>4})?(this.alertErrorTips("A4商品组最多只有4个商品项，请修正",300),!1):-1!==t.findIndex(function(t){return"A5"===t.type&&t.items.length>3})?(this.alertErrorTips("A5商品组最多只有3个商品项，请修正",300),!1):void this.doSubmit()},doSubmit:function(){var t={},e=this.advertising.groups;t.module=this.advertising.module,t.page=this.advertising.page,t.position=this.advertising.position,t.name=this.advertising.name,t.audience="no_tag"===this.advertising.audience?"":this.advertising.audience,t.start_time=Math.round(this.advertising.start_time.getTime()/1e3),t.end_time=Math.round(this.advertising.end_time.getTime()/1e3),t.groups=[];for(var i=0;i<e.length;i++)if(t.groups.splice(i,1,{type:e[i].type}),"goods"===t.position){t.groups[i].items=[];for(var n=0;n<e[i].items.length;n++)t.groups[i].items.splice(n,1,{name:e[i].items[n].name,extra:e[i].items[n].extra.split(",")})}else if("brand"===t.position){t.groups[i].state=e[i].state?1:0,t.groups[i].name=e[i].name?e[i].name:"",t.groups[i].items=[];for(var s=0;s<e[i].items.length;s++){var r={};e[i].items[s].route&&(r.route=e[i].items[s].route),e[i].items[s].extra&&(r.extra=e[i].items[s].extra),e[i].items[s].start_time&&e[i].items[s].start_time instanceof Date&&(r.start_time=Math.round(e[i].items[s].start_time.getTime()/1e3)),t.groups[i].items.splice(s,1,r)}}else if("service"===t.position){t.groups[i].type=e[i].type,t.groups[i].ratio=e[i].ratio,"A1"===e[i].type&&(e[i].color&&(t.groups[i].color=e[i].color),e[i].start_time&&e[i].start_time instanceof Date?t.groups[i].start_time=Math.round(e[i].start_time.getTime()/1e3):!e[i].start_time||e[i].start_time instanceof Date||(t.groups[i].start_time=Math.round(new Date(e[i].start_time).getTime()/1e3)),e[i].end_time&&e[i].end_time instanceof Date?t.groups[i].end_time=Math.round(e[i].end_time.getTime()/1e3):!e[i].end_time||e[i].end_time instanceof Date||(t.groups[i].end_time=Math.round(new Date(e[i].end_time).getTime()/1e3))),t.groups[i].items=[];for(var o=0;o<e[i].items.length;o++)t.groups[i].items.splice(o,1,{name:e[i].items[o].name,route:e[i].items[o].route?e[i].items[o].route:"",ratio:e[i].items[o].ratio,image:e[i].items[o].image,description:e[i].items[o].description?e[i].items[o].description:""})}bus.$emit("on-loading");var a=this;this.$Util.api.post(this.submitApi,t,a).then(function(t){bus.$emit("on-loading"),0===t.error_code?a.$Modal.success({width:250,content:"提交成功",onOk:function(){location.hash="/mall/advertising/often-buy/edit/"+t.data}}):a.alertErrorTips(t.error_description?t.error_description:"提交失败",300)},function(t){bus.$emit("on-loading"),a.alertErrorTips(t.message?t.message:"提交失败",300)})}},beforeDestroy:function(){bus.$off("alert-error-tips"),bus.$off("prevent-submit"),bus.$off("reset-submit"),bus.$off("do-submit"),bus.$off("on-submit")}}},WSux:function(t,e,i){var n=i("GD/Z");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);i("rjj0")("3ecc82bd",n,!0)},XB1s:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"MBrandItemSettings",props:{position:{type:Number,default:0},group:{type:Object,default:function(){return{}}},item:{type:Object,default:function(){return{}}},publishTime:{type:Boolean,default:!1},basicBrandOptions:{type:Array,default:function(){return[]}}},data:function(){return{dateOptions:{disabledDate:function(t){return t&&t.valueOf()<Date.now()}},formRef:"brandItemForm",validateRules:{extra:[{required:!0,type:"number",message:"品牌不能为空",trigger:"change"}],start_time:[{type:"date",required:!0,message:"上新日期不能为空",trigger:"change"}],route:[{required:!0,message:"路由不能为空",trigger:"change"},{type:"string",max:1e3,message:"路由不能多于1000个字符",trigger:"change"}]}}},created:function(){var t=this;this.$nextTick(function(){bus.$on("on-submit",function(){t.$refs[t.formRef]&&t.$refs[t.formRef].validate(function(t){t||(bus.$emit("prevent-submit"),bus.$emit("alert-error-tips","有必填项没填写或填写项不合规，请完善。",350))})}),t.item.extra&&(t.item.extra=parseInt(t.item.extra)),!t.item.start_time||t.item.start_time instanceof Date||(t.item.start_time=new Date(1e3*t.item.start_time)),t.currentOptions=JSON.parse(JSON.stringify(t.basicBrandOptions))})},methods:{addItem:function(t){this.group.items.splice(t+1,0,{route:"",extra:""})},removeItem:function(t){var e=this;this.$Modal.confirm({width:250,content:"确认删除？",onOk:function(){e.group.items.splice(t,1),bus.$emit("adjust-brand-options")}})},handleSelectRoute:function(t){this.item.route=t}},watch:{"item.extra":function(t,e){e!=t&&bus.$emit("adjust-brand-options")}}}},XaJz:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i("CgHF"),s=i.n(n);e.default={name:"MNewBrandSettings",components:{MBrandItemSettings:s.a},props:{group:{type:Object,default:function(){return{}}},basicBrandOptions:{type:Array,default:function(){return[]}}},data:function(){return{formRef:"newBrandForm",validateRules:{name:[{required:!0,message:"页面标题不能为空",trigger:"blur"},{type:"string",max:15,message:"卡片标题不能多于15个字符",trigger:"blur"}]}}},computed:{itemChunks:function(){var t=[];return this.group.items.forEach(function(e,i){i%2==0&&t.push([]),t[t.length-1].push(e)}),t}},created:function(){var t=this;this.$nextTick(function(){bus.$on("on-submit",function(){t.$refs[t.formRef]&&t.$refs[t.formRef].validate(function(t){t||(bus.$emit("prevent-submit"),bus.$emit("alert-error-tips","有必填项没填写或填写项不合规，请完善。",350))})})})}}},YYl5:function(t,e,i){i("zwgw");var n=i("VU/8")(i("OmPj"),i("8Ysy"),"data-v-3f41aad8",null);t.exports=n.exports},a0fu:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"MGoodsSettings",props:{goodsSettingsCardClass:{type:String,default:"goods-settings-card"},position:{type:Number,default:0},group:{type:Object,default:function(){return{items:[]}}},item:{type:Object,default:function(){return{}}},showRemoveBtn:{type:Boolean,default:!1}},data:function(){return{formRef:"goodsForm",validateRules:{name:[{required:!0,message:"标题不能为空",trigger:"blur"},{type:"string",max:50,message:"标题不能多于50个字符",trigger:"blur"}],description:[{type:"string",max:100,message:"描述不能多于100个字符",trigger:"blur"}],route:[{type:"string",max:1e3,message:"路由不能多于100个字符",trigger:"change"}],image:[{required:!0,message:"图片不能为空",trigger:"change"},{type:"string",max:100,message:"图片路径不能多于100个字符",trigger:"change"}]}}},created:function(){var t=this;this.$nextTick(function(){bus.$on("on-submit",function(){t.$refs[t.formRef]&&t.$refs[t.formRef].validate(function(t){t||(bus.$emit("prevent-submit"),bus.$emit("alert-error-tips","有必填项没填写或填写项不合规，请完善。",350))})}),t.item.image&&t.item.image.origin&&(t.item.image=t.item.image.origin)})},methods:{handleSelectRoute:function(t){this.item.route=t},handleUploadSuccess:function(t){this.item.ratio=(t[0].width/t[0].height).toFixed(4),this.item.image=t[0].url,0===this.position&&(this.group.ratio=(750/t[0].height).toFixed(4))},moveItem:function(t,e){if(e>=0&&e<this.group.items.length){var i=this.group.items[t];this.group.items.splice(t,1,this.group.items[e]),this.group.items.splice(e,1,i)}},removeItem:function(t){var e=this;this.$Modal.confirm({width:250,content:"确认删除？",onOk:function(){e.group.items.splice(t,1)}})}}}},bAeb:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("m-page",[i("m-base-settings",{attrs:{advertising:t.advertising,audienceOptions:t.audienceOptions},on:{"update:advertising":function(e){t.advertising=e}}}),t._v(" "),"goods"===t.advertising.position?i("m-new-goods-settings",{attrs:{item:t.advertising.groups[0].items[0]},on:{"update:item":function(e){t.$set(t.advertising.groups[0].items,0,e)}}}):t._e(),t._v(" "),"brand"===t.advertising.position?i("m-new-brand-settings",{attrs:{basicBrandOptions:t.currentBrandOptions,group:t.advertising.groups[0]},on:{"update:group":function(e){t.$set(t.advertising.groups,0,e)}}}):t._e(),t._v(" "),"brand"===t.advertising.position?i("m-new-brand-foreshow-settings",{attrs:{basicBrandOptions:t.currentBrandOptions,group:t.advertising.groups[1]},on:{"update:group":function(e){t.$set(t.advertising.groups,1,e)}}}):t._e(),t._v(" "),t._l(t.advertising.groups,function(e,n){return"service"===t.advertising.position?[i("m-goods-group-settings",{attrs:{index:n,group:e,groups:t.advertising.groups},on:{"update:group":function(t){e=t},"update:groups":function(e){t.$set(t.advertising,"groups",e)}}})]:t._e()}),t._v(" "),i("Back-top",{attrs:{bottom:100,right:30}},[i("div",{staticClass:"top"},[t._v("返回顶端")])])],2)},staticRenderFns:[]}},e5zA:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",t._l(t.itemChunks,function(e,n){return i("Row",t._l(e,function(e,s){return i("Col",{attrs:{span:"8",offset:s?2:0}},[i("m-goods-settings",{attrs:{position:2*n+s,showRemoveBtn:t.showRemoveBtn,group:t.group,item:t.group.items[2*n+s]},on:{"update:group":function(e){t.group=e},"update:item":function(e){t.$set(t.group.items,2*n+s,e)}}})],1)}))}))},staticRenderFns:[]}},eVmo:function(t,e,i){i("fZlR");var n=i("VU/8")(i("xYqM"),i("e5zA"),"data-v-78724141",null);t.exports=n.exports},elSY:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",t._l(t.itemChunks,function(e,n){return i("Row",t._l(e,function(e,s){return i("Col",{attrs:{span:"8",offset:s?2:0}},[i("m-goods-settings",{attrs:{"goods-settings-card-class":0===n&&0===s?"A5-first":"goods-settings-card",showRemoveBtn:t.showRemoveBtn,position:2*n+s,group:t.group,item:t.group.items[2*n+s]},on:{"update:group":function(e){t.group=e},"update:item":function(e){t.$set(t.group.items,2*n+s,e)}}})],1)}))}))},staticRenderFns:[]}},fZlR:function(t,e,i){var n=i("PQ/0");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);i("rjj0")("6b675538",n,!0)},"gE+5":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i("SAou"),s=i.n(n);e.default={name:"MA3Settings",components:{MGoodsSettings:s.a},props:{group:{type:Object,default:function(){return{items:[]}}}},created:function(){var t=this;this.$nextTick(function(){t.adjustItems()})},data:function(){return{}},computed:{itemChunks:function(){var t=[];return this.group.items.forEach(function(e,i){i%2==0&&t.push([]),t[t.length-1].push(e)}),t},showRemoveBtn:function(){return this.group.items.length>3}},methods:{adjustItems:function(){this.group.items instanceof Array?this.group.items.length<3&&this.fillItems(3-this.group.items.length):(this.group.items=[],this.fillItems(3))},fillItems:function(t){for(var e=0;e<t;e++)this.group.items.push({name:null,description:null,route:null,ratio:1,image:null})}}}},gRQj:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i("SAou"),s=i.n(n);e.default={name:"MA1Settings",components:{MGoodsSettings:s.a},props:{group:{type:Object,default:function(){return{start_time:null,end_time:null,items:[]}}}},data:function(){var t=this;return{formRef:"A1Form",validateRules:{start_time:[{validator:function(e,i,n){""===i||i instanceof Date?i instanceof Date&&!(t.group.end_time instanceof Date)?n(new Error("如果设置了开始时间，则结束时间必须设置")):n():n(new Error("倒计时开始时间格式不正确"))},trigger:"change"}],end_time:[{validator:function(e,i,n){""===i||i instanceof Date?i instanceof Date&&!(t.group.start_time instanceof Date)?n(new Error("如果设置了结束时间，则开始时间必须设置")):i instanceof Date&&i<=t.group.start_time?n(new Error("倒计时结束时间不能小于倒计时开始时间")):n():n(new Error("倒计时结束时间格式不正确"))},trigger:"change"}],color:[{validator:function(t,e,i){e&&!/^[0-9a-fA-F]{3,6}$/.test(e)?i(new Error("倒计时背景色必须为十六进制颜色值")):i()},trigger:"blur"}]}}},computed:{itemChunks:function(){var t=[];return this.group.items.forEach(function(e,i){i%2==0&&t.push([]),t[t.length-1].push(e)}),t},showRemoveBtn:function(){return this.group.items.length>1}},created:function(){var t=this;this.$nextTick(function(){bus.$on("on-submit",function(){t.$refs[t.formRef]&&t.$refs[t.formRef].validate(function(t){t||(bus.$emit("prevent-submit"),bus.$emit("alert-error-tips","有必填项没填写或填写项不合规，请完善。",350))})}),!t.group.start_time||t.group.start_time instanceof Date||(t.group.start_time=new Date(1e3*t.group.start_time)),!t.group.end_time||t.group.end_time instanceof Date||(t.group.end_time=new Date(1e3*t.group.end_time))})}}},gsdg:function(t,e,i){var n=i("vUf9");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);i("rjj0")("d9052356",n,!0)},hCBn:function(t,e,i){i("N/3k");var n=i("VU/8")(i("RSyd"),i("zFLK"),"data-v-c4e45630",null);t.exports=n.exports},iG6T:function(t,e,i){var n=i("p2qv");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);i("rjj0")("45eca5fd",n,!0)},j0h5:function(t,e,i){i("WSux");var n=i("VU/8")(i("XaJz"),i("+lPT"),"data-v-c050d5fc",null);t.exports=n.exports},j6r2:function(t,e,i){i("nJb9");var n=i("VU/8")(i("H7aB"),i("elSY"),"data-v-5a500ae0",null);t.exports=n.exports},jJiO:function(t,e,i){i("iG6T");var n=i("VU/8")(i("Tqni"),i("bAeb"),"data-v-e6c93e18",null);t.exports=n.exports},lhlq:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("Card",[i("p",{attrs:{slot:"title"},slot:"title"},[t._v("基本信息")]),t._v(" "),i("Button",{attrs:{slot:"extra",type:"primary"},on:{click:t.submit},slot:"extra"},[t._v("提交")]),t._v(" "),i("div",[i("Form",{ref:t.formRef,attrs:{model:t.advertising,rules:t.validateRules,"label-width":80}},[i("Form-item",{attrs:{label:"ID"}},[i("span",[t._v(t._s(t.advertising.id))])]),t._v(" "),i("Form-item",{attrs:{label:"状态"}},[i("span",[t._v(t._s(t._f("stateText")(t.advertising.status)))])]),t._v(" "),i("Form-item",{attrs:{label:"标题",prop:"name"}},[i("Input",{attrs:{placeholder:"请输入标题"},model:{value:t.advertising.name,callback:function(e){t.$set(t.advertising,"name",e)},expression:"advertising.name"}})],1),t._v(" "),i("Form-item",{attrs:{label:"类型",prop:"position"}},[i("Select",{attrs:{filterable:"",placeholder:"请选择类型"},model:{value:t.advertising.position,callback:function(e){t.$set(t.advertising,"position",e)},expression:"advertising.position"}},t._l(t.positionOptions,function(e){return i("Option",{attrs:{value:e.value}},[t._v(t._s(e.label))])}))],1),t._v(" "),i("Form-item",{attrs:{label:"展示人群",prop:"audience"}},[i("Select",{attrs:{filterable:"",placeholder:"请选择展示人群"},model:{value:t.advertising.audience,callback:function(e){t.$set(t.advertising,"audience",e)},expression:"advertising.audience"}},t._l(t.audienceOptions,function(e){return i("Option",{attrs:{value:e.audience}},[t._v(t._s(e.title))])}))],1),t._v(" "),i("Form-item",{attrs:{label:"开始时间",prop:"start_time"}},[i("Date-picker",{attrs:{type:"datetime",placeholder:"选择开始时间"},model:{value:t.advertising.start_time,callback:function(e){t.$set(t.advertising,"start_time",e)},expression:"advertising.start_time"}})],1),t._v(" "),i("Form-item",{attrs:{label:"结束时间",prop:"end_time"}},[i("Date-picker",{attrs:{type:"datetime",placeholder:"选择结束时间"},model:{value:t.advertising.end_time,callback:function(e){t.$set(t.advertising,"end_time",e)},expression:"advertising.end_time"}})],1)],1)],1)],1)},staticRenderFns:[]}},n57U:function(t,e,i){i("ykh2");var n=i("VU/8")(i("yWvU"),i("lhlq"),"data-v-c6e6977a",null);t.exports=n.exports},nJb9:function(t,e,i){var n=i("6iXg");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);i("rjj0")("35a233f8",n,!0)},p2qv:function(t,e,i){e=t.exports=i(0)(),e.push([t.i,".ivu-card[data-v-e6c93e18]{margin-bottom:15px}.top[data-v-e6c93e18]{padding:10px;background:rgba(0,153,229,.7);color:#fff;text-align:center;border-radius:2px}",""])},pETl:function(t,e,i){e=t.exports=i(0)(),e.push([t.i,".error-ghost-btn[data-v-3f41aad8]{border-color:#ed3f14;color:#ed3f14}.info-ghost-btn[data-v-3f41aad8]{border-color:#2db7f5;color:#2db7f5}.goods-group-type-select[data-v-3f41aad8]{margin-bottom:24px}.fixed-width-select[data-v-3f41aad8]{max-width:150px}.input-tips[data-v-3f41aad8]{margin-left:10px;font-size:12px;color:#9ea7b4}",""])},"qJG/":function(t,e,i){var n=i("6LjD");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);i("rjj0")("c0c22142",n,!0)},"qy+0":function(t,e,i){e=t.exports=i(0)(),e.push([t.i,".ivu-form-item[data-v-5a4e3738]{margin-bottom:24px}.fixed-width-input[data-v-5a4e3738]{display:inline-block;width:280px}.input-tips[data-v-5a4e3738]{margin-left:10px;font-size:12px;color:#9ea7b4}",""])},rmqP:function(t,e,i){var n=i("qy+0");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);i("rjj0")("8ce90bde",n,!0)},tKEN:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("Card",[i("p",{attrs:{slot:"title"},slot:"title"},[t._v("\n        "+t._s(t.position+1)+"\n        "),i("span",{staticClass:"input-tips"},[t._v("按展示顺序依次填写")])]),t._v(" "),i("section",{attrs:{slot:"extra"},slot:"extra"},[i("Button",{attrs:{type:"primary"},on:{click:function(e){t.addItem(t.position)}}},[t._v("添加")]),t._v(" "),t.group.items.length>1?i("Button",{staticClass:"error-ghost-btn",attrs:{type:"ghost"},on:{click:function(e){t.removeItem(t.position)}}},[t._v("\n            删除\n        ")]):t._e()],1),t._v(" "),i("Form",{ref:t.formRef,attrs:{model:t.item,rules:t.validateRules,"label-width":80}},[i("Form-item",{attrs:{label:"品牌",prop:"extra"}},[i("Select",{staticClass:"fixed-width-input",attrs:{filterable:"",placeholder:"请选择品牌"},model:{value:t.item.extra,callback:function(e){t.$set(t.item,"extra",e)},expression:"item.extra"}},t._l(t.basicBrandOptions,function(e){return i("Option",{attrs:{value:e.id,disabled:!0===e.disabled}},[t._v(t._s(e.name))])}))],1),t._v(" "),t.publishTime?i("Form-item",{attrs:{label:"上新日期",prop:"start_time"}},[i("Date-picker",{staticClass:"fixed-width-input",attrs:{type:"date",options:t.dateOptions,placeholder:"选择上新日期"},model:{value:t.item.start_time,callback:function(e){t.$set(t.item,"start_time",e)},expression:"item.start_time"}})],1):t._e(),t._v(" "),i("Form-item",{attrs:{label:"路由",prop:"route"}},[i("m-app-route",{staticClass:"fixed-width-input",attrs:{"default-route":t.item.route},on:{"on-ok":t.handleSelectRoute}})],1)],1)],1)},staticRenderFns:[]}},tMYM:function(t,e,i){i("0qgq");var n=i("VU/8")(i("gE+5"),i("/kNZ"),"data-v-d2d710bc",null);t.exports=n.exports},vUf9:function(t,e,i){e=t.exports=i(0)(),e.push([t.i,".ivu-row[data-v-9692a3fa]:not(:last-child){margin-bottom:20px}",""])},vWaV:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("Form",{ref:t.formRef,attrs:{model:t.group,rules:t.validateRules,"label-width":100}},[i("Form-item",{attrs:{label:"倒计时开始时间",prop:"start_time"}},[i("Date-picker",{staticClass:"fixed-width-input",attrs:{type:"datetime",placeholder:"选择开始时间"},model:{value:t.group.start_time,callback:function(e){t.$set(t.group,"start_time",e)},expression:"group.start_time"}}),t._v(" "),i("span",{staticClass:"input-tips"},[t._v("开始时间前，展示“距离开始还有...”")])],1),t._v(" "),i("Form-item",{attrs:{label:"倒计时结束时间",prop:"end_time"}},[i("Date-picker",{staticClass:"fixed-width-input",attrs:{type:"datetime",placeholder:"选择结束时间"},model:{value:t.group.end_time,callback:function(e){t.$set(t.group,"end_time",e)},expression:"group.end_time"}}),t._v(" "),i("span",{staticClass:"input-tips"},[t._v("开始时间后，结束时间前，展示“距离结束还有...”")])],1),t._v(" "),i("Form-item",{attrs:{label:"倒计时背景色",prop:"color"}},[i("Input",{staticClass:"fixed-width-input",attrs:{placeholder:"请填写十六进制颜色码"},model:{value:t.group.color,callback:function(e){t.$set(t.group,"color",e)},expression:"group.color"}}),t._v(" "),i("span",{staticClass:"input-tips"},[t._v("请填写十六进制颜色码")])],1),t._v(" "),t._l(t.itemChunks,function(e,n){return i("Row",t._l(e,function(e,s){return i("Col",{attrs:{span:"8",offset:s?2:0}},[i("m-goods-settings",{attrs:{position:2*n+s,showRemoveBtn:t.showRemoveBtn,group:t.group,item:t.group.items[2*n+s]},on:{"update:group":function(e){t.group=e},"update:item":function(e){t.$set(t.group.items,2*n+s,e)}}})],1)}))})],2)},staticRenderFns:[]}},w1jS:function(t,e,i){e=t.exports=i(0)(),e.push([t.i,".card-title[data-v-c4e45630]{line-height:20px;font-size:14px;color:#1c2438;font-weight:700;margin-right:10px}.fixed-width-input[data-v-c4e45630]{display:inline-block;width:300px}.ivu-form-item[data-v-c4e45630]{margin-bottom:24px}.input-tips[data-v-c4e45630]{margin-left:10px;font-size:12px;color:#9ea7b4}.ivu-row[data-v-c4e45630]:not(:last-child){margin-bottom:20px}",""])},xYqM:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i("SAou"),s=i.n(n);e.default={name:"MA4Settings",components:{MGoodsSettings:s.a},props:{group:{type:Object,default:function(){return{items:[]}}}},created:function(){var t=this;this.$nextTick(function(){t.adjustItems()})},data:function(){return{}},computed:{itemChunks:function(){var t=[];return this.group.items.forEach(function(e,i){i%2==0&&t.push([]),t[t.length-1].push(e)}),t},showRemoveBtn:function(){return this.group.items.length>4}},methods:{adjustItems:function(){this.group.items instanceof Array?this.group.items.length<4&&this.fillItems(4-this.group.items.length):(this.group.items=[],this.fillItems(4))},fillItems:function(t){for(var e=0;e<t;e++)this.group.items.push({name:null,description:null,route:null,ratio:1,image:null})}}}},xqq3:function(t,e,i){i("rmqP");var n=i("VU/8")(i("gRQj"),i("vWaV"),"data-v-5a4e3738",null);t.exports=n.exports},yJfK:function(t,e,i){e=t.exports=i(0)(),e.push([t.i,".ivu-form-item[data-v-c6e6977a]{width:380px}.ivu-form-item-required[data-v-c6e6977a]:not(:last-child){margin-bottom:24px}",""])},yWvU:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"MBaseSettings",props:{advertising:{type:Object,default:function(){return{}}},audienceOptions:{type:Array,default:function(){return[]}}},data:function(){var t=this;return{positionOptions:[{label:"商品",value:"goods"},{label:"品牌",value:"brand"},{label:"服务",value:"service"}],formRef:"baseForm",validateRules:{name:[{required:!0,message:"页面标题不能为空",trigger:"blur"},{type:"string",max:50,message:"页面标题不能多于50个字符",trigger:"blur"}],position:[{required:!0,message:"类型不能为空",trigger:"change"}],audience:[{required:!0,message:"展示人群不能为空",trigger:"change"}],start_time:[{type:"date",required:!0,message:"开始时间不能为空",trigger:"change"}],end_time:[{type:"date",required:!0,message:"结束时间不能为空",trigger:"change"},{validator:function(e,i,n){i?t.advertising.end_time<=t.advertising.start_time?n(new Error("结束时间不能小于开始时间")):n():n(new Error("结束时间不能为空"))},trigger:"change"}]}}},filters:{stateText:function(t){switch(t){case 0:return"已作废";case 1:return"已发布";case 2:return"已下线";case 3:return"待发布";default:return""}}},created:function(){var t=this;this.$nextTick(function(){bus.$on("on-submit",function(){t.$refs[t.formRef]&&t.$refs[t.formRef].validate(function(t){t||(bus.$emit("prevent-submit"),bus.$emit("alert-error-tips","有必填项没填写或填写项不合规，请完善。",350))})})})},watch:{"advertising.start_time":function(t){!t||t instanceof Date||(this.advertising.start_time=new Date(1e3*t))},"advertising.end_time":function(t){!t||t instanceof Date||(this.advertising.end_time=new Date(1e3*t))},"advertising.audience":function(t){""===t&&(this.advertising.audience="no_tag")}},methods:{submit:function(){bus.$emit("reset-submit"),bus.$emit("on-submit"),setTimeout(function(){bus.$emit("do-submit")},300)}}}},ykh2:function(t,e,i){var n=i("yJfK");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);i("rjj0")("e51ca568",n,!0)},zFLK:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("Card",[i("section",{attrs:{slot:"title"},slot:"title"},[i("span",{staticClass:"card-title"},[t._v("上新品牌预告")]),t._v(" "),i("i-switch",{model:{value:t.group.state,callback:function(e){t.$set(t.group,"state",e)},expression:"group.state"}})],1),t._v(" "),t.group.state?i("section",[i("Form",{ref:t.formRef,attrs:{model:t.group,rules:t.validateRules,"label-width":80}},[i("Form-item",{attrs:{label:"卡片标题",prop:"name"}},[i("Input",{staticClass:"fixed-width-input",attrs:{placeholder:"请输入卡片标题"},model:{value:t.group.name,callback:function(e){t.$set(t.group,"name",e)},expression:"group.name"}}),t._v(" "),i("span",{staticClass:"input-tips"},[t._v("最多不超过15个字符，不可有特殊字符")])],1)],1),t._v(" "),t._l(t.itemChunks,function(e,n){return i("Row",t._l(e,function(e,s){return i("Col",{attrs:{span:"9",offset:s?2:0}},[i("m-brand-item-settings",{attrs:{publishTime:!0,position:2*n+s,group:t.group,basicBrandOptions:t.basicBrandOptions,item:t.group.items[2*n+s]},on:{"update:group":function(e){t.group=e},"update:item":function(e){t.$set(t.group.items,2*n+s,e)}}})],1)}))})],2):t._e()])},staticRenderFns:[]}},zwgw:function(t,e,i){var n=i("pETl");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);i("rjj0")("f01572ce",n,!0)}});