webpackJsonp([5],{"+EKv":function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=s("IrM8"),i=s.n(o);e.default={name:"MA3Settings",components:{MGoodsSettings:i.a},props:{group:{type:Object,default:function(){return{items:[]}}}},watch:{group:function(){this.adjustItems()}},created:function(){var t=this;this.$nextTick(function(){t.adjustItems()})},data:function(){return{}},computed:{itemChunks:function(){var t=[];return this.group.items.forEach(function(e,s){s%2==0&&t.push([]),t[t.length-1].push(e)}),t},showRemoveBtn:function(){return this.group.items.length>3}},methods:{adjustItems:function(){this.group.items instanceof Array?this.group.items.length>3?this.group.items.splice(3):this.group.items.length<3&&this.fillItems(3-this.group.items.length):(this.group.items=[],this.fillItems(2))},fillItems:function(t){for(var e=0;e<t;e++)this.group.items.push({image:{origin:null}})}}}},"+tpv":function(t,e,s){var o=s("ZmiH");"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);s("rjj0")("413c7f0b",o,!0)},"0L0i":function(t,e,s){s("SF/x");var o=s("VU/8")(s("Iwp/"),s("uLGs"),"data-v-0d949ade",null);t.exports=o.exports},"2uNg":function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"MGoodsSettings",props:{position:{type:Number,default:0},group:{type:Object,default:function(){return{type:null,ratio:1,items:[{}]}}},groupType:{type:String,default:""},item:{type:Object,default:function(){return{id:"",goods_id:"",name:"",description:"",route:"",image:{url:null}}}},showRemoveBtn:{type:Boolean,default:!1}},data:function(){return{ref:"goodsForm",validateRules:{name:[{required:!0,message:"标题不能为空",trigger:"blur"}],image:[{required:!0,message:"图片不能为空",trigger:"blur"}],goods_id:[{required:!0,message:"Goods_ID不能为空",trigger:"blur"}]}}},methods:{handleSelectRoute:function(t){this.item.route=t},handleUploadSuccess:function(t){this.item.ratio=(t[0].width/t[0].height).toFixed(4),this.item.image=t[0].url,0===this.position&&"C1"!==this.group.type&&"C2"!==this.group.type?this.group.ratio=(750/t[0].height).toFixed(4):0===this.position&&"C1"===this.group.type&&(this.group.ratio=(t[0].width/t[0].height).toFixed(4))},moveItem:function(t,e){if(e>=0&&e<this.group.items.length){var s=this.items[t];this.group.items.splice(t,1,this.group.items[e]),this.group.items.splice(e,1,s)}},removeItem:function(t){var e=this;this.$Modal.confirm({width:250,content:"确认删除？",onOk:function(){e.group.items.splice(t,1)}})}},created:function(){var t=this;this.$nextTick(function(){bus.$on("validate",function(){t.$refs[t.ref].validate(function(e){e||(bus.$emit("prevent-submit"),t.$Message.error("表单验证失败!"))})})})},beforeDestroy:function(){bus.$off("validate")}}},"3X29":function(t,e,s){var o=s("PJka");"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);s("rjj0")("352ccbd5",o,!0)},"4MQF":function(t,e,s){var o=s("TQKG");"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);s("rjj0")("b252029a",o,!0)},"4a2l":function(t,e,s){s("NlO7");var o=s("VU/8")(s("MEhY"),s("vUC5"),"data-v-539c55b4",null);t.exports=o.exports},AsFd:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("Card",[s("p",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(t.position+1))]),t._v(" "),s("section",[t.position<t.group.items.length-1?s("Button",{staticClass:"info-ghost-btn",attrs:{type:"ghost"},on:{click:function(e){t.moveItem(t.position,t.position+1)}}},[t._v("\n            后移\n        ")]):t._e(),t._v(" "),t.position>0?s("Button",{staticClass:"info-ghost-btn",attrs:{type:"ghost"},on:{click:function(e){t.moveItem(t.position,t.position-1)}}},[t._v("\n            前移\n        ")]):t._e(),t._v(" "),t.showRemoveBtn?s("Button",{staticClass:"error-ghost-btn",attrs:{type:"ghost"},on:{click:function(e){t.removeItem(t.position)}}},[t._v("删除")]):t._e()],1),t._v(" "),s("Form",{ref:t.ref,attrs:{model:t.item,rules:t.validateRules,"label-width":"C2"===t.groupType?80:50}},[s("Form-item",{attrs:{label:"ID"}},[s("span",[t._v(t._s(t.item.id))])]),t._v(" "),"C2"===t.groupType?s("Form-item",{attrs:{label:"Goods_ID",prop:"goods_id"}},[s("Input",{staticClass:"fixed-width-input",attrs:{placeholder:"请输入Goods_ID"},model:{value:t.item.goods_id,callback:function(e){t.$set(t.item,"goods_id",e)},expression:"item.goods_id"}}),t._v(" "),s("span",{staticClass:"input-tips"},[t._v("弱网环境下展示")])],1):t._e(),t._v(" "),s("Form-item",{attrs:{label:"标题",prop:"name"}},[s("Input",{staticClass:"fixed-width-input",attrs:{placeholder:"请输入标题"},model:{value:t.item.name,callback:function(e){t.$set(t.item,"name",e)},expression:"item.name"}}),t._v(" "),s("span",{staticClass:"input-tips"},[t._v("弱网环境下展示")])],1),t._v(" "),"C2"!==t.groupType?s("Form-item",{attrs:{label:"描述"}},[s("Input",{staticClass:"fixed-width-input",attrs:{placeholder:"请输入描述"},model:{value:t.item.description,callback:function(e){t.$set(t.item,"description",e)},expression:"item.description"}}),t._v(" "),s("span",{staticClass:"input-tips"},[t._v("弱网环境下展示")])],1):t._e(),t._v(" "),s("Form-item",{attrs:{label:"路由"}},[s("m-app-route",{attrs:{placeholder:"输入路由","default-route":t.item.route},on:{"on-ok":t.handleSelectRoute}})],1),t._v(" "),s("Form-item",{attrs:{label:"图片",prop:"image"}},[s("m-upload-image",{attrs:{"default-images":[{url:t.item.image}]},on:{"on-success":t.handleUploadSuccess}}),t._v(" "),t.item.ratio?s("span",{staticClass:"img-ratio-tips"},[t._v("长宽比"+t._s(t.item.ratio))]):t._e()],1)],1)],1)},staticRenderFns:[]}},BDpe:function(t,e,s){s("Kybm");var o=s("VU/8")(s("gRiE"),s("Cu40"),"data-v-357a1f53",null);t.exports=o.exports},BEkt:function(t,e,s){s("o7TE");var o=s("VU/8")(s("+EKv"),s("WUIe"),"data-v-1757e8f2",null);t.exports=o.exports},Cu40:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",t._l(t.itemChunks,function(e,o){return s("Row",t._l(e,function(e,i){return s("Col",{attrs:{span:"8",offset:i?1:0}},[s("m-goods-settings",{attrs:{position:2*o+i,showRemoveBtn:t.showRemoveBtn,group:t.group,item:t.group.items[2*o+i]},on:{"update:group":function(e){t.group=e},"update:item":function(e){t.$set(t.group.items,2*o+i,e)}}})],1)}))}))},staticRenderFns:[]}},DAai:function(t,e,s){s("4MQF");var o=s("VU/8")(s("eC+P"),s("v0JT"),"data-v-07532a36",null);t.exports=o.exports},F60C:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("Select",{staticClass:"select-fixed-width",attrs:{placeholder:"添加组件"},on:{"on-change":t.addComponent},model:{value:t.component,callback:function(e){t.component=e},expression:"component"}},t._l(t.componentOptions,function(e){return s("Option",{attrs:{value:e.value}},[t._v(t._s(e.label))])}))},staticRenderFns:[]}},G9zo:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=s("kHOm"),i=s.n(o),n=s("czeJ"),r=s.n(n),a={create:{api:{path:"/boss/mall/advertising/flash-sales/create"}},update:{api:{path:"/boss/mall/advertising/flash-sales/update"}},find:{api:{path:"/boss/mall/advertising/flash-sales/find",params:{fields:"{id,name,position,extra_rule,groups{id,ratio,type,start_time,end_time,state,color,route,orders,items{id,name,description,route,image{origin},ratio,orders,goods_id,color}}}",id:0}},responseHandle:function(t){for(var e in t.data.groups){for(var s in t.data.groups[e].items)t.data.groups[e].items[s].image=t.data.groups[e].items[s].image.origin,t.data.groups[e].items[s].goods_id=""+t.data.groups[e].items[s].goods_id;t.data.groups[e].start_time=new Date(1e3*t.data.groups[e].start_time),t.data.groups[e].end_time=new Date(1e3*t.data.groups[e].end_time)}return t}}};e.default={name:"MFlashSalesForm",components:{MBaseSettings:i.a,MGoodsGroupSettings:r.a},props:{id:{type:String,default:""},usage:{type:String,default:"edit"}},data:function(){return{can_submit:!0,base_info:{id:"",position:"",name:"",flash_sale_group_id:[]},groups:[{type:null,ratio:null,route:"",items:[{id:"",goods_id:"",name:"",description:"",route:"",image:{url:""}}]}]}},methods:{preventSubmit:function(){this.can_submit=!1},resetSubmit:function(){this.can_submit=!0},submit:function(){if(this.can_submit){bus.$emit("on-loading");var t=this.getRequestParams();this.validateSubmit(t)?this.submitRequest(t):bus.$emit("on-loading")}},validateSubmit:function(t){return"A5"!==t.groups[0].type&&"C2"!==t.groups[0].type||"top"!==t.position?"C2"===t.groups[0].type&&"bottom_1"===t.position?(this.$Message.warning("“闪购列表_底部1”广告位，不可使用滑动商品组广告样式"),!1):"C1"===t.groups[0].type&&"bottom_2"===t.position?(this.$Message.warning("“闪购列表_底部1”广告位，不可使用C1商品组广告样式"),!1):"C2"!==t.groups[0].type||""!=t.groups[0].route||(this.$Message.warning("滑动商品组路由不能为空"),!1):(this.$Message.warning("“闪购列表_顶部”广告位，不可使用A5、滑动商品组广告样式"),!1)},getRequestParams:function(){var t={};return t.id=this.base_info.id,t.name=this.base_info.name,t.position=this.base_info.position,t.flash_sale_group_id=this.base_info.flash_sale_group_id,t.groups=JSON.parse(JSON.stringify(this.groups)),t.module="flash_sales",t.page="list",t.start_time=0,t.end_time=1577836800,t},submitRequest:function(t){var e={};e="edit"===this.usage?a.update:a.create;var s=this;this.$Util.api.post(e,t,s).then(function(t){bus.$emit("on-loading"),this.$Message.success("提交成功!"),location.hash="/mall/advertising/flash-sales/list"},function(t){return bus.$emit("on-loading"),this.$Message.warning(t.error_description),!1})},loadEditFormData:function(t){a.find.api.params.id=t;var e=this;this.$Util.api.get(a.find,this).then(function(t){if(!t.data)return e.$Message.warning("不存在或数据有误"),!1;e.base_info.id=t.data.id,e.base_info.position=t.data.position,e.base_info.name=t.data.name,(t.data.extra_rule?t.data.extra_rule:[]).map(function(t){e.base_info.flash_sale_group_id.push(t+"")}),e.groups=t.data.groups,bus.$emit("on-loading")},function(t){bus.$emit("on-loading"),e.back()})}},created:function(){var t=this;this.$nextTick(function(){if(bus.$on("prevent-submit",function(){t.preventSubmit()}),bus.$on("flash-sales-form-submit",function(){t.submit()}),bus.$on("flash-sales-form-reset-submit",function(){t.resetSubmit()}),"edit"===t.usage){bus.$emit("on-loading");var e=t.id;if(t.base_info.id=e,!parseInt(t.base_info.id))return alert("id格式有误"),!1;t.loadEditFormData(e)}})},beforeDestroy:function(){bus.$off("flash-sales-form-submit"),bus.$off("flash-sales-form-reset-submit")}}},H4mk:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=s("IrM8"),i=s.n(o);e.default={name:"MC2Settings",components:{MGoodsSettings:i.a},props:{group:{type:Object,default:function(){return{id:null,route:"",items:[]}}}},watch:{group:function(){this.adjustItems()}},created:function(){var t=this;this.$nextTick(function(){t.adjustItems()})},data:function(){return{}},computed:{ref:"C2Form",itemChunks:function(){var t=[];return this.group.items.forEach(function(e,s){s%2==0&&t.push([]),t[t.length-1].push(e)}),t},showRemoveBtn:function(){return this.group.items.length>3}},methods:{adjustItems:function(){this.group.items instanceof Array?this.group.items.length<3&&this.fillItems(3-this.group.items.length):(this.group.items=[],this.fillItems(3))},fillItems:function(t){for(var e=0;e<t;e++)this.group.items.push({image:{origin:null}})},handleSelectRoute:function(t){this.group.route=t}}}},IrM8:function(t,e,s){s("3X29");var o=s("VU/8")(s("2uNg"),s("AsFd"),"data-v-b9d89214",null);t.exports=o.exports},"Iwp/":function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=s("IrM8"),i=s.n(o);e.default={name:"MA4Settings",components:{MGoodsSettings:i.a},props:{group:{type:Object,default:function(){return{items:[]}}}},watch:{group:function(){this.adjustItems()}},created:function(){var t=this;this.$nextTick(function(){t.adjustItems()})},data:function(){return{}},computed:{itemChunks:function(){var t=[];return this.group.items.forEach(function(e,s){s%2==0&&t.push([]),t[t.length-1].push(e)}),t},showRemoveBtn:function(){return this.group.items.length>4}},methods:{adjustItems:function(){this.group.items instanceof Array?this.group.items.length>4?this.group.items.splice(4):this.group.items.length<4&&this.fillItems(4-this.group.items.length):(this.group.items=[],this.fillItems(4))},fillItems:function(t){for(var e=0;e<t;e++)this.group.items.push({image:{origin:null}})}}}},JUPI:function(t,e,s){e=t.exports=s(0)(),e.push([t.i,".ivu-form-item-required[data-v-2d9e1856]{margin-bottom:24px}.fixed-width-input[data-v-2d9e1856]{display:inline-block;width:280px}.input-tips[data-v-2d9e1856]{margin-left:10px;font-size:12px;color:#9ea7b4}.ivu-row[data-v-2d9e1856]:not(:last-child){margin-bottom:20px}",""])},Kybm:function(t,e,s){var o=s("fQTJ");"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);s("rjj0")("83922b44",o,!0)},Lloe:function(t,e,s){var o=s("gUu+");"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);s("rjj0")("fdd6845c",o,!0)},MEhY:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=s("IrM8"),i=s.n(o);e.default={name:"MA1Settings",components:{MGoodsSettings:i.a},props:{group:{type:Object,default:function(){return{items:[{}]}}}},watch:{group:function(){this.adjustItems()}},created:function(){var t=this;this.$nextTick(function(){t.adjustItems()})},data:function(){return{validateRules:{}}},methods:{adjustItems:function(){this.group.items instanceof Array?this.group.items.length>1&&this.group.items.splice(1):(this.group.items=[],this.group.items.fill({},0,1))}},computed:{showRemoveBtn:function(){return this.group.items.length>1}}}},NlO7:function(t,e,s){var o=s("QumR");"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);s("rjj0")("df4503d0",o,!0)},NoUU:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("Card",{attrs:{bordered:!1}},[s("p",{attrs:{slot:"title"},slot:"title"},[t._v("基本信息")]),t._v(" "),s("Button",{attrs:{slot:"extra",type:"primary"},on:{click:t.submit},slot:"extra"},[t._v("提交")]),t._v(" "),s("section",[s("Form",{ref:t.ref,attrs:{model:t.base_info,rules:t.validateRules,"label-width":80}},[s("Form-item",{attrs:{label:"ID"}},[s("span",[t._v(t._s(t.base_info.id))])]),t._v(" "),"add"===t.usage?s("Form-item",{attrs:{label:"广告位",prop:"position"}},[s("Select",{staticStyle:{width:"300px"},attrs:{placeholder:"请选择"},model:{value:t.base_info.position,callback:function(e){t.$set(t.base_info,"position",e)},expression:"base_info.position"}},t._l(t.searchPositionInfo,function(e,o){return s("Option",{attrs:{value:o}},[t._v(t._s(e))])}))],1):t._e(),t._v(" "),"edit"===t.usage?s("Form-item",{attrs:{label:"广告位",prop:"position"}},[s("span",[t._v(t._s(t.base_info.position))])]):t._e(),t._v(" "),s("Form-item",{attrs:{label:"广告标题",prop:"name"}},[s("Input",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入广告标题"},model:{value:t.base_info.name,callback:function(e){t.$set(t.base_info,"name",e)},expression:"base_info.name"}})],1),t._v(" "),s("Form-item",{attrs:{label:"闪购场次",prop:"flash_sale_group_id"}},[s("Select",{staticStyle:{width:"300px"},attrs:{multiple:"",placeholder:"请选择"},model:{value:t.base_info.flash_sale_group_id,callback:function(e){t.$set(t.base_info,"flash_sale_group_id",e)},expression:"base_info.flash_sale_group_id"}},t._l(t.searchFlashSaleGroupInfo,function(e,o){return s("Option",{attrs:{value:o}},[t._v(t._s(e))])}))],1)],1)],1)],1)},staticRenderFns:[]}},PJka:function(t,e,s){e=t.exports=s(0)(),e.push([t.i,".A5-first[data-v-b9d89214]{max-width:400px;background-color:#cff}.ivu-form-item[data-v-b9d89214]:not(:first-child):not(:last-child){margin-bottom:24px}.fixed-width-input[data-v-b9d89214]{display:inline-block;width:200px}.input-tips[data-v-b9d89214]{margin-left:10px;font-size:12px;color:#9ea7b4}.info-ghost-btn[data-v-b9d89214]{border-color:#2db7f5;color:#2db7f5}",""])},QumR:function(t,e,s){e=t.exports=s(0)(),e.push([t.i,".more-bottom-space[data-v-539c55b4]{margin-bottom:15px}.ivu-form-item-required[data-v-539c55b4]{margin-bottom:24px}.fixed-width-input[data-v-539c55b4]{display:inline-block;width:280px}.input-tips[data-v-539c55b4]{margin-left:10px;font-size:12px;color:#9ea7b4}",""])},"SF/x":function(t,e,s){var o=s("dALZ");"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);s("rjj0")("396ca559",o,!0)},Sj5b:function(t,e,s){s("s1PX");var o=s("VU/8")(s("H4mk"),s("x+pO"),"data-v-2d9e1856",null);t.exports=o.exports},TQKG:function(t,e,s){e=t.exports=s(0)(),e.push([t.i,".ivu-row[data-v-07532a36]:not(:last-child){margin-bottom:20px}",""])},WUIe:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",t._l(t.itemChunks,function(e,o){return s("Row",t._l(e,function(e,i){return s("Col",{attrs:{span:"8",offset:i?1:0}},[s("m-goods-settings",{attrs:{position:2*o+i,showRemoveBtn:t.showRemoveBtn,group:t.group,item:t.group.items[2*o+i]},on:{"update:group":function(e){t.group=e},"update:item":function(e){t.$set(t.group.items,2*o+i,e)}}})],1)}))}))},staticRenderFns:[]}},X7Zc:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=s("IrM8"),i=s.n(o);e.default={name:"MA5Settings",components:{MGoodsSettings:i.a},props:{group:{type:Object,default:function(){return{items:[]}}}},watch:{group:function(){this.adjustItems()}},created:function(){var t=this;this.$nextTick(function(){t.adjustItems()})},data:function(){return{}},computed:{itemChunks:function(){var t=[];return this.group.items.forEach(function(e,s){s%2==0&&t.push([]),t[t.length-1].push(e)}),t},showRemoveBtn:function(){return this.group.items.length>3}},methods:{adjustItems:function(){this.group.items instanceof Array?this.group.items.length>3?this.group.items.splice(3):this.group.items.length<3&&this.fillItems(3-this.group.items.length):(this.group.items=[],this.fillItems(3))},fillItems:function(t){for(var e=0;e<t;e++)this.group.items.push({image:{origin:null}})}}}},ZmiH:function(t,e,s){e=t.exports=s(0)(),e.push([t.i,".info-text-btn[data-v-128439a4],.input-tips[data-v-128439a4]{font-size:12px;margin-left:10px}.error-ghost-btn[data-v-128439a4]{border-color:#ed3f14;color:#ed3f14}.info-ghost-btn[data-v-128439a4]{border-color:#2db7f5;color:#2db7f5}.goods-group-type-select[data-v-128439a4]{margin-bottom:24px}.fixed-width-select[data-v-128439a4]{max-width:150px}.input-tips[data-v-128439a4]{color:#9ea7b4}",""])},aIII:function(t,e,s){var o=s("VU/8")(s("G9zo"),s("v9/K"),null,null);t.exports=o.exports},btu5:function(t,e,s){s("wAuq");var o=s("VU/8")(s("dkJp"),s("F60C"),"data-v-a509f9b2",null);t.exports=o.exports},c2KB:function(t,e,s){e=t.exports=s(0)(),e.push([t.i,".select-fixed-width[data-v-a509f9b2]{width:100px}",""])},czeJ:function(t,e,s){s("+tpv");var o=s("VU/8")(s("wEmg"),s("i4Le"),"data-v-128439a4",null);t.exports=o.exports},dALZ:function(t,e,s){e=t.exports=s(0)(),e.push([t.i,".ivu-row[data-v-0d949ade]:not(:last-child){margin-bottom:20px}",""])},dPXp:function(t,e,s){s("Lloe");var o=s("VU/8")(s("X7Zc"),s("o1Mn"),"data-v-49d907a0",null);t.exports=o.exports},dkJp:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"MIndexComponentsSelect",props:["index","reservedComponents"],data:function(){return{component:null,twice:!1,componentOptions:[{label:"商品组",value:0,repeatable:!0},{label:"灰色间隔条",value:1,repeatable:!0},{label:"轮播banner",value:2,repeatable:!1},{label:"新客计数器",value:3,repeatable:!0},{label:"分类导航",value:4,repeatable:!1},{label:"闪购",value:5,repeatable:!1},{label:"专题导航",value:6,repeatable:!1},{label:"领券",value:7,repeatable:!0}]}},methods:{addComponent:function(t){if(!this.twice){this.twice=!0;var e=this.componentOptions.find(function(e){return e.value===t});e?!1===e.repeatable&&-1!==this.reservedComponents.indexOf(t)?bus.$emit("alert-error-tips","【"+e.label+"】组件不能重复创建",300):bus.$emit("add-component",t,this.index):bus.$emit("alert-error-tips","所选组件不存在");var s=this;setTimeout(function(){s.component=null},100),setTimeout(function(){s.twice=!1},200)}}}}},"eC+P":function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=s("IrM8"),i=s.n(o);e.default={name:"MC1Settings",components:{MGoodsSettings:i.a},props:{group:{type:Object,default:function(){return{items:[]}}}},watch:{group:function(){this.adjustItems()}},created:function(){var t=this;this.$nextTick(function(){t.adjustItems()})},data:function(){return{}},computed:{itemChunks:function(){var t=[];return this.group.items.forEach(function(e,s){s%2==0&&t.push([]),t[t.length-1].push(e)}),t},showRemoveBtn:function(){return this.group.items.length>1}},methods:{adjustItems:function(){this.group.items instanceof Array?this.group.items.length>5?this.group.items.splice(5):this.group.items.length<5&&this.fillItems(this.group.items.length-1):(this.group.items=[],this.fillItems(1))},fillItems:function(t){for(var e=0;e<t;e++)this.group.items.push({image:{origin:null}})}}}},fQTJ:function(t,e,s){e=t.exports=s(0)(),e.push([t.i,".ivu-row[data-v-357a1f53]:not(:last-child){margin-bottom:20px}",""])},gFJb:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=s("aIII"),i=s.n(o);e.default={name:"app",components:{MFlashSalesForm:i.a},data:function(){return{id:this.$route.params.id}}}},gRiE:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=s("IrM8"),i=s.n(o);e.default={name:"MA2Settings",components:{MGoodsSettings:i.a},props:{group:{type:Object,default:function(){return{items:[{},{}]}}}},watch:{group:function(){this.adjustItems()}},created:function(){var t=this;this.$nextTick(function(){t.adjustItems()})},data:function(){return{}},computed:{itemChunks:function(){var t=[];return this.group.items.forEach(function(e,s){s%2==0&&t.push([]),t[t.length-1].push(e)}),t},showRemoveBtn:function(){return this.group.items.length>2}},methods:{adjustItems:function(){this.group.items instanceof Array?this.group.items.length>2?this.group.items.splice(2):this.group.items.length<2&&this.fillItems(2-this.group.items.length):(this.group.items=[],this.fillItems(2))},fillItems:function(t){for(var e=0;e<t;e++)this.group.items.push({image:{origin:null}})}}}},"gUu+":function(t,e,s){e=t.exports=s(0)(),e.push([t.i,".ivu-row[data-v-49d907a0]:not(:last-child){margin-bottom:20px}",""])},i4Le:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("Card",{attrs:{bordered:!1}},[s("section",[s("div",{staticClass:"goods-group-type-select"},[s("Select",{staticClass:"fixed-width-select",attrs:{filterable:""},model:{value:t.group.type,callback:function(e){t.$set(t.group,"type",e)},expression:"group.type"}},t._l(t.goodsGroupOptions,function(e){return s("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])})),t._v(" "),t.group.ratio&&"C2"!==t.group.type?s("span",{staticClass:"input-tips"},[t._v("长宽比"+t._s(t.group.ratio))]):t._e(),t._v(" "),"C1"===t.group.type&&t.group.items.length<5?s("a",{staticClass:"info-text-btn",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.addFrame(e)}}},[t._v("添加1帧")]):t._e(),t._v(" "),"C2"===t.group.type?s("a",{staticClass:"info-text-btn",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.addGoods(e)}}},[t._v("添加1个单品")]):t._e()],1),t._v(" "),"A1"===t.group.type?s("m-A1-settings",{attrs:{group:t.group},on:{"update:group":function(e){t.group=e}}}):t._e(),t._v(" "),"A2"===t.group.type?s("m-A2-settings",{attrs:{group:t.group},on:{"update:group":function(e){t.group=e}}}):t._e(),t._v(" "),"A3"===t.group.type?s("m-A3-settings",{attrs:{group:t.group},on:{"update:group":function(e){t.group=e}}}):t._e(),t._v(" "),"A4"===t.group.type?s("m-A4-settings",{attrs:{group:t.group},on:{"update:group":function(e){t.group=e}}}):t._e(),t._v(" "),"A5"===t.group.type?s("m-A5-settings",{attrs:{group:t.group},on:{"update:group":function(e){t.group=e}}}):t._e(),t._v(" "),"C1"===t.group.type?s("m-C1-settings",{attrs:{group:t.group},on:{"update:group":function(e){t.group=e}}}):t._e(),t._v(" "),"C2"===t.group.type?s("m-C2-settings",{attrs:{group:t.group},on:{"update:group":function(e){t.group=e}}}):t._e()],1)])},staticRenderFns:[]}},kDMK:function(t,e,s){var o=s("VU/8")(s("gFJb"),s("lRJt"),null,null);t.exports=o.exports},kHOm:function(t,e,s){var o=s("VU/8")(s("oene"),s("NoUU"),null,null);t.exports=o.exports},lRJt:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("m-page-edit",[s("m-flash-sales-form",{attrs:{usage:"edit",id:t.id}})],1)},staticRenderFns:[]}},o1Mn:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",t._l(t.itemChunks,function(e,o){return s("Row",t._l(e,function(e,i){return s("Col",{attrs:{span:"8",offset:i?1:0}},[s("m-goods-settings",{attrs:{"goods-settings-card-class":0===o&&0===i?"A5-first":"goods-settings-card",position:2*o+i,showRemoveBtn:t.showRemoveBtn,group:t.group,item:t.group.items[2*o+i]},on:{"update:group":function(e){t.group=e},"update:item":function(e){t.$set(t.group.items,2*o+i,e)}}})],1)}))}))},staticRenderFns:[]}},o7TE:function(t,e,s){var o=s("oGCQ");"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);s("rjj0")("4de634f2",o,!0)},oGCQ:function(t,e,s){e=t.exports=s(0)(),e.push([t.i,".ivu-row[data-v-1757e8f2]:not(:last-child){margin-bottom:20px}",""])},oene:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o={resource:{api:{path:"/boss/mall/advertising/flash-sales/list-info",params:{type:"valid"}}}};e.default={name:"MIndexBaseSettings",props:{usage:{type:String,default:"edit"},base_info:{type:Object,default:function(){return{}}}},data:function(){return{ref:"baseForm",searchPositionInfo:{},searchFlashSaleGroupInfo:{},validateRules:{position:[{required:!0,message:"广告位不能为空",trigger:"blur"}],name:[{required:!0,message:"广告标题不能为空",trigger:"blur"}],flash_sale_group_id:[{required:!0,message:"闪购场次不能为空",trigger:"blur",type:"array"}]}}},methods:{loadResource:function(){var t=this;this.$Util.api.get(o.resource,t).then(function(e){"edit"!==t.usage&&bus.$emit("on-loading"),t.searchPositionInfo=e.data.position_info,t.searchFlashSaleGroupInfo=e.data.flash_sale_group_info},function(e){"edit"!==t.usage&&bus.$emit("on-loading"),t.$Message.warning("加载资源失败")})},submit:function(){var t=this;this.$refs[this.ref].validate(function(e){e||(bus.$emit("prevent-submit"),t.$Message.error("表单验证失败!"))}),bus.$emit("flash-sales-form-reset-submit"),bus.$emit("validate"),setTimeout(function(){bus.$emit("flash-sales-form-submit")},500)}},created:function(){var t=this;this.$nextTick(function(){"edit"!==t.usage&&bus.$emit("on-loading"),this.loadResource()})}}},s1PX:function(t,e,s){var o=s("JUPI");"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);s("rjj0")("583e337a",o,!0)},uLGs:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",t._l(t.itemChunks,function(e,o){return s("Row",t._l(e,function(e,i){return s("Col",{attrs:{span:"8",offset:i?1:0}},[s("m-goods-settings",{attrs:{position:2*o+i,showRemoveBtn:t.showRemoveBtn,group:t.group,item:t.group.items[2*o+i]},on:{"update:group":function(e){t.group=e},"update:item":function(e){t.$set(t.group.items,2*o+i,e)}}})],1)}))}))},staticRenderFns:[]}},v0JT:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",t._l(t.itemChunks,function(e,o){return s("Row",t._l(e,function(e,i){return s("Col",{attrs:{span:"8",offset:i?1:0}},[s("m-goods-settings",{attrs:{position:2*o+i,showRemoveBtn:t.showRemoveBtn,group:t.group,item:t.group.items[2*o+i]},on:{"update:group":function(e){t.group=e},"update:item":function(e){t.$set(t.group.items,2*o+i,e)}}})],1)}))}))},staticRenderFns:[]}},"v9/K":function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("m-page",[s("m-base-settings",{attrs:{usage:t.usage,base_info:t.base_info},on:{"update:base_info":function(e){t.base_info=e}}}),t._v(" "),t._l(t.groups,function(e,o){return[s("m-goods-group-settings",{attrs:{group:e},on:{"update:group":function(t){e=t}}},[t._v(">")])]})],2)},staticRenderFns:[]}},vUC5:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("Form",{ref:"A1Form",attrs:{model:t.group,rules:t.validateRules,"label-width":100}},[s("Form-item",{attrs:{label:"倒计时开始时间"}},[s("Date-picker",{staticClass:"fixed-width-input",attrs:{type:"datetime",placeholder:"选择开始时间"},model:{value:t.group.start_time,callback:function(e){t.$set(t.group,"start_time",e)},expression:"group.start_time"}}),t._v(" "),s("span",{staticClass:"input-tips"},[t._v("开始时间前，展示“距离开始还有...”")])],1),t._v(" "),s("Form-item",{attrs:{label:"倒计时结束时间"}},[s("Date-picker",{staticClass:"fixed-width-input",attrs:{type:"datetime",placeholder:"选择结束时间"},model:{value:t.group.end_time,callback:function(e){t.$set(t.group,"end_time",e)},expression:"group.end_time"}}),t._v(" "),s("span",{staticClass:"input-tips"},[t._v("开始时间后，结束时间前，展示“距离结束还有...”")])],1),t._v(" "),s("Form-item",{staticClass:"more-bottom-space",attrs:{label:"倒计时背景色"}},[s("Input",{staticClass:"fixed-width-input",attrs:{placeholder:"请填写十六进制颜色码"},model:{value:t.group.color,callback:function(e){t.$set(t.group,"color",e)},expression:"group.color"}}),t._v(" "),s("span",{staticClass:"input-tips"},[t._v("请填写十六进制颜色码")])],1),t._v(" "),s("Row",[s("Col",{attrs:{span:"8"}},[s("m-goods-settings",{attrs:{group:t.group,showRemoveBtn:t.showRemoveBtn,item:t.group.items[0]},on:{"update:group":function(e){t.group=e},"update:item":function(e){t.$set(t.group.items,0,e)}}})],1)],1)],1)},staticRenderFns:[]}},wAuq:function(t,e,s){var o=s("c2KB");"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);s("rjj0")("728c1c04",o,!0)},wEmg:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=s("btu5"),i=s.n(o),n=s("4a2l"),r=s.n(n),a=s("BDpe"),u=s.n(a),p=s("BEkt"),l=s.n(p),c=s("0L0i"),d=s.n(c),m=s("dPXp"),f=s.n(m),g=s("DAai"),h=s.n(g),v=s("Sj5b"),_=s.n(v);e.default={name:"MGoodsGroupSettings",components:{MComponentsSelect:i.a,MA1Settings:r.a,MA2Settings:u.a,MA3Settings:l.a,MA4Settings:d.a,MA5Settings:f.a,MC1Settings:h.a,MC2Settings:_.a},props:{group:{type:Object,default:function(){return{type:null,route:null,items:[]}}},index:{type:Number,default:0}},data:function(){return{goodsGroupOptions:[{label:"A1商品组",value:"A1"},{label:"A2商品组",value:"A2"},{label:"A3商品组",value:"A3"},{label:"A4商品组",value:"A4"},{label:"A5商品组",value:"A5"},{label:"C1滑动小banner",value:"C1"},{label:"C2滑动商品组",value:"C2"}]}},computed:{tipsByType:function(){switch(this.group.type){case"A1":return"长宽比2.4115";case"A2":case"A3":case"A4":case"A5":return"长宽比3.50467";case"C1":return"长宽比2.3659";case"C2":default:return""}}},methods:{removeComponent:function(){bus.$emit("remove-component",this.index)},moveComponent:function(t,e){bus.$emit("move-component",t,e)},addFrame:function(){this.group.items.length<5&&this.group.items.push({image:null})},addGoods:function(){this.group.items.push({image:null})}}}},"x+pO":function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("Form",{ref:t.ref,attrs:{model:t.group,rules:t.validateRules,"label-width":120}},[s("Form-item",{attrs:{label:"”查看更多”ID"}},[s("span",[t._v(t._s(t.group.id))])]),t._v(" "),s("Form-item",{attrs:{label:"”查看更多”路由"}},[s("m-app-route",{staticClass:"fixed-width-input",attrs:{placeholder:"输入路由","default-route":t.group.route},on:{"on-ok":t.handleSelectRoute}})],1),t._v(" "),t._l(t.itemChunks,function(e,o){return s("Row",t._l(e,function(e,i){return s("Col",{attrs:{span:"9",offset:i?1:0}},[s("m-goods-settings",{attrs:{position:2*o+i,showRemoveBtn:t.showRemoveBtn,group:t.group,item:t.group.items[2*o+i],groupType:"C2"},on:{"update:group":function(e){t.group=e},"update:item":function(e){t.$set(t.group.items,2*o+i,e)}}})],1)}))})],2)},staticRenderFns:[]}}});