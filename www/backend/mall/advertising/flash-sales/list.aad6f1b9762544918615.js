webpackJsonp([226],{"1ufO":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={resource:{api:{path:"/boss/mall/advertising/flash-sales/list-info"}}};e.default={name:"list",data:function(){return{visible:!1,searchPositionInfo:{},searchFlashSaleGroupInfo:{},addRoute:"/mall/advertising/flash-sales/add",api:{path:"/boss/mall/advertising/flash-sales/find-list",params:{fields:"{id,name,position,group_info}",state:[1]}},pageInfoApi:{path:"/boss/mall/advertising/flash-sales/list-page-info",params:{}},columns:[{title:"广告ID",key:"id"},{title:"广告标题",key:"name"},{title:"广告位",key:"position"},{title:"闪购场次",key:"group_info",render:function(t,e){var a=this,i=[];return e.row.group_info.map(function(n,o){o<3?i.push(t("div",n+",")):3===o&&i.push(t("div",[t("span",n),t("span","..."),t("Poptip",{domProps:{value:a.visible},on:{input:function(t){a.visible=t.target.value,a.$emit("input",t.target.value)}}},[t("a","详情"),t("div",{slot:"content"},e.row.group_info.join(", \r\n"))])]))}),t("div",i)}},{title:"操作",key:"action",render:function(t,e){var a=[];return[{name:"编辑",handle:function(){location.hash="/mall/advertising/flash-sales/edit/"+e.row.id}},{name:"删除",handle:function(){confirm("你真的要确定删除吗~")&&(bus.$emit("on-loading"),vm.$Util.api.delete({api:{path:"/boss/mall/advertising/flash-sales/delete",params:{id:e.row.id}}},vm).then(function(){location.reload()},function(t){alert(t)}))}}].map(function(e){a.push(t("i-button",{props:{type:"text",size:"small"},on:{click:function(){e.handle()}}},[t("span",{style:{color:"#39f"}},e.name)]))}),t("div",a)}}],responseHandle:function(t){var e=null===t.data?[]:t.data;for(var a in e)e[a].start_time=vm.$Util.dateFormat(e[a].start_time,"yyyy-MM-dd<br>hh:mm:ss"),e[a].end_time=vm.$Util.dateFormat(e[a].end_time,"yyyy-MM-dd<br>hh:mm:ss");return t},searchCondition:{name:"",position:[],flash_sale_group_id:""},searchConditionHandle:function(t){return t.start_time&&"number"!=typeof t.start_time&&(t.start_time=Date.parse(t.start_time)),t.end_time&&"number"!=typeof t.end_time&&(t.end_time=Date.parse(t.end_time)),t}}},methods:{loadResource:function(){var t=this;this.$Util.api.get(i.resource,t).then(function(e){t.searchPositionInfo=e.data.position_info},function(e){t.$Message.warning("加载资源失败")})},close:function(){this.visible=!1}},created:function(){this.$nextTick(function(){this.loadResource()})}}},"62Tc":function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("m-page-list",{attrs:{path:t.api.path,params:t.api.params,columns:t.columns,"response-handle":t.responseHandle,"page-info-path":t.pageInfoApi.path,"page-info-params":t.pageInfoApi.params}},[a("m-action-bar",[a("m-action-button-add",{attrs:{route:t.addRoute}})],1),t._v(" "),a("m-action-bar",{attrs:{slot:"search"},slot:"search"},[a("m-action-search-bar",{attrs:{"search-condition":t.searchCondition,"search-condition-handle":t.searchConditionHandle}},[a("m-form-item",{attrs:{label:"广告标题"}},[a("Input",{staticStyle:{width:"150px"},attrs:{placeholder:"多个搜索词用逗号分隔"},model:{value:t.searchCondition.name,callback:function(e){t.$set(t.searchCondition,"name",e)},expression:"searchCondition.name"}})],1),t._v(" "),a("m-form-item",{attrs:{label:"广告位"}},[a("i-select",{staticStyle:{width:"150px"},attrs:{multiple:""},model:{value:t.searchCondition.position,callback:function(e){t.$set(t.searchCondition,"position",e)},expression:"searchCondition.position"}},t._l(t.searchPositionInfo,function(e,i){return a("i-option",{attrs:{value:i}},[t._v(t._s(e))])}))],1),t._v(" "),a("m-form-item",{attrs:{label:"闪购场次"}},[a("Input",{staticStyle:{width:"200px"},attrs:{placeholder:"多个闪购场次id用逗号分隔"},model:{value:t.searchCondition.flash_sale_group_id,callback:function(e){t.$set(t.searchCondition,"flash_sale_group_id",e)},expression:"searchCondition.flash_sale_group_id"}})],1)],1)],1)],1)},staticRenderFns:[]}},WzxC:function(t,e,a){var i=a("VU/8")(a("1ufO"),a("62Tc"),null,null);t.exports=i.exports}});