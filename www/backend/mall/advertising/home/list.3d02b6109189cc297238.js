webpackJsonp([224],{BeTQ:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("m-page-list",{attrs:{path:e.api.path,params:e.api.params,columns:e.columns,"response-handle":e.responseHandle,"page-info-path":e.pageInfoApi.path,"page-info-params":e.pageInfoApi.params}},[a("m-action-bar",[a("m-action-button-add",{attrs:{route:e.addRoute}})],1),e._v(" "),a("m-action-bar",{attrs:{slot:"search"},slot:"search"},[a("m-action-search-bar",{attrs:{"search-condition":e.searchCondition,"search-condition-handle":e.searchConditionHandle}},[a("m-form-item",{attrs:{label:"页面标题"}},[a("Input",{staticStyle:{width:"150px"},attrs:{placeholder:"多个搜索词用逗号分隔"},model:{value:e.searchCondition.name,callback:function(t){e.$set(e.searchCondition,"name",t)},expression:"searchCondition.name"}})],1),e._v(" "),a("m-form-item",{attrs:{label:"展示对象"}},[a("i-select",{staticStyle:{width:"150px"},attrs:{multiple:""},model:{value:e.searchCondition.audience,callback:function(t){e.$set(e.searchCondition,"audience",t)},expression:"searchCondition.audience"}},e._l(e.searchTypeSource,function(t){return a("i-option",{attrs:{value:t.audience}},[e._v(e._s(t.title))])}))],1),e._v(" "),a("m-form-item",{attrs:{label:""}},[a("Date-picker",{attrs:{type:"datetime",placeholder:"开始日期"},model:{value:e.searchCondition.start_time,callback:function(t){e.$set(e.searchCondition,"start_time",t)},expression:"searchCondition.start_time"}})],1),e._v(" "),a("span",[e._v("-")]),e._v(" "),a("m-form-item",[a("Date-picker",{attrs:{type:"datetime",placeholder:"结束日期"},model:{value:e.searchCondition.end_time,callback:function(t){e.$set(e.searchCondition,"end_time",t)},expression:"searchCondition.end_time"}})],1),e._v(" "),a("m-form-item",{attrs:{label:"显示状态"}},[a("i-select",{attrs:{multiple:""},model:{value:e.searchCondition.state,callback:function(t){e.$set(e.searchCondition,"state",t)},expression:"searchCondition.state"}},[a("i-option",{attrs:{value:0}},[e._v("已废弃")]),e._v(" "),a("i-option",{attrs:{value:1}},[e._v("已发布")]),e._v(" "),a("i-option",{attrs:{value:2}},[e._v("已下线")]),e._v(" "),a("i-option",{attrs:{value:3}},[e._v("待发布")])],1)],1),e._v(" "),a("m-form-item",{attrs:{label:"版本号"}},[a("i-select",{attrs:{clearable:""},model:{value:e.searchCondition.version_no,callback:function(t){e.$set(e.searchCondition,"version_no",t)},expression:"searchCondition.version_no"}},[a("i-option",{key:5.9,attrs:{value:5.9}},[e._v("5.9及更高")]),e._v(" "),a("i-option",{key:5.2,attrs:{value:5.2}},[e._v("低于5.9")])],1)],1)],1)],1)],1)},staticRenderFns:[]}},HovD:function(e,t,a){var n=a("VU/8")(a("p1xn"),a("BeTQ"),null,null);e.exports=n.exports},p1xn:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={resource:{api:{path:"/boss/mall/advertising/home/tag-group-info"}}};t.default={name:"list",data:function(){return{searchTypeSource:{},addRoute:"/mall/advertising/home/add",api:{path:"/boss/mall/advertising/home/find-list",params:{fields:"{id,name,start_time,end_time,state,audience_name,version_no}",state:[1,3]}},pageInfoApi:{path:"/boss/mall/advertising/home/list-page-info",params:{state:[1,3]}},columns:[{title:"页面ID",key:"id"},{title:"页面标题",key:"name"},{title:"展示对象",key:"audience_name",render:function(e,t){return""===t.row.audience_name?e("div",{},"不限"):e("div",{},t.row.audience_name)}},{title:"版本号",key:"version_no",render:function(e,t){return isNaN(t.row.version_no)?e("span",{},"未知"):t.row.version_no>=5.9?e("span",{},"5.9及更高"):e("span",{},"低于5.9")}},{title:"开始时间",key:"start_time"},{title:"结束时间",key:"end_time"},{title:"状态",key:"status"},{title:"操作",key:"action",render:function(e,t){var a=[],n=[{name:"编辑首页",handle:function(){location.hash="/mall/advertising/home/edit/"+t.row.id}},{name:"编辑Tab栏",handle:function(){location.hash="/mall/advertising/home/tab/"+t.row.id}},{name:"复制",handle:function(){if(confirm("确定要复制这个首页配置吗?")){var e={api:{path:"/boss/mall/advertising/home/copy",params:{id:t.row.id}}};bus.$emit("on-loading"),vm.$Util.api.post(e,e.api.params,vm).then(function(e){null!=e.data?location.hash="/mall/advertising/home/edit/"+e.data:alert("复制失败，请联系开发人员")},function(e){alert(e)})}}},{name:"点击热力图",handle:function(){location.hash="/mall/advertising/home/preview/"+t.row.id}}];return 0===t.row.state?n.push({name:"恢复",handle:function(){bus.$emit("on-loading"),vm.$Util.api.get({api:{path:"/boss/mall/advertising/home/recovery",params:{id:t.row.id}}},vm).then(function(){location.reload()},function(e){alert(e)})}}):n.push({name:"废弃",handle:function(){1===t.row.state?confirm("此为App当前h展示页面,确定要废除吗?")&&(bus.$emit("on-loading"),vm.$Util.api.delete({api:{path:"/boss/mall/advertising/home/delete",params:{id:t.row.id}}},vm).then(function(){location.reload()},function(e){alert(e)})):(bus.$emit("on-loading"),vm.$Util.api.delete({api:{path:"/boss/mall/advertising/home/delete",params:{id:t.row.id}}},vm).then(function(){location.reload()},function(e){alert(e)}))}}),n.map(function(t){a.push(e("i-button",{props:{type:"text",size:"small"},on:{click:function(){t.handle()}}},[e("span",{style:{color:"#39f"}},t.name)]))}),e("div",a)}}],responseHandle:function(e){var t=null===e.data?[]:e.data;for(var a in t)switch(t[a].start_time=vm.$Util.dateFormat(t[a].start_time,"yyyy-MM-dd<br>hh:mm:ss"),t[a].end_time=vm.$Util.dateFormat(t[a].end_time,"yyyy-MM-dd<br>hh:mm:ss"),t[a].state){case 0:t[a].status='<p style="color:#ff3300;">已作废</p>';break;case 1:t[a].status='<p style="color:#00cc66;">已发布</p>';break;case 2:t[a].status='<p style="color:#9ea7b4;">已下线</p>';break;case 3:t[a].status='<p style="color:#ff9900;">待发布</p>'}return e},searchCondition:{name:"",audience:[],start_time:"",end_time:"",state:[1,3],version_no:null},searchConditionHandle:function(e){return e.start_time&&"number"!=typeof e.start_time&&(e.start_time=Date.parse(e.start_time)),e.end_time&&"number"!=typeof e.end_time&&(e.end_time=Date.parse(e.end_time)),e}}},methods:{loadResource:function(){var e=this;this.$Util.api.get(n.resource,e).then(function(t){t.data.unshift({audience:"no_tag",title:"不限"}),e.searchTypeSource=t.data},function(t){e.$Message.warning("加载资源失败")})}},created:function(){this.$nextTick(function(){this.loadResource()})}}}});