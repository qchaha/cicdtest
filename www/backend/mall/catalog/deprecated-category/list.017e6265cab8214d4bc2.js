webpackJsonp([214],{"6yky":function(t,e,a){"use strict";function o(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}Object.defineProperty(e,"__esModule",{value:!0});var n=void 0;e.default={name:"app",data:function(){return{addRoute:"/mall/catalog/deprecated-category/add",api:{path:"/boss/mall/catalog/deprecated-category/find-list",params:{fields:"{cate_id,cate_name,icon(w:320,h:320){url},taobao_link,status,is_show,create_time,update_time}",is_show:1}},pageInfoApi:{path:"/boss/mall/catalog/deprecated-category/list-page-info",params:{is_show:1}},columns:[{title:"ID",key:"cate_id"},{title:"分类名称",key:"cate_name"},{title:"分类图标",key:"icon",render:function(t,e){return t("img",{attrs:{width:50,height:50,src:e.row.icon.url}})}},{title:"分类淘宝跳转链接",key:"taobao_link",render:function(t,e){return t("a",{attrs:o({target:"_blank",href:e.row.taobao_link},"target","_blank")},"去淘宝")}},{title:"APP路由连接",key:"cate_id,cate_name",render:function(t,e){return t("span","meijiabang://goods_list?category_id="+e.row.cate_id+"&title="+encodeURIComponent(e.row.cate_name))}},{title:"状态",key:"status",render:function(t,e){return 1==e.row.status?t("Icon",{props:{type:"checkmark",color:"green"}}):t("Icon",{props:{type:"close",color:"red"}})}},{title:"是否显示",key:"is_show",render:function(t,e){return 1==e.row.is_show?t("Icon",{props:{type:"checkmark",color:"green"}}):t("Icon",{props:{type:"close",color:"red"}})}},{title:"修改时间",key:"update_time"},{title:"操作",key:"action",render:function(t,e){return t("div",[t("i-button",{props:{type:"text",size:"small"},on:{click:function(){var t={api:{path:"/boss/mall/catalog/deprecated-category/edit-sort-order",params:{id:e.row.cate_id,type:"up"}}};bus.$emit("on-loading"),vm.$Util.api.post(t,t.api.params,vm).then(function(t){location.reload()},function(t){})}}},[t("span",{style:{color:"#39f"}},"上移")]),t("i-button",{props:{type:"text",size:"small"},on:{click:function(){var t={api:{path:"/boss/mall/catalog/deprecated-category/edit-sort-order",params:{id:e.row.cate_id,type:"down"}}};bus.$emit("on-loading"),vm.$Util.api.post(t,t.api.params,vm).then(function(t){location.reload()},function(t){})}}},[t("span",{style:{color:"#39f"}},"下移")]),t("i-button",{props:{type:"text",size:"small"},on:{click:function(){location.hash="/mall/catalog/deprecated-category/edit/"+e.row.cate_id}}},[t("span",{style:{color:"#39f"}},"编辑")]),t("i-button",{props:{type:"text",size:"small"},on:{click:function(){if(confirm("确认删除?")){var t={api:{path:"/boss/mall/catalog/deprecated-category/delete",params:{id:e.row.cate_id}}};bus.$emit("on-loading"),vm.$Util.api.delete(t,vm).then(function(t){location.reload()},function(t){})}}}},[t("span",{style:{color:"red"}},"删除")])])}}],methods:{},responseHandle:function(t){var e=t.data;for(var a in e)e[a].update_time>0?e[a].update_time=vm.$Util.dateFormat(e[a].update_time,"yyyy-MM-dd<br>hh:mm:ss"):e[a].update_time="";return t},searchCondition:{parent_id:"",cate_name:"",is_show:1},categoryInfo:[]}},methods:{handlePageInfoSuccess:function(t){this.categoryInfo=t.data.category_info,this.categoryInfo.splice(0,0,{cate_id:"",cate_name:"选择所属分类"}),this.categoryInfo.splice(1,0,{cate_id:0,cate_name:"所有一级分类"})}},created:function(){n=this}}},CDf0:function(t,e,a){var o=a("VU/8")(a("6yky"),a("RGwW"),null,null);t.exports=o.exports},RGwW:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("m-page-list",{attrs:{path:t.api.path,params:t.api.params,columns:t.columns,methods:t.methods,"response-handle":t.responseHandle,"page-info-path":t.pageInfoApi.path,"page-info-params":t.pageInfoApi.params},on:{"on-page-info-success":t.handlePageInfoSuccess}},[a("m-action-bar",[a("m-action-button-add",{attrs:{route:t.addRoute}})],1),t._v(" "),a("m-action-bar",{attrs:{slot:"search"},slot:"search"},[a("m-action-search-bar",{attrs:{"search-condition":t.searchCondition}},[a("m-form-item",{attrs:{label:""}},[a("Select",{staticStyle:{width:"200px"},attrs:{placeholder:"父级分类",filterable:""},model:{value:t.searchCondition.parent_id,callback:function(e){t.$set(t.searchCondition,"parent_id",e)},expression:"searchCondition.parent_id"}},t._l(t.categoryInfo,function(e){return a("Option",{attrs:{value:e.cate_id}},[t._v(t._s(e.cate_name))])}))],1),t._v(" "),a("m-form-item",{attrs:{label:""}},[a("Input",{staticStyle:{width:"100px"},attrs:{placeholder:"分类名称"},model:{value:t.searchCondition.cate_name,callback:function(e){t.$set(t.searchCondition,"cate_name",e)},expression:"searchCondition.cate_name"}})],1),t._v(" "),a("m-form-item",{attrs:{label:""}},[a("Select",{staticStyle:{width:"150px"},attrs:{placeholder:"分类列表是否显示"},model:{value:t.searchCondition.is_show,callback:function(e){t.$set(t.searchCondition,"is_show",e)},expression:"searchCondition.is_show"}},[a("Option",{attrs:{value:1}},[t._v("分类列表显示")]),t._v(" "),a("Option",{attrs:{value:0}},[t._v("分类列表不显示")])],1)],1)],1)],1)],1)},staticRenderFns:[]}}});