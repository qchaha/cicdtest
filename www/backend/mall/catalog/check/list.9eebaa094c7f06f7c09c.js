webpackJsonp([12],{"/rZt":function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Tooltip",{attrs:{content:"点击设置最低价",placement:"bottom"}},[a("a",{on:{click:function(e){t.showSettings=!0}}},[t._v("最低价：￥"+t._s(t.goods.suggestLowestPrice))])]),t._v(" "),a("Modal",{attrs:{title:"修改最低价"},on:{"on-ok":t.postData},model:{value:t.showSettings,callback:function(e){t.showSettings=e},expression:"showSettings"}},[a("div",{staticStyle:{padding:"20px"}},[a("p",[t._v("Goods_ID："+t._s(t.goods.goodsId))]),t._v(" "),a("p",{staticStyle:{margin:"5px"}},[t._v("商品名称："+t._s(t.goods.goodsName))]),t._v(" "),a("Form",{attrs:{"label-width":65,model:t.formData,rules:t.rules}},[a("Form-item",{attrs:{label:"最低价",prop:"suggestLowestPrice"}},[a("Input",{attrs:{number:"",autofocus:!0,placeholder:"最多两位小数"},model:{value:t.formData.suggestLowestPrice,callback:function(e){t.$set(t.formData,"suggestLowestPrice",e)},expression:"formData.suggestLowestPrice"}})],1)],1)],1)])],1)},staticRenderFns:[]}},"0bj8":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("mtKl"),o=a.n(s);e.default={name:"CatalogCheckTab",components:{CatalogCheckTable:o.a},props:{goodsList:{type:Array,default:function(){return[]}},specList:{type:Array,default:function(){return[]}},goodsPage:{type:Object,default:function(){return{total:0,pageSize:24,currentPage:1}}},specPage:{type:Object,default:function(){return{total:0,pageSize:24,currentPage:1}}}},data:function(){return{currentTab:"Goods_ID"}},watch:{currentTab:function(t){bus.$emit("change-tab",t)}}}},"2NNY":function(t,e,a){var s=a("4yde");"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);a("rjj0")("760b2f15",s,!0)},"35hU":function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("m-page",[a("catalog-check-list-search",{attrs:{brandOptions:t.brandOptions,firstLevelCategoryOptions:t.firstLevelCategoryOptions,thirdLevelCategoryOptions:t.thirdLevelCategoryOptions,searchParams:t.searchParams,currentTab:t.currentTab,goodsPageApi:t.goodsPageApi,specPageApi:t.specPageApi},on:{"update:searchParams":function(e){t.searchParams=e},onSearch:t.onSearch}}),t._v(" "),a("catalog-check-tab",{attrs:{goodsList:t.goodsList,specList:t.specList,goodsPage:t.goodsPage,specPage:t.specPage}}),t._v(" "),a("Back-top",{attrs:{bottom:100,right:100}},[a("div",{staticClass:"top"},[t._v("返回顶端")])])],1)},staticRenderFns:[]}},"4MAT":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"CatalogCheckListSearch",props:{searchParams:{type:Object,default:function(){return{}}},brandOptions:{type:Array,default:function(){return[]}},firstLevelCategoryOptions:{type:Array,default:function(){return[]}},thirdLevelCategoryOptions:{type:Array,default:function(){return[]}},currentTab:{type:String,default:"Goods_ID"},goodsPageApi:{type:Object,default:function(){return{}}},specPageApi:{type:Object,default:function(){return{}}}},data:function(){return{boolOptions:[{label:"是",value:1},{label:"否",value:0}],shelfStatusOptions:[{label:"上架",value:1},{label:"下架",value:0},{label:"废弃",value:-1}],goodsTypeOptions:[{label:"普通",value:1},{label:"闪购",value:2},{label:"拼团",value:3}],orientationOptions:[{label:"主推",value:1},{label:"次推",value:2},{label:"潜力",value:3},{label:"清库存",value:4},{label:"新品",value:5}],popularityOptions:[{label:"非常畅销",value:1},{label:"畅销",value:2},{label:"一般",value:3},{label:"滞销",value:4}],stockAppraiseOptions:[{label:"缺货",value:1},{label:"清库存",value:2},{label:"健康",value:3}]}},methods:{onSearch:function(){this.$emit("onSearch")},toExportExcel:function(){var t=this,e=null;"Goods_ID"===this.currentTab?(this.goodsPageApi.api.params=this.searchParams,e=this.goodsPageApi):(this.specPageApi.api.params=this.searchParams,e=this.specPageApi),bus.$emit("on-loading"),this.$Util.api.get(e,this).then(function(e){bus.$emit("on-loading"),e.data.total>700?t.$Modal.warning({content:"暂时无法导出超过700条的数据，请缩小搜索范围"}):0===e.data.total?t.$Modal.warning({content:"无符合搜索条件的数据可导出"}):t.openExportTab()},function(e){bus.$emit("on-loading"),t.alertErrorTips(e.message?e.message:"发生了未知的错误")})},openExportTab:function(){var t=this,e="";e="Goods_ID"===this.currentTab?"/boss/mall/catalog/goods/stocktaking/export?fields={goodsId,goodsName,shortName,middleName,isDaily,isSuit,brand{name},firstLevelCategory{name},category{name},mallPrice,priceGrade,suggestLowestPrice,firstOnShelfTime,shelfStatus,type,stock,orientation,popularity,incomePopularity,brandPopularity,categoryPopularity,thirtyDaysSales,thirtyDaysIncomes}&":"/boss/mall/catalog/spec/stocktaking/export?fields={id,goodsId,stock,spec1,spec2,spec3,spec4,spec5,thirtyDaysSales,thirtyDaysIncomes,popularity,incomePopularity,brandPopularity,categoryPopularity,goods{goodsName,shortName,middleName,isDaily,isSuit,brand{name},firstLevelCategory{name},category{name},mallPrice,priceGrade,suggestLowestPrice,firstOnShelfTime,shelfStatus,orientation}}&";var a="",s=function(e){if("offset"!==e&&"limit"!==e&&null!==t.searchParams[e])if(t.searchParams[e]instanceof Array){var s=t.searchParams[e];s.forEach(function(t){a+=e+"[]="+t+"&"})}else a+=e+"="+t.searchParams[e]+"&"};for(var o in this.searchParams)s(o);window.open(e+a)},toImportExcel:function(){window.open("/backend/#/mall/catalog/check/batch-edit")},toSpecification:function(){window.open("/backend/#/mall/catalog/check/specification")}}}},"4yde":function(t,e,a){e=t.exports=a(0)(),e.push([t.i,"",""])},"5L7E":function(t,e,a){a("2NNY");var s=a("VU/8")(a("0bj8"),a("oBP4"),"data-v-00e37303",null);t.exports=s.exports},"6EYd":function(t,e,a){var s=a("zvvm");"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);a("rjj0")("76c17c20",s,!0)},"9D2C":function(t,e,a){e=t.exports=a(0)(),e.push([t.i,"",""])},"9E0K":function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Card",[a("Form",{attrs:{model:t.searchParams}},[a("Row",[a("Col",{attrs:{span:"11"}},[a("FormItem",{attrs:{label:"Goods_ID","label-width":60}},[a("Input",{attrs:{placeholder:"多个ID逗号隔开，最多100个"},model:{value:t.searchParams.goods_id,callback:function(e){t.$set(t.searchParams,"goods_id",e)},expression:"searchParams.goods_id"}})],1)],1),t._v(" "),a("Col",{attrs:{span:"11"}},[a("FormItem",{attrs:{label:"商品名称","label-width":80}},[a("Input",{attrs:{placeholder:"多个搜索词逗号隔开，最多10个"},model:{value:t.searchParams.goods_name,callback:function(e){t.$set(t.searchParams,"goods_name",e)},expression:"searchParams.goods_name"}})],1)],1)],1),t._v(" "),a("Row",[a("Col",{attrs:{span:"11"}},[a("FormItem",{attrs:{label:"Spec_ID","label-width":55}},[a("Input",{attrs:{placeholder:"多个ID逗号隔开，最多100个"},model:{value:t.searchParams.spec_id,callback:function(e){t.$set(t.searchParams,"spec_id",e)},expression:"searchParams.spec_id"}})],1)],1),t._v(" "),a("Col",{attrs:{span:"11"}},[a("FormItem",{attrs:{label:"SKU","label-width":56}},[a("Input",{attrs:{placeholder:"多个搜索词逗号隔开，最多100个"},model:{value:t.searchParams.sku,callback:function(e){t.$set(t.searchParams,"sku",e)},expression:"searchParams.sku"}})],1)],1)],1),t._v(" "),a("Row",[a("Col",{attrs:{span:"6"}},[a("FormItem",{attrs:{label:"商品状态","label-width":60}},[a("Select",{attrs:{multiple:""},model:{value:t.searchParams.goods_status,callback:function(e){t.$set(t.searchParams,"goods_status",e)},expression:"searchParams.goods_status"}},t._l(t.shelfStatusOptions,function(e){return a("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])}))],1)],1),t._v(" "),a("Col",{attrs:{span:"6"}},[a("FormItem",{attrs:{label:"规格状态","label-width":80}},[a("Select",{attrs:{multiple:""},model:{value:t.searchParams.spec_status,callback:function(e){t.$set(t.searchParams,"spec_status",e)},expression:"searchParams.spec_status"}},t._l(t.shelfStatusOptions,function(e){return a("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])}))],1)],1),t._v(" "),a("Col",{attrs:{span:"6"}},[a("FormItem",{attrs:{label:"商品类型","label-width":80}},[a("Select",{attrs:{multiple:""},model:{value:t.searchParams.goods_type,callback:function(e){t.$set(t.searchParams,"goods_type",e)},expression:"searchParams.goods_type"}},t._l(t.goodsTypeOptions,function(e){return a("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])}))],1)],1),t._v(" "),a("Col",{attrs:{span:"3"}},[a("FormItem",{attrs:{label:"是否日常ID","label-width":90}},[a("Select",{attrs:{clearable:""},model:{value:t.searchParams.is_daily_id,callback:function(e){t.$set(t.searchParams,"is_daily_id",e)},expression:"searchParams.is_daily_id"}},t._l(t.boolOptions,function(e){return a("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])}))],1)],1)],1),t._v(" "),a("Row",[a("Col",{attrs:{span:"7"}},[a("FormItem",{attrs:{label:"品牌","label-width":37}},[a("Select",{attrs:{multiple:"",filterable:"",placeholder:"可模糊搜索，可多选"},model:{value:t.searchParams.brand_id,callback:function(e){t.$set(t.searchParams,"brand_id",e)},expression:"searchParams.brand_id"}},t._l(t.brandOptions,function(e){return a("Option",{key:e.id,attrs:{value:e.id}},[t._v(t._s(e.name))])}))],1)],1),t._v(" "),a("Col",{attrs:{span:"7"}},[a("FormItem",{attrs:{label:"一级品类","label-width":80}},[a("Select",{attrs:{multiple:"",filterable:"",placeholder:"可模糊搜索，可多选"},model:{value:t.searchParams.first_level_category_id,callback:function(e){t.$set(t.searchParams,"first_level_category_id",e)},expression:"searchParams.first_level_category_id"}},t._l(t.firstLevelCategoryOptions,function(e){return a("Option",{key:e.id,attrs:{value:e.id}},[t._v(t._s(e.name))])}))],1)],1),t._v(" "),a("Col",{attrs:{span:"7"}},[a("FormItem",{attrs:{label:"三级品类","label-width":80}},[a("Select",{attrs:{multiple:"",filterable:"",placeholder:"可模糊搜索，可多选"},model:{value:t.searchParams.third_level_category_id,callback:function(e){t.$set(t.searchParams,"third_level_category_id",e)},expression:"searchParams.third_level_category_id"}},t._l(t.thirdLevelCategoryOptions,function(e){return a("Option",{key:e.id,attrs:{value:e.id}},[t._v(t._s(e.name))])}))],1)],1)],1),t._v(" "),a("Row",[a("Col",{attrs:{span:"3"}},[a("FormItem",{attrs:{label:"是否套装","label-width":60}},[a("Select",{attrs:{clearable:""},model:{value:t.searchParams.is_suit,callback:function(e){t.$set(t.searchParams,"is_suit",e)},expression:"searchParams.is_suit"}},t._l(t.boolOptions,function(e){return a("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])}))],1)],1),t._v(" "),a("Col",{attrs:{span:"7"}},[a("FormItem",{attrs:{label:"运营定位","label-width":80}},[a("Select",{attrs:{multiple:"",placeholder:"可多选"},model:{value:t.searchParams.orientation,callback:function(e){t.$set(t.searchParams,"orientation",e)},expression:"searchParams.orientation"}},t._l(t.orientationOptions,function(e){return a("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])}))],1)],1),t._v(" "),a("Col",{attrs:{span:"3"}},[a("FormItem",{attrs:{label:"是否新品","label-width":80}},[a("Select",{attrs:{clearable:""},model:{value:t.searchParams.is_new,callback:function(e){t.$set(t.searchParams,"is_new",e)},expression:"searchParams.is_new"}},t._l(t.boolOptions,function(e){return a("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])}))],1)],1),t._v(" "),a("Col",{attrs:{span:"8"}},[a("FormItem",{attrs:{label:"品牌畅销度","label-width":90}},[a("Select",{attrs:{multiple:"",placeholder:"可多选"},model:{value:t.searchParams.brand_popularity,callback:function(e){t.$set(t.searchParams,"brand_popularity",e)},expression:"searchParams.brand_popularity"}},t._l(t.popularityOptions,function(e){return a("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])}))],1)],1)],1),t._v(" "),a("Row",[a("Col",{attrs:{span:"7"}},[a("FormItem",{attrs:{label:"品类畅销度","label-width":72}},[a("Select",{attrs:{multiple:"",placeholder:"可多选"},model:{value:t.searchParams.category_popularity,callback:function(e){t.$set(t.searchParams,"category_popularity",e)},expression:"searchParams.category_popularity"}},t._l(t.popularityOptions,function(e){return a("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])}))],1)],1),t._v(" "),a("Col",{attrs:{span:"7"}},[a("FormItem",{attrs:{label:"收入畅销度","label-width":90}},[a("Select",{attrs:{multiple:"",placeholder:"可多选"},model:{value:t.searchParams.income_popularity,callback:function(e){t.$set(t.searchParams,"income_popularity",e)},expression:"searchParams.income_popularity"}},t._l(t.popularityOptions,function(e){return a("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])}))],1)],1),t._v(" "),a("Col",{attrs:{span:"7"}},[a("FormItem",{attrs:{label:"销量畅销度","label-width":90}},[a("Select",{attrs:{multiple:"",placeholder:"可多选"},model:{value:t.searchParams.goods_popularity,callback:function(e){t.$set(t.searchParams,"goods_popularity",e)},expression:"searchParams.goods_popularity"}},t._l(t.popularityOptions,function(e){return a("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])}))],1)],1)],1),t._v(" "),a("Row",[a("Col",{attrs:{span:"2"}},[a("Button",{attrs:{type:"primary",long:""},on:{click:t.onSearch}},[t._v("搜索")])],1),t._v(" "),a("Col",{attrs:{span:"2"}},[a("Button",{attrs:{type:"primary",long:""},on:{click:t.toExportExcel}},[t._v("导出")])],1),t._v(" "),a("Col",{attrs:{span:"2"}},[a("Button",{attrs:{type:"primary",long:""},on:{click:t.toImportExcel}},[t._v("批量修改")])],1),t._v(" "),a("Col",{attrs:{span:"2"}},[a("Button",{attrs:{type:"ghost",long:""},on:{click:t.toSpecification}},[t._v("功能说明")])],1)],1)],1)],1)},staticRenderFns:[]}},DdXh:function(t,e,a){e=t.exports=a(0)(),e.push([t.i,".ivu-card[data-v-b9097906]{margin-bottom:15px}.top[data-v-b9097906]{padding:10px;background:rgba(0,153,229,.7);color:#fff;text-align:center;border-radius:2px}",""])},"ED+g":function(t,e,a){e=t.exports=a(0)(),e.push([t.i,"",""])},EcW7:function(t,e,a){a("wt5E");var s=a("VU/8")(a("k5VF"),a("/rZt"),"data-v-7a51b7d4",null);t.exports=s.exports},Gd8M:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("EcW7"),o=a.n(s),r=a("kZmh"),i=a.n(r);e.default={name:"CatalogCheckTable",components:{SetSuggestLowestPrice:o.a,SetOrientation:i.a},props:{data:{type:Array,default:function(){return[]}},currentTab:{type:String},page:{type:Object,default:function(){return{total:0,pageSize:24,currentPage:1}}}},data:function(){var t=this;return{columns:[{title:"基本信息",key:"base",align:"left",render:function(e,a){return"Goods_ID"===t.currentTab?e("section",{},[e("p",{},[e("span",{},"GoodsID："),e("a",{attrs:{href:"/backend/#/mall/catalog/goods/edit/"+a.row.goodsId,target:"_blank"}},a.row.goodsId)]),e("p",{},"商品名称："+a.row.goodsName)]):e("section",{},[e("p",{},[e("span",{},"GoodsID："),e("a",{attrs:{href:"/backend/#/mall/catalog/goods/edit/"+a.row.goodsId,target:"_blank"}},a.row.goodsId)]),e("p",{},[e("span",{},"SpecID："),e("a",{attrs:{href:"/backend/#/mall/catalog/goods-spec/edit/"+a.row.id+"?goods_id="+a.row.goodsId,target:"_blank"}},a.row.id)]),e("p",{},"商品名称："+a.row.goods.goodsName),e("p",{},"规格名称："+t.getSpecName(a.row))])}},{title:"属性",key:"attribute",align:"left",width:150,render:function(e,a){var s=t.getGoods(a.row);return e("section",{},[e("p",{},"日常ID："+(s.isDaily?"是":"否")),e("p",{},"套装："+(s.isSuit?"是":"否")),e("p",{},"品牌："+s.brand.name),e("p",{},"一级品类："+(s.firstLevelCategory?s.firstLevelCategory.name:"")),e("p",{},"三级品类："+s.category.name)])}},{title:"价格",key:"price",align:"left",width:150,render:function(e,a){var s=t.getGoods(a.row),r=[];return r[10]="",r[20]="",r[30]="",s.priceGrade&&(r=JSON.parse(s.priceGrade)),e("section",{},[e("p",{},"商城价：￥"+s.mallPrice),e("p",{},"银牌：￥"+r[10]),e("p",{},"金牌：￥"+r[20]),e("p",{},"白金：￥"+r[30]),e(o.a,{props:{goods:s}})])}},{title:"额外信息",key:"extra",align:"left",width:150,render:function(e,a){var s=t.getGoods(a.row),o=(new Date).getTime(),r=o-1e3*s.firstOnShelfTime>7776e6?"否":"是";return"Goods_ID"===t.currentTab?e("section",{},[e(i.a,{props:{goods:s}}),e("p",{},"商品状态："+t.getShelfStatusText(s.shelfStatus)),e("p",{},"90天内新品："+r),e("p",{},"商品类型："+("1"===s.type?"普通":"2"===s.type?"闪购":"拼团"))]):e("section",{},[e(i.a,{props:{goods:s}}),e("p",{},"商品状态："+t.getShelfStatusText(s.shelfStatus)),e("p",{},"规格状态："+t.getSpecShelfStatusText(a.row.shelfStatus)),e("p",{},"90天内新品："+r),e("p",{},"商品类型："+("1"===s.type?"普通":"2"===s.type?"闪购":"拼团"))])}},{title:"销售数据",key:"selling",align:"left",width:150,render:function(t,e){return t("section",{},[t("p",{},"近30天销量："+e.row.thirtyDaysSales),t("p",{},"日均销量："+Math.round(e.row.thirtyDaysSales/30)),t("p",{},"近30天收入："+e.row.thirtyDaysIncomes),t("p",{},"日均收入："+Math.round(e.row.thirtyDaysIncomes/30))])}},{title:"库存情况",key:"stock",align:"left",width:150,render:function(t,e){var a="",s=parseInt(e.row.stock),o=parseInt(e.row.thirtyDaysSales);return 0!==s&&0!==o?a=Math.round(s/(o/30)):0===s&&0!==o&&(a=0),t("section",{},[t("p",{},"可销库存："+s),t("p",{},"库存天数："+a)])}},{title:"畅销度",key:"sellingLevel",align:"left",width:150,render:function(e,a){return e("section",{},[e("p",{},"品牌："+t.getPopularityText(a.row.brandPopularity)),e("p",{},"品类："+t.getPopularityText(a.row.categoryPopularity)),e("p",{},"收入："+t.getPopularityText(a.row.incomePopularity)),e("p",{},"销量："+t.getPopularityText(a.row.popularity))])}}]}},methods:{getSpecName:function(t){for(var e="",a=1;a<6;a++)t["spec"+a]&&(e=e+" "+t["spec"+a]);return e.substr(1)},getGoods:function(t){return"Goods_ID"===this.currentTab?t:t.goods},getShelfStatusText:function(t){switch(t){case 1:return"上架";case 0:return"下架";case-1:return"废弃"}return""},getSpecShelfStatusText:function(t){switch(t){case 1:return"上架";case 0:return"废弃";case-1:return"下架"}return""},getPopularityText:function(t){switch(t){case 1:return"非常畅销";case 2:return"畅销";case 3:return"一般";case 4:return"滞销"}return""},getStockEvaluate:function(t){return t<=3?"缺货":t<=60?"健康":"清库存"},changePage:function(t){bus.$emit("change-page",t)}}}},M0pW:function(t,e,a){a("Zf+d");var s=a("VU/8")(a("4MAT"),a("9E0K"),"data-v-4559692a",null);t.exports=s.exports},MpDH:function(t,e,a){var s=a("ED+g");"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);a("rjj0")("f7aa6000",s,!0)},Quzh:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("M0pW"),o=a.n(s),r=a("5L7E"),i=a.n(r);e.default={name:"CatalogCheckList",components:{CatalogCheckListSearch:o.a,CatalogCheckTab:i.a},data:function(){return{brandOptions:[],brandOptionsApi:{api:{path:"/boss/mall/catalog/brand/available",params:{fields:"{id,name}"}}},firstLevelCategoryOptions:[],firstLevelCategoryOptionsApi:{api:{path:"/boss/mall/catalog/category/find-list",params:{offset:0,limit:1e3,status:[1],level:1,fields:"{id,name}"}}},thirdLevelCategoryOptions:[],thirdLevelCategoryOptionsApi:{api:{path:"/boss/mall/catalog/category/find-list",params:{offset:0,limit:1e3,status:[1],level:3,fields:"{id,name}"}}},currentTab:"Goods_ID",searchParams:{offset:0,limit:24,goods_id:"",goods_name:"",spec_id:"",sku:"",goods_status:[1],spec_status:[1],goods_type:[],is_daily_id:1,brand_id:[],first_level_category_id:[],third_level_category_id:[],orientation:[],is_new:null,brand_popularity:[],category_popularity:[],income_popularity:[],goods_popularity:[]},goodsList:[],goodsListApi:{api:{path:"/boss/mall/catalog/goods/stocktaking/list",params:{fields:"{goodsId,goodsName,isDaily,isSuit,brand{name},firstLevelCategory{name},category{name},mallPrice,priceGrade,suggestLowestPrice,firstOnShelfTime,shelfStatus,type,stock,orientation,popularity,incomePopularity,brandPopularity,categoryPopularity,thirtyDaysSales,thirtyDaysIncomes}"}}},goodsPage:{total:0,pageSize:24,currentPage:1},goodsPageApi:{api:{path:"/boss/mall/catalog/goods/stocktaking/page"}},specList:[],specListApi:{api:{path:"/boss/mall/catalog/spec/stocktaking/list",params:{fields:"{id,goodsId,shelfStatus,stock,spec1,spec2,spec3,spec4,spec5,thirtyDaysSales,thirtyDaysIncomes,popularity,incomePopularity,brandPopularity,categoryPopularity,goods{goodsName,isDaily,isSuit,brand{name},firstLevelCategory{name},category{name},mallPrice,priceGrade,suggestLowestPrice,firstOnShelfTime,shelfStatus,orientation}}"}}},specPage:{total:0,pageSize:24,currentPage:1},specPageApi:{api:{path:"/boss/mall/catalog/spec/stocktaking/page"}},loadTotal:5,loadedNum:0,goodsListLoaded:!1,specListLoaded:!1}},methods:{alertErrorTips:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:300;this.$Modal.error({width:e,content:t})},changePage:function(t){"Goods_ID"===this.currentTab?(this.goodsPage.currentPage=t,this.searchParams.offset=(t-1)*this.goodsListApi.api.params.limit):(this.specPage.currentPage=t,this.searchParams.offset=(t-1)*this.specListApi.api.params.limit),this.loadTotal-=1,bus.$emit("on-loading"),this.loadList()},loadBrandOptions:function(){var t=this;this.$Util.api.get(this.brandOptionsApi,this).then(function(e){t.loadedNum+=1,t.brandOptions=e.data},function(e){t.loadedNum+=1})},loadFirstLevelCategoryOptions:function(){var t=this;this.$Util.api.get(this.firstLevelCategoryOptionsApi,this).then(function(e){t.loadedNum+=1,t.firstLevelCategoryOptions=e.data},function(e){t.loadedNum+=1})},loadThirdLevelCategoryOptions:function(){var t=this;this.$Util.api.get(this.thirdLevelCategoryOptionsApi,this).then(function(e){t.loadedNum+=1,t.thirdLevelCategoryOptions=e.data},function(e){t.loadedNum+=1})},loadList:function(){"Goods_ID"===this.currentTab?this.loadGoodsList():this.loadSpecList()},loadPage:function(){var t=this,e=null;"Goods_ID"===this.currentTab?(this.goodsPage.total=0,this.goodsPage.currentPage=1,this.goodsPageApi.api.params=this.searchParams,e=this.goodsPageApi):(this.specPage.total=0,this.specPage.currentPage=1,this.specPageApi.api.params=this.searchParams,e=this.specPageApi),this.$Util.api.get(e,this).then(function(e){t.loadedNum+=1,"Goods_ID"===t.currentTab?t.goodsPage.total=e.data.total:t.specPage.total=e.data.total},function(e){t.loadedNum+=1,t.alertErrorTips(e.message?e.message:"发生了未知的错误")})},loadGoodsList:function(){var t=this;Object.assign(this.goodsListApi.api.params,this.searchParams),this.$Util.api.get(this.goodsListApi,this).then(function(e){t.loadedNum+=1,t.goodsListLoaded=!0,t.goodsList=e.data?e.data:[]},function(e){t.loadedNum+=1,t.alertErrorTips(e.message?e.message:"发生了未知的错误")})},loadSpecList:function(){var t=this;Object.assign(this.specListApi.api.params,this.searchParams),this.$Util.api.get(this.specListApi,this).then(function(e){t.loadedNum+=1,t.specListLoaded=!0,t.specList=e.data?e.data:[]},function(e){t.loadedNum+=1,t.alertErrorTips(e.message?e.message:"发生了未知的错误")})},onSearch:function(){bus.$emit("on-loading"),this.loadedNum-=2,this.goodsList=[],this.specList=[],this.goodsListLoaded=!1,this.specListLoaded=!1,this.searchParams.offset=0,this.loadList(),this.loadPage()},changeTab:function(){("Goods_ID"===this.currentTab&&!this.goodsListLoaded||"Spec_ID"===this.currentTab&&!this.specListLoaded)&&(this.searchParams.offset=0,this.loadedNum-=2,bus.$emit("on-loading"),this.loadList(),this.loadPage())}},watch:{loadedNum:function(){this.loadedNum>=this.loadTotal&&bus.$emit("on-loading")}},created:function(){var t=this;this.$nextTick(function(){bus.$emit("on-loading")}),bus.$on("alert-error-tips",function(e,a){return t.alertErrorTips(e,a)}),bus.$on("change-tab",function(e){t.currentTab=e,t.changeTab()}),bus.$on("change-page",function(e){t.changePage(e)}),this.loadList(),this.loadPage(),this.loadBrandOptions(),this.loadFirstLevelCategoryOptions(),this.loadThirdLevelCategoryOptions()},beforeDestroy:function(){bus.$off("alert-error-tips"),bus.$off("change-tab"),bus.$off("change-page")}}},RmAq:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Card",[a("Table",{attrs:{columns:t.columns,data:t.data,border:""}}),t._v(" "),a("div",{staticClass:"page-bar"},[a("Page",{attrs:{current:t.page.currentPage,"page-size":t.page.pageSize,total:t.page.total,size:"small"},on:{"on-change":t.changePage}})],1)],1)},staticRenderFns:[]}},"Zf+d":function(t,e,a){var s=a("jGje");"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);a("rjj0")("77cf5328",s,!0)},Zlrs:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Tooltip",{attrs:{content:"点击设置运营定位",placement:"bottom"}},[a("a",{on:{click:function(e){t.showSettings=!0}}},[t._v("运营定位："+t._s(t.getOrientationText))])]),t._v(" "),a("Modal",{attrs:{title:"修改运营定位"},on:{"on-ok":t.postData},model:{value:t.showSettings,callback:function(e){t.showSettings=e},expression:"showSettings"}},[a("div",{staticStyle:{padding:"20px"}},[a("p",[t._v("Goods_ID："+t._s(t.goods.goodsId))]),t._v(" "),a("p",{staticStyle:{margin:"5px"}},[t._v("商品名称："+t._s(t.goods.goodsName))]),t._v(" "),a("Form",{attrs:{"label-width":65}},[a("Form-item",{attrs:{label:"运营定位"}},[a("Select",{model:{value:t.goods.orientation,callback:function(e){t.$set(t.goods,"orientation",e)},expression:"goods.orientation"}},t._l(t.orientationOptions,function(e){return a("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])}))],1)],1)],1)])],1)},staticRenderFns:[]}},jGje:function(t,e,a){e=t.exports=a(0)(),e.push([t.i,".ivu-form>.ivu-row[data-v-4559692a]:not(:last-child){margin-bottom:10px}",""])},k5VF:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"SetSuggestLowestPrice",props:{goods:{type:Object,default:function(){return{}}}},data:function(){var t=function(t,e,a){var s=100*e;if(e<0||!Number.isInteger(s))return a(new Error("只能填写2位小数精度的正数"));a()};return{showSettings:!1,updateApi:{api:{path:"/boss/mall/catalog/goods/set-suggest-lowest-price"}},formData:{suggestLowestPrice:this.goods.suggestLowestPrice},rules:{suggestLowestPrice:[{required:!0,type:"number",message:"必须为数字且不能为空",trigger:"blur"},{validator:t,trigger:"blur"}]}}},methods:{postData:function(){var t=this;this.showSettings=!1,bus.$emit("on-loading"),this.$Util.api.post(this.updateApi,{goods_id:this.goods.goodsId,suggest_lowest_price:this.formData.suggestLowestPrice}).then(function(e){bus.$emit("on-loading"),0===e.error_code?(t.goods.suggestLowestPrice=t.formData.suggestLowestPrice,t.$Modal.success({content:"设置成功"}),setTimeout(function(){t.$Modal.remove()},5e3)):bus.$emit("alert-error-tips",e.error_description?e.error_description:"发生了未知的错误")},function(t){bus.$emit("on-loading"),bus.$emit("alert-error-tips",t.message?t.message:"发生了未知的错误")})}}}},kZmh:function(t,e,a){a("MpDH");var s=a("VU/8")(a("rfri"),a("Zlrs"),"data-v-d94a5e3e",null);t.exports=s.exports},mtKl:function(t,e,a){a("6EYd");var s=a("VU/8")(a("Gd8M"),a("RmAq"),"data-v-82e0a588",null);t.exports=s.exports},oBP4:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Card",[a("Tabs",{model:{value:t.currentTab,callback:function(e){t.currentTab=e},expression:"currentTab"}},[a("TabPane",{attrs:{label:"Goods_ID",name:"Goods_ID"}},[a("catalog-check-table",{attrs:{data:t.goodsList,page:t.goodsPage,currentTab:t.currentTab}})],1),t._v(" "),a("TabPane",{attrs:{label:"Spec_ID",name:"Spec_ID"}},[a("catalog-check-table",{attrs:{data:t.specList,page:t.specPage,currentTab:t.currentTab}})],1)],1)],1)},staticRenderFns:[]}},p0sI:function(t,e,a){a("zcx8");var s=a("VU/8")(a("Quzh"),a("35hU"),"data-v-b9097906",null);t.exports=s.exports},rfri:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"SetOrientation",props:{goods:{type:Object,default:function(){return{}}}},data:function(){return{showSettings:!1,updateApi:{api:{path:"/boss/mall/catalog/goods/set-orientation"}},orientationOptions:[{label:"主推",value:1},{label:"次推",value:2},{label:"潜力",value:3},{label:"清库存",value:4},{label:"新品",value:5}]}},computed:{getOrientationText:function(){switch(this.goods.orientation){case 1:return"主推";case 2:return"次推";case 3:return"潜力";case 4:return"清库存";case 5:return"新品"}return""}},methods:{postData:function(){var t=this;this.showSettings=!1,bus.$emit("on-loading"),this.$Util.api.post(this.updateApi,{goods_id:this.goods.goodsId,orientation:this.goods.orientation}).then(function(e){bus.$emit("on-loading"),0===e.error_code?(t.$Modal.success({content:"设置成功"}),setTimeout(function(){t.$Modal.remove()},5e3)):bus.$emit("alert-error-tips",e.error_description?e.error_description:"发生了未知的错误")},function(t){bus.$emit("on-loading"),bus.$emit("alert-error-tips",t.message?t.message:"发生了未知的错误")})}}}},wt5E:function(t,e,a){var s=a("9D2C");"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);a("rjj0")("1ccd1918",s,!0)},zcx8:function(t,e,a){var s=a("DdXh");"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);a("rjj0")("12003f10",s,!0)},zvvm:function(t,e,a){e=t.exports=a(0)(),e.push([t.i,".page-bar[data-v-82e0a588]{display:-ms-flexbox;display:flex;-ms-flex-pack:center;justify-content:center;margin:15px auto 0}",""])}});