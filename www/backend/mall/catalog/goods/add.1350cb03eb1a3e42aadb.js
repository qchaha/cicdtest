webpackJsonp([10],{"+gt4":function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("m-card",[a("h3",{staticStyle:{"margin-bottom":"10px"}},[t._v("类别")]),t._v(" "),a("Form",{attrs:{model:t.formValidate,"label-width":120}},[a("Form-item",{attrs:{required:"",label:"套装"}},[a("Radio-group",{model:{value:t.formValidate.isSuit,callback:function(e){t.$set(t.formValidate,"isSuit",e)},expression:"formValidate.isSuit"}},[a("Radio",{attrs:{label:"is_suit_no"}},[t._v("不是套装")]),t._v(" "),a("Radio",{attrs:{label:"is_suit_yes"}},[t._v("是套装")])],1)],1),t._v(" "),a("Form-item",{attrs:{required:"",label:"品牌"}},[a("Select",{staticStyle:{width:"300px"},attrs:{placeholder:"请选择品牌",clearable:"",filterable:""},model:{value:t.formValidate.brandId,callback:function(e){t.$set(t.formValidate,"brandId",e)},expression:"formValidate.brandId"}},t._l(t.basicBrand,function(e){return a("Option",{key:e.id,attrs:{value:e.id}},[t._v(t._s(e.name))])}))],1),t._v(" "),a("Form-item",{attrs:{required:"",label:"品类"}},[a("Select",{staticStyle:{width:"300px"},attrs:{placeholder:"请选择品类",clearable:"",filterable:""},model:{value:t.formValidate.categoryId,callback:function(e){t.$set(t.formValidate,"categoryId",e)},expression:"formValidate.categoryId"}},t._l(t.basicCategory,function(e){return a("Option",{key:e.id,attrs:{value:e.id}},[t._v(t._s(e.name))])}))],1),t._v(" "),a("Form-item",{attrs:{label:"以前的品牌"}},[a("Select",{staticStyle:{width:"300px"},attrs:{placeholder:"请选择以前的品牌",clearable:"",filterable:""},model:{value:t.formValidate.deprecatedBrandId,callback:function(e){t.$set(t.formValidate,"deprecatedBrandId",e)},expression:"formValidate.deprecatedBrandId"}},t._l(t.brands,function(e){return a("Option",{key:e.brand_id,attrs:{value:e.brand_id}},[t._v(t._s(e.brand_name))])}))],1),t._v(" "),a("Form-item",{attrs:{label:"分类"}},[a("Select",{staticStyle:{width:"300px"},attrs:{placeholder:"请选择分类",multiple:"",clearable:"",filterable:""},model:{value:t.formValidate.deprecatedCategoryIds,callback:function(e){t.$set(t.formValidate,"deprecatedCategoryIds",e)},expression:"formValidate.deprecatedCategoryIds"}},t._l(t.category,function(e){return a("Option",{key:e.cate_id,attrs:{value:e.cate_id}},[t._v(t._s(e.cate_name))])}))],1)],1)],1)},staticRenderFns:[]}},"1hPU":function(t,e,a){var i=a("kNT2");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a("rjj0")("329c37b2",i,!0)},"23eC":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("WH75"),o=a.n(i);e.default={name:"goods",components:{MGoodsForm:o.a},data:function(){return{loadingState:!1}},methods:{changeLoadingState:function(){this.loadingState=!this.loadingState}}}},"9tw0":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"MGoodsPrice",props:{formItem:{type:Object,name:function(){return{}}}},data:function(){return{modal:!1,formValidate:{originalPrice:"",mallPrice:"",silverPrice:"",goldPrice:"",platinumPrice:""}}},watch:{formValidate:{handler:function(t,e){this.$emit("on-data-change",t)},deep:!0},formItem:{handler:function(t,e){if(this.formValidate.originalPrice=t.original_price,this.formValidate.mallPrice=t.mall_price,""!=t.price_grade){var a=JSON.parse(t.price_grade);this.formValidate.silverPrice=a[10],this.formValidate.goldPrice=a[20],this.formValidate.platinumPrice=a[30]}},deep:!0}},methods:{}}},ASjo:function(t,e,a){var i=a("VU/8")(a("ofVE"),a("CcYc"),null,null);t.exports=i.exports},C7dv:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:{systemOperators:{type:Array,name:function(){return[]}},formItem:{type:Object,name:function(){return{}}}},data:function(){return{operators:{},loading:!1,options1:[],options2:[],options3:[],options4:[],formValidate:{operator:"",operatorManager:"",purchaser:"",purchaserManager:""}}},watch:{formValidate:{handler:function(t,e){this.$emit("on-data-change",t)},deep:!0},formItem:{handler:function(t,e){var a=this;if(null!==t.system_operator)var i=setInterval(function(){""!==t.system_operator.operator_id&&t.system_operator.operator_id>0&&(a.formValidate.operator=t.system_operator.operator_id),""!==t.system_operator.operator_manager_id&&t.system_operator.operator_manager_id>0&&(a.formValidate.operatorManager=t.system_operator.operator_manager_id),""!==t.system_operator.purchaser_id&&t.system_operator.purchaser_id>0&&(a.formValidate.purchaser=t.system_operator.purchaser_id),""!==t.system_operator.purchaser_manager_id&&t.system_operator.purchaser_manager_id>0&&(a.formValidate.purchaserManager=t.system_operator.purchaser_manager_id),"[]"!==JSON.stringify(a.options1)&&clearInterval(i)},1e3)},deep:!0},systemOperators:{handler:function(t,e){var a=t.map(function(t){return{id:t.id,value:t.admin_name}});this.options1=a,this.options2=a,this.options3=a,this.options4=a}}},methods:{remoteMethod1:function(t){var e=this,a={};""!==t?(this.loading=!0,setTimeout(function(){e.loading=!1,a=e.systemOperators.map(function(t){return{id:t.id,value:t.admin_name}}),e.options1=a.filter(function(e){return e.value.toLowerCase().indexOf(t.toLowerCase())>-1})},200)):(a=this.systemOperators.map(function(t){return{id:t.id,value:t.admin_name}}),this.options1=a)},remoteMethod2:function(t){var e=this,a={};""!==t?(this.loading=!0,setTimeout(function(){e.loading=!1,a=e.systemOperators.map(function(t){return{id:t.id,value:t.admin_name}}),e.options2=a.filter(function(e){return e.value.toLowerCase().indexOf(t.toLowerCase())>-1})},200)):(a=this.systemOperators.map(function(t){return{id:t.id,value:t.admin_name}}),this.options2=a)},remoteMethod3:function(t){var e=this,a={};""!==t?(this.loading=!0,setTimeout(function(){e.loading=!1,a=e.systemOperators.map(function(t){return{id:t.id,value:t.admin_name}}),e.options3=a.filter(function(e){return e.value.toLowerCase().indexOf(t.toLowerCase())>-1})},200)):(a=this.systemOperators.map(function(t){return{id:t.id,value:t.admin_name}}),this.options3=a)},remoteMethod4:function(t){var e=this,a={};""!==t?(this.loading=!0,setTimeout(function(){e.loading=!1,a=e.systemOperators.map(function(t){return{id:t.id,value:t.admin_name}}),e.options4=a.filter(function(e){return e.value.toLowerCase().indexOf(t.toLowerCase())>-1})},200)):(a=this.systemOperators.map(function(t){return{id:t.id,value:t.admin_name}}),this.options4=a)}}}},CcYc:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("m-card",[a("h3",{staticStyle:{"margin-bottom":"10px"}},[t._v("图文详情")]),t._v(" "),a("Form",{attrs:{model:t.formValidate,"label-width":120,rules:t.validateRules}},[a("Form-item",{attrs:{label:"图文详情",prop:"description"}},[a("Input",{staticStyle:{width:"500px"},attrs:{type:"textarea",autosize:{minRows:6,maxRows:5},placeholder:"请输入...",disabled:""},model:{value:t.formValidate.detailDescription,callback:function(e){t.$set(t.formValidate,"detailDescription",e)},expression:"formValidate.detailDescription"}})],1),t._v(" "),t._l(t.detail,function(e,i){return a("div",{key:i,attrs:{label:""}},["text"===e.type?a("Form-item",{attrs:{label:"详情描述"}},[a("Input",{staticStyle:{width:"500px"},attrs:{type:"textarea",autosize:{minRows:6,maxRows:5},placeholder:"请输入..."},on:{"on-change":t.syncDetailDescription},model:{value:e.content,callback:function(a){t.$set(e,"content",a)},expression:"item.content"}}),t._v(" "),i>0?a("a",{on:{click:function(e){t.moveUpItem(i)}}},[t._v("上移 ")]):t._e(),t._v(" "),i<t.detail.length-1?a("a",{on:{click:function(e){t.moveDownItem(i)}}},[t._v("下移 ")]):t._e(),t._v(" "),a("a",{on:{click:function(e){t.handleDeleteItem(i)}}},[t._v("删除 ")])],1):t._e(),t._v(" "),"image"===e.type?a("Form-item",{attrs:{label:"添加图片"}},[i>0?a("a",{on:{click:function(e){t.moveUpItem(i)}}},[t._v("上移 ")]):t._e(),t._v(" "),i<t.detail.length-1?a("a",{on:{click:function(e){t.moveDownItem(i)}}},[t._v("下移 ")]):t._e(),t._v(" "),a("a",{on:{click:function(e){t.handleDeleteItem(i)}}},[t._v("删除 ")]),t._v(" "),a("m-upload-image",{attrs:{"default-images":e.content,"obj-type":"goodsdesc/origin",sortable:"",multiple:""},on:{"on-success":function(e){t.syncDetailImage(e,i)}}})],1):t._e(),t._v(" "),"video"===e.type?a("Form-item",{attrs:{label:"添加视频"}},[i>0?a("a",{on:{click:function(e){t.moveUpItem(i)}}},[t._v("上移 ")]):t._e(),t._v(" "),i<t.detail.length-1?a("a",{on:{click:function(e){t.moveDownItem(i)}}},[t._v("下移 ")]):t._e(),t._v(" "),a("a",{on:{click:function(e){t.handleDeleteItem(i)}}},[t._v("删除 ")]),t._v(" "),a("p",[a("a",{on:{click:function(e){t.handleAddVideo(i)}}},[t._v("添加视频")]),t._v(" "),a("span",{staticStyle:{"padding-left":"10px",color:"grey"}},[t._v("建议采用横屏视频，大小不超过50M")])]),t._v(" "),t._l(e.content,function(e,o){return a("div",{key:i,attrs:{label:""}},[a("m-upload-image",{attrs:{"default-images":[{url:e.cover_path}],"obj-type":"goods_video_cover"},on:{"on-success":function(a){t.syncVideoImage(a,i,e.id,o)}}}),t._v(" "),a("Input",{staticStyle:{width:"80px"},attrs:{placeholder:"视频ID",disabled:""},model:{value:e.id,callback:function(a){t.$set(e,"id",a)},expression:"video.id"}}),t._v(" "),a("Input",{staticStyle:{width:"300px"},attrs:{placeholder:"视频源URL",disabled:0==e.id},on:{"on-blur":function(a){t.syncVideoPath(i,e.id,o)}},model:{value:e.video_path,callback:function(a){t.$set(e,"video_path",a)},expression:"video.video_path"}}),t._v(" "),a("a",{on:{click:function(e){t.handleDeleteVideo(i,o)}}},[t._v("删除 ")])],1)})],2):t._e()],1)}),t._v(" "),a("Form-item",{attrs:{id:"addBtn",label:"图文详情"}},[a("Button",{attrs:{type:"primary"},on:{click:t.addTextArea}},[t._v("添加文本")]),t._v(" "),a("Button",{attrs:{type:"primary"},on:{click:t.addTextImage}},[t._v("添加图片")]),t._v(" "),a("Button",{attrs:{type:"primary"},on:{click:t.addTextVideo}},[t._v("添加视频")])],1),t._v(" "),a("Form-item",{attrs:{label:"测评报告ID"}},[a("Input",{staticStyle:{width:"300px"},attrs:{placeholder:""},model:{value:t.formValidate.topicId,callback:function(e){t.$set(t.formValidate,"topicId",e)},expression:"formValidate.topicId"}})],1)],2)],1)},staticRenderFns:[]}},DUzS:function(t,e,a){var i=a("VU/8")(a("23eC"),a("xt9Q"),null,null);t.exports=i.exports},Ju9k:function(t,e,a){var i=a("VU/8")(a("KfYf"),a("o31E"),null,null);t.exports=i.exports},KfYf:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"MGoodsColorTag",props:{formItem:{type:Object,name:function(){return{}}}},data:function(){var t=this;return{columns:[{title:"颜色标签",key:"color_tag_name"},{title:"展示文案（不填则展示标签名）",key:"name"},{title:"排序",key:"sort"},{title:"排序操作",key:"action",align:"center",width:120,render:function(e,a){var i=[];return 0===a.index?i.push(e("Button",{attrs:{type:"text",size:"small"},style:{color:"#3366FF"},on:{click:function(){t.down(a.index)}}},"下移")):a.index===t.arrayLength-1?i.push(e("Button",{attrs:{type:"text",size:"small"},style:{color:"#3366FF"},on:{click:function(){t.up(a.index)}}},"上移")):(i.push(e("Button",{attrs:{type:"text",size:"small"},style:{color:"#3366FF"},on:{click:function(){t.up(a.index)}}},"上移")),i.push(e("Button",{attrs:{type:"text",size:"small"},style:{color:"#3366FF"},on:{click:function(){t.down(a.index)}}},"下移"))),e("div",{},i)}}],data:[],arrayLength:0}},watch:{data:{handler:function(t,e){this.$emit("on-data-change",t)},deep:!0},formItem:{handler:function(t,e){var a=this;a.data=t.color_tags,a.arrayLength=t.color_tags.length},deep:!0}},methods:{up:function(t){var e=this.data.splice(t-1,1)[0];this.data.splice(t,0,e);for(var a=0;a<this.data.length;a++)this.data[a].sort=a+1},down:function(t){var e=this.data.splice(t+1,1)[0];this.data.splice(t,0,e);for(var a=0;a<this.data.length;a++)this.data[a].sort=a+1},remove:function(t){this.array.splice(t,1)}}}},WH75:function(t,e,a){a("pg9y");var i=a("VU/8")(a("zdkh"),a("d3AZ"),null,null);t.exports=i.exports},WoZQ:function(t,e,a){var i=a("VU/8")(a("XllW"),a("eDxa"),null,null);t.exports=i.exports},X0EP:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"MGoodsInfo",props:{warehouse:{type:Array,name:function(){return[]}},marks:{type:Array,name:function(){return[]}},formItem:{type:Object,name:function(){return{}}}},data:function(){return{modal:!1,formValidate:{goodsName:"",shortName:"",middleName:"",briefDescription:"",warehouseId:"",startTime:"",coverVideo:{location:"",url:""},goodsMarkId:"",bottomMark:"",coverImages:[],startTimeOn:"start_time_now",promotionTips:"",attributeTag:"",isDaily:"is_daily_yes"},value1:"",isShow:"",locationItem:[],defaultMark:[],markImages:[],markImage:""}},watch:{formValidate:{handler:function(t,e){this.$emit("on-data-change",t)},deep:!0},formItem:{handler:function(t,e){var a=this;t.start_time&&(this.formValidate.startTimeOn="start_time_crontab",this.isShow=!0),t.cover_images.map(function(t){a.formValidate.coverImages.push({url:t.image_url.origin})}),null!=t.bottom_mark&&(this.formValidate.bottomMark=t.bottom_mark.s.origin);for(var i=1;i<=t.cover_images.length;i++)this.locationItem.push(i);null!=t.cover_video&&(this.formValidate.coverVideo.location=t.cover_video.sort_order,this.formValidate.coverVideo.url=t.cover_video.video_path),this.formValidate.goodsName=t.goods_name,this.formValidate.shortName=t.short_name?t.short_name:"",this.formValidate.middleName=t.middle_name?t.middle_name:"",this.formValidate.briefDescription=t.brief_description,this.formValidate.warehouseId=t.warehouse_id,this.formValidate.startTime=t.start_time?t.start_time:"",this.formValidate.goodsMarkId=t.goods_mark_id,this.formValidate.promotionTips=t.promotion_tips,this.formValidate.attributeTag=t.attribute_tag,this.formValidate.isDaily=t.is_daily?"is_daily_yes":"is_daily_no"},deep:!0},marks:{handler:function(t,e){for(var a=1;a<=t.length;a++)t[a]&&(this.markImages[t[a].id]=t[a].image.origin);this.markImage=this.markImages[this.formItem.goods_mark_id]}}},methods:{changeMarkId:function(t){this.markImage=this.markImages[t]},syncCoverImage:function(t){this.formValidate.coverImages=t,this.locationItem=[];for(var e=1;e<=this.formValidate.coverImages.length;e++)this.locationItem.push(e)},syncBottomMarkImage:function(t){this.formValidate.bottomMark=t[0].url},handleStartTime:function(t){this.isShow="start_time_crontab"==t}}}},XllW:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"MGoodsLimit",props:{formItem:{type:Object,name:function(){return{}}}},data:function(){return{modal:!1,formValidate:{isPrivate:"is_private_no",isTop:!1,baseSoldCount:0,canUseCoupon:"can_use_yes",canCod:"can_cod_yes",isFreeShipment:"is_free_shipment_no",peopleRange:"",buyCountLimitStartTimeOn:"start_time_now",buyCountLimitEndTimeOn:"end_time_forever",buyCountLimitStartTime:"",buyCountLimitEndTime:"",buyCountLimit:"",buyCountLimitOn:!1,recommendWeight:0,receiverData:{}},isStartTimeShow:"",isEndTimeShow:"",isLimitOn:"",isRecommend:"",value1:"",value2:"",defaultReceiverData:{receive_type:1,value:""}}},watch:{formValidate:{handler:function(t,e){this.$emit("on-data-change",t)},deep:!0},formItem:{handler:function(t,e){if(this.formValidate.isPrivate=t.is_private?"is_private_yes":"is_private_no",this.formValidate.isTop=!!t.is_top,this.formValidate.isTop?this.isTop=!0:this.isTop=!1,this.formValidate.baseSoldCount=t.base_sold_count?t.base_sold_count:0,this.formValidate.canUseCoupon=t.can_use_coupon?"can_use_yes":"can_use_no",this.formValidate.canCod=t.can_cod?"can_cod_yes":"can_cod_no",this.formValidate.isFreeShipment=t.is_free_shipment?"is_free_shipment_yes":"is_free_shipment_no",this.formValidate.buyCountLimit=t.buy_count_limit,this.formValidate.recommendWeight=t.recommend_weight,0!=t.buy_count_limit){if(this.isLimitOn=!0,this.formValidate.buyCountLimitOn=!0,""!=t.buy_count_limit_start_time&&(new Date).getTime()<1e3*t.buy_count_limit_start_time){this.formValidate.buyCountLimitStartTimeOn="start_time_crontab";var a=new Date;a.setTime(1e3*t.buy_count_limit_start_time),this.formValidate.buyCountLimitStartTime=a,this.isStartTimeShow=!0}else this.formValidate.buyCountLimitStartTimeOn="start_time_now";if(""!=t.buy_count_limit_end_time){this.formValidate.buyCountLimitEndTimeOn="end_time_crontab";var i=new Date;i.setTime(1e3*t.buy_count_limit_end_time),this.formValidate.buyCountLimitEndTime=i,this.isEndTimeShow=!0}else this.formValidate.buyCountLimitEndTimeOn="end_time_forever";this.formValidate.buyCountLimit=t.buy_count_limit}else this.isLimitOn=!1,this.formValidate.buyCountLimitOn=!1;if(null!==t.customer_crowd){var o=t.customer_crowd.limit_value;""===o?(this.defaultReceiverData.receive_type=1,this.defaultReceiverData.value=""):o.indexOf("UID")>=0?(this.defaultReceiverData.receive_type=2,this.defaultReceiverData.value=t.customer_crowd.limit_value,this.defaultReceiverData.app_route=t.customer_crowd.app_route):o.indexOf("TAG")>=0&&(this.defaultReceiverData.receive_type=3,this.defaultReceiverData.value=t.customer_crowd.limit_value,this.defaultReceiverData.app_route=t.customer_crowd.app_route)}else this.defaultReceiverData.receive_type=1,this.defaultReceiverData.value="";this.formValidate.receiverData=this.defaultReceiverData},deep:!0}},methods:{handleStartTime:function(t){this.isStartTimeShow="start_time_now"!=t},handleEndTime:function(t){this.isEndTimeShow="end_time_forever"!=t},handleLimit:function(t){this.isLimitOn=!0===t},handleIsTop:function(t){this.isTop=!0===t},handleDataChange:function(t){this.formValidate.receiverData=t}}}},Y8tV:function(t,e,a){a("1hPU");var i=a("VU/8")(a("C7dv"),a("raGN"),"data-v-67f28f9a",null);t.exports=i.exports},YWI7:function(t,e,a){var i=a("VU/8")(a("cTc+"),a("gqz4"),null,null);t.exports=i.exports},"cTc+":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"MGoodsRules",props:{formItem:{type:Object,name:function(){return{}}}},data:function(){return{modal:!1,formValidate:{specSelectMode:"mode_one",items:[{value:""}]},isShow:!0}},watch:{formValidate:{handler:function(t,e){this.$emit("on-data-change",t)},deep:!0},formItem:{handler:function(t,e){var a=this;0==t.spec_select_mode?(this.formValidate.specSelectMode="mode_one",this.isShow=!0):(this.formValidate.specSelectMode="mode_many",this.isShow=!1);var i=[t.spec_name_1,t.spec_name_2,t.spec_name_3,t.spec_name_4,t.spec_name_5];a.formValidate.items=[],i.map(function(t){""!=t&&a.formValidate.items.push({value:t})})},deep:!0}},methods:{handleAdd:function(){this.formValidate.items.length<=4?this.formValidate.items.push({value:""}):alert("只能添加5个规格")},handleRemove:function(t){t>=1?this.formValidate.items.splice(t,1):alert("至少要填写一个规格")},changeMode:function(){"mode_many"===this.formValidate.specSelectMode?(this.formValidate.items.splice(1),this.isShow=!1):this.isShow=!0}}}},d3AZ:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("m-page",[a("Menu",{attrs:{mode:"horizontal","active-name":"1"}},[a("div",{staticClass:"layout-assistant"},[a("Menu-item",{attrs:{name:"1"}},[a("a",{staticClass:"demo-badge",attrs:{href:"javascript:void(0);"},on:{click:function(e){t.goAnchor("#sys-div")}}},[t._v("系统信息")])]),t._v(" "),a("Menu-item",{attrs:{name:"2"}},[a("Badge",{attrs:{count:t.operatorBadgeCount}},[a("a",{staticClass:"demo-badge",attrs:{href:"javascript:void(0);"},on:{click:function(e){t.goAnchor("#sys-operator-div")}}},[t._v("管理员")])])],1),t._v(" "),a("Menu-item",{attrs:{name:"3"}},[a("Badge",{attrs:{count:t.infoBadgeCount}},[a("a",{staticClass:"demo-badge",attrs:{href:"javascript:void(0);"},on:{click:function(e){t.goAnchor("#info-div")}}},[t._v("基础信息")])])],1),t._v(" "),a("Menu-item",{attrs:{name:"4"}},[a("Badge",{attrs:{count:t.imageBadgeCount}},[a("a",{staticClass:"demo-badge",attrs:{href:"javascript:void(0);"},on:{click:function(e){t.goAnchor("#image-div")}}},[t._v("图文详情")])])],1),t._v(" "),a("Menu-item",{attrs:{name:"5"}},[a("Badge",{attrs:{count:t.priceBadgeCount}},[a("a",{staticClass:"demo-badge",attrs:{href:"javascript:void(0);"},on:{click:function(e){t.goAnchor("#price-div")}}},[t._v("价格")])])],1),t._v(" "),a("Menu-item",{attrs:{name:"6"}},[a("Badge",{attrs:{count:t.categoryBadgeCount}},[a("a",{staticClass:"demo-badge",attrs:{href:"javascript:void(0);"},on:{click:function(e){t.goAnchor("#category-div")}}},[t._v("类别")])])],1),t._v(" "),a("Menu-item",{attrs:{name:"7"}},[a("Badge",{attrs:{count:t.ruleBadgeCount}},[a("a",{staticClass:"demo-badge",attrs:{href:"javascript:void(0);"},on:{click:function(e){t.goAnchor("#rule-div")}}},[t._v("定义规格")])])],1),t._v(" "),a("Menu-item",{attrs:{name:"8"}},[a("Badge",{attrs:{count:t.colorTagBadgeCount}},[a("a",{staticClass:"demo-badge",attrs:{href:"javascript:void(0);"},on:{click:function(e){t.goAnchor("#color-tag-div")}}},[t._v("定义颜色标签")])])],1),t._v(" "),a("Menu-item",{attrs:{name:"9"}},[a("Badge",{attrs:{count:t.limitBadgeCount}},[a("a",{staticClass:"demo-badge",attrs:{href:"javascript:void(0);"},on:{click:function(e){t.goAnchor("#limit-div")}}},[t._v("推广限制")])])],1)],1)]),t._v(" "),a("m-card",[a("div",{staticStyle:{position:"relative"},attrs:{id:"sys-div"}},[a("h3",{staticStyle:{"margin-bottom":"10px"}},[t._v("系统信息")]),t._v(" "),a("p",[t._v("Goods_ID："+t._s(t.id))]),t._v(" "),"edit"==this.usage?a("p",[t._v("状态："+t._s(t.stateName))]):t._e(),t._v(" "),"edit"==this.usage?a("p",[t._v("创建时间："+t._s(t.formItem.create_time))]):t._e(),t._v(" "),"edit"==this.usage?a("p",[t._v("首次上架时间："+t._s(t.formItem.first_on_shelf_time))]):t._e(),t._v(" "),"edit"==this.usage?a("p",[t._v("APP路由：meijiabang://goods_details?goods_id="+t._s(t.id))]):t._e(),t._v(" "),a("div",{staticStyle:{position:"absolute",right:"20px",top:"20px"}},["edit"==this.usage?a("Button",{attrs:{type:"ghost"},on:{click:function(e){return e.preventDefault(),t.toGroupon(e)}}},[t._v("添加拼团")]):t._e(),t._v(" "),"edit"==this.usage?a("Button",{attrs:{type:"ghost"},on:{click:function(e){return e.preventDefault(),t.toFlashSale(e)}}},[t._v("转为闪购")]):t._e(),t._v(" "),"edit"==this.usage?a("Button",{directives:[{name:"show",rawName:"v-show",value:t.onSale,expression:"onSale"}],staticClass:"blue-btn",attrs:{type:"ghost"},on:{click:function(e){t.setStatus(1)}}},[t._v("上架\n\n\n                ")]):t._e(),t._v(" "),"edit"==this.usage?a("Button",{directives:[{name:"show",rawName:"v-show",value:t.offSale,expression:"offSale"}],staticClass:"delete-btn",attrs:{type:"ghost"},on:{click:function(e){t.setStatus(0)}}},[t._v("下架\n\n\n                ")]):t._e(),t._v(" "),"edit"==this.usage?a("Button",{directives:[{name:"show",rawName:"v-show",value:t.deleteStatus,expression:"deleteStatus"}],staticClass:"delete-btn",attrs:{type:"ghost"},on:{click:function(e){t.setStatus(-1)}}},[t._v("废弃\n\n\n                ")]):t._e(),t._v(" "),"edit"==this.usage?a("Button",{directives:[{name:"show",rawName:"v-show",value:t.reOffSale,expression:"reOffSale"}],staticClass:"blue-btn",attrs:{type:"ghost"},on:{click:function(e){t.setStatus(0)}}},[t._v("恢复\n\n\n                ")]):t._e(),t._v(" "),a("Button",{attrs:{type:"primary"},on:{click:t.submit}},[t._v("提交")])],1)])]),t._v(" "),a("div",{attrs:{id:"sys-operator-div"}},[a("m-system-operator",{attrs:{formItem:t.formItem,systemOperators:t.systemOperators},on:{"on-data-change":t.getSystemOperatorData}})],1),t._v(" "),a("div",{attrs:{id:"info-div"}},[a("m-goods-info",{attrs:{warehouse:t.warehouse,marks:t.marks,formItem:t.formItem},on:{"on-data-change":t.getGoodsInfoData}})],1),t._v(" "),a("div",{attrs:{id:"image-div"}},[a("m-goods-image",{attrs:{formItem:t.formItem},on:{"on-data-change":t.getGoodsImageData}})],1),t._v(" "),a("div",{attrs:{id:"price-div"}},[a("m-goods-price",{attrs:{formItem:t.formItem},on:{"on-data-change":t.getGoodsPriceData}})],1),t._v(" "),a("div",{attrs:{id:"category-div"}},[a("m-goods-category",{attrs:{formItem:t.formItem,basicBrand:t.basicBrand,brands:t.brands,category:t.category,basicCategory:t.basicCategory},on:{"on-data-change":t.getGoodsCategoryData}})],1),t._v(" "),a("div",{attrs:{id:"rule-div"}},[a("m-goods-rules",{attrs:{formItem:t.formItem},on:{"on-data-change":t.getGoodsRulesData}})],1),t._v(" "),a("div",{attrs:{id:"color-tag-div"}},[a("m-goods-color-tag",{attrs:{formItem:t.formItem},on:{"on-data-change":t.getGoodsColorTagData}})],1),t._v(" "),a("div",{attrs:{id:"limit-div"}},[a("m-goods-limit",{attrs:{formItem:t.formItem},on:{"on-data-change":t.getGoodsLimitData}})],1),t._v(" "),a("Back-top",{attrs:{height:100,bottom:200}},[a("div",{staticClass:"top"},[t._v("返回顶端")])])],1)},staticRenderFns:[]}},depY:function(t,e,a){var i=a("VU/8")(a("9tw0"),a("nvv+"),null,null);t.exports=i.exports},eDxa:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("m-card",[a("h3",{staticStyle:{"margin-bottom":"10px"}},[t._v("推广及限制")]),t._v(" "),a("Form",{attrs:{model:t.formValidate,"label-width":120}},[a("div",{staticStyle:{display:"inline-block","background-color":"#eee",padding:"20px",width:"400px"}},[a("h5",[t._v("推广")]),t._v(" "),a("Form-item",{attrs:{required:"",label:"可见性"}},[a("Radio-group",{model:{value:t.formValidate.isPrivate,callback:function(e){t.$set(t.formValidate,"isPrivate",e)},expression:"formValidate.isPrivate"}},[a("Radio",{attrs:{label:"is_private_no"}},[t._v("可见")]),t._v(" "),a("Radio",{attrs:{label:"is_private_yes"}},[t._v("不可见")])],1)],1),t._v(" "),a("Form-item",{attrs:{required:"",label:"置顶"}},[a("Row",[a("Col",{attrs:{span:"5"}},[a("i-switch",{on:{"on-change":t.handleIsTop},model:{value:t.formValidate.isTop,callback:function(e){t.$set(t.formValidate,"isTop",e)},expression:"formValidate.isTop"}},[a("span",{attrs:{slot:"open"},slot:"open"},[t._v("开")]),t._v(" "),a("span",{attrs:{slot:"close"},slot:"close"},[t._v("关")])])],1),t._v(" "),a("Col",{attrs:{span:"5"}},[t.isTop?a("Input",{staticStyle:{width:"100px"},model:{value:t.formValidate.recommendWeight,callback:function(e){t.$set(t.formValidate,"recommendWeight",e)},expression:"formValidate.recommendWeight"}},[a("span",{attrs:{slot:"prepend"},slot:"prepend"},[t._v("排序")])]):t._e()],1)],1)],1),t._v(" "),a("Form-item",{attrs:{required:"",label:"销量基数"}},[a("Input",{staticStyle:{width:"100px"},model:{value:t.formValidate.baseSoldCount,callback:function(e){t.$set(t.formValidate,"baseSoldCount",e)},expression:"formValidate.baseSoldCount"}}),a("span",{staticStyle:{"padding-left":"10px",color:"grey"}},[t._v("请填写非负整数")])],1)],1),t._v(" "),a("div",{staticStyle:{display:"inline-block","background-color":"#eee","margin-left":"100px",padding:"20px",width:"400px"}},[a("h5",[t._v("支付限制")]),t._v(" "),a("Form-item",{attrs:{required:"",label:"邮费"}},[a("Radio-group",{model:{value:t.formValidate.isFreeShipment,callback:function(e){t.$set(t.formValidate,"isFreeShipment",e)},expression:"formValidate.isFreeShipment"}},[a("Radio",{attrs:{label:"is_free_shipment_yes"}},[t._v("包邮")]),t._v(" "),a("Radio",{attrs:{label:"is_free_shipment_no"}},[t._v("不包邮")])],1)],1),t._v(" "),a("Form-item",{attrs:{required:"",label:"货到付款"}},[a("Radio-group",{model:{value:t.formValidate.canCod,callback:function(e){t.$set(t.formValidate,"canCod",e)},expression:"formValidate.canCod"}},[a("Radio",{attrs:{label:"can_cod_yes"}},[t._v("支持")]),t._v(" "),a("Radio",{attrs:{label:"can_cod_no"}},[t._v("不支持")])],1)],1),t._v(" "),a("Form-item",{attrs:{required:"",label:"优惠券"}},[a("Radio-group",{model:{value:t.formValidate.canUseCoupon,callback:function(e){t.$set(t.formValidate,"canUseCoupon",e)},expression:"formValidate.canUseCoupon"}},[a("Radio",{attrs:{label:"can_use_yes"}},[t._v("可用")]),t._v(" "),a("Radio",{attrs:{label:"can_use_no"}},[t._v("不可用")])],1)],1)],1),t._v(" "),a("div",{staticStyle:{"background-color":"#eee",padding:"20px","margin-top":"20px"}},[a("Form-item",{attrs:{required:"",label:"购买数量限制"}},[a("i-switch",{on:{"on-change":t.handleLimit},model:{value:t.formValidate.buyCountLimitOn,callback:function(e){t.$set(t.formValidate,"buyCountLimitOn",e)},expression:"formValidate.buyCountLimitOn"}},[a("span",{attrs:{slot:"open"},slot:"open"},[t._v("开")]),t._v(" "),a("span",{attrs:{slot:"close"},slot:"close"},[t._v("关")])])],1),t._v(" "),t.isLimitOn?a("div",[a("Form-item",{attrs:{required:"",label:"限制开始时间"}},[a("Row",[a("Col",{attrs:{span:"5"}},[a("Radio-group",{on:{"on-change":t.handleStartTime},model:{value:t.formValidate.buyCountLimitStartTimeOn,callback:function(e){t.$set(t.formValidate,"buyCountLimitStartTimeOn",e)},expression:"formValidate.buyCountLimitStartTimeOn"}},[a("Radio",{attrs:{label:"start_time_now"}},[t._v("立即开始")]),t._v(" "),a("Radio",{attrs:{label:"start_time_crontab"}},[t._v("定时开始")])],1)],1),t._v(" "),a("Col",{attrs:{span:"2"}},[t.isStartTimeShow?a("Date-picker",{staticStyle:{width:"200px"},attrs:{value:t.value1,format:"yyyy-MM-dd HH:mm:ss",type:"datetime",placeholder:"选择日期"},model:{value:t.formValidate.buyCountLimitStartTime,callback:function(e){t.$set(t.formValidate,"buyCountLimitStartTime",e)},expression:"formValidate.buyCountLimitStartTime"}}):t._e()],1)],1)],1),t._v(" "),a("Form-item",{attrs:{required:"",label:"限制结束时间"}},[a("Row",[a("Col",{attrs:{span:"5"}},[a("Radio-group",{on:{"on-change":t.handleEndTime},model:{value:t.formValidate.buyCountLimitEndTimeOn,callback:function(e){t.$set(t.formValidate,"buyCountLimitEndTimeOn",e)},expression:"formValidate.buyCountLimitEndTimeOn"}},[a("Radio",{attrs:{label:"end_time_forever"}},[t._v("无限期")]),t._v(" "),a("Radio",{attrs:{label:"end_time_crontab"}},[t._v("定时结束")])],1)],1),t._v(" "),a("Col",{attrs:{span:"5"}},[t.isEndTimeShow?a("Date-picker",{staticStyle:{width:"200px"},attrs:{value:t.value2,format:"yyyy-MM-dd HH:mm:ss",type:"datetime",placeholder:"选择日期"},model:{value:t.formValidate.buyCountLimitEndTime,callback:function(e){t.$set(t.formValidate,"buyCountLimitEndTime",e)},expression:"formValidate.buyCountLimitEndTime"}}):t._e()],1)],1)],1),t._v(" "),a("Form-item",{attrs:{required:"",label:"限制数量"}},[a("Input",{staticStyle:{width:"100px"},model:{value:t.formValidate.buyCountLimit,callback:function(e){t.$set(t.formValidate,"buyCountLimit",e)},expression:"formValidate.buyCountLimit"}}),a("span",{staticStyle:{"padding-left":"10px",color:"grey"}},[t._v("正整数")])],1)],1):t._e()],1),t._v(" "),a("div",{staticStyle:{"background-color":"#eee",padding:"20px","margin-top":"20px"}},[a("m-user-selected",{attrs:{"receiver-data":t.defaultReceiverData},on:{"on-data-change":t.handleDataChange}})],1)])],1)},staticRenderFns:[]}},eLgO:function(t,e,a){e=t.exports=a(0)(),e.push([t.i,".delete-btn{color:#ed3f14;border-color:#ed3f14}.blue-btn{color:#2d8cf0;border-color:#2d8cf0}.top{padding:10px;background:rgba(0,153,229,.7);color:#fff;text-align:center;border-radius:2px}",""])},eV8O:function(t,e,a){var i=a("VU/8")(a("ldr1"),a("+gt4"),null,null);t.exports=i.exports},gqz4:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("m-card",[a("h3",{staticStyle:{"margin-bottom":"10px"}},[t._v("定义规格")]),t._v(" "),a("Form",{attrs:{model:t.formValidate,"label-width":120}},[a("Form-item",{attrs:{required:"",label:"规格模式"}},[a("Radio-group",{on:{"on-change":t.changeMode},model:{value:t.formValidate.specSelectMode,callback:function(e){t.$set(t.formValidate,"specSelectMode",e)},expression:"formValidate.specSelectMode"}},[a("Radio",{attrs:{label:"mode_one"}},[t._v("普通模式")]),t._v(" "),a("Radio",{attrs:{label:"mode_many"}},[t._v("有图多选模式")])],1)],1),t._v(" "),t._l(t.formValidate.items,function(e,i){return a("Form-item",{key:i,attrs:{required:"",label:"规格名称"+(i+1)}},[a("Row",[a("Col",{attrs:{span:"4"}},[a("Input",{staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"请输入..."},model:{value:e.value,callback:function(a){t.$set(e,"value",a)},expression:"item.value"}})],1),t._v(" "),a("Col",{attrs:{span:"4",offset:"1"}},[a("Button",{attrs:{type:"ghost"},on:{click:function(e){t.handleRemove(i)}}},[t._v("删除")])],1)],1)],1)}),t._v(" "),a("Form-item",{attrs:{label:""}},[t.isShow?a("p",[a("a",{on:{click:t.handleAdd}},[t._v("添加规格名称")])]):t._e()])],2)],1)},staticRenderFns:[]}},kNT2:function(t,e,a){e=t.exports=a(0)(),e.push([t.i,".required-input[data-v-67f28f9a]{position:relative}.required-input[data-v-67f28f9a]:before{position:absolute;top:10px;left:-10px;content:'*';display:block;line-height:1;font-family:SimSun;font-size:12px;color:#ed3f14}",""])},ldr1:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"MGoodsCategory",props:{basicBrand:{type:Array,name:function(){return[]}},brands:{type:Array,name:function(){return[]}},basicCategory:{type:Array,name:function(){return[]}},category:{type:Array,name:function(){return[]}},formItem:{type:Object,name:function(){return{}}}},data:function(){return{modal:!1,formValidate:{isSuit:"is_suit_no",brandId:"",categoryId:"",deprecatedBrandId:"",deprecatedCategoryIds:[]}}},watch:{formValidate:{handler:function(t,e){this.$emit("on-data-change",t)},deep:!0},formItem:{handler:function(t,e){var a=this,i=[];""!=t.deprecated_category_ids&&(i=t.deprecated_category_ids.split(",")),i.map(function(t){a.formValidate.deprecatedCategoryIds.push(parseInt(t))}),this.formValidate.isSuit=t.is_suit?"is_suit_yes":"is_suit_no",this.formValidate.brandId=t.brand_id,this.formValidate.categoryId=t.category_id,this.formValidate.deprecatedBrandId=t.deprecated_brand_id},deep:!0}},methods:{}}},"nvv+":function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("m-card",[a("h3",{staticStyle:{"margin-bottom":"10px"}},[t._v("价格")]),t._v(" "),a("Form",{attrs:{model:t.formValidate,"label-width":120}},[a("Form-item",{attrs:{required:"",label:"原价"}},[a("Input",{staticStyle:{width:"200px"},attrs:{placeholder:""},model:{value:t.formValidate.originalPrice,callback:function(e){t.$set(t.formValidate,"originalPrice",e)},expression:"formValidate.originalPrice"}}),a("span",{staticStyle:{"padding-left":"10px",color:"grey"}},[t._v("2位小数")])],1),t._v(" "),a("Form-item",{attrs:{required:"",label:"商城价"}},[a("Input",{staticStyle:{width:"200px"},attrs:{placeholder:""},model:{value:t.formValidate.mallPrice,callback:function(e){t.$set(t.formValidate,"mallPrice",e)},expression:"formValidate.mallPrice"}}),a("span",{staticStyle:{"padding-left":"10px",color:"grey"}},[t._v("2位小数")])],1),t._v(" "),a("Form-item",{attrs:{label:"银牌价"}},[a("Input",{staticStyle:{width:"200px"},attrs:{placeholder:""},model:{value:t.formValidate.silverPrice,callback:function(e){t.$set(t.formValidate,"silverPrice",e)},expression:"formValidate.silverPrice"}}),a("span",{staticStyle:{"padding-left":"10px",color:"grey"}},[t._v("2位小数，不填则默认商城价")])],1),t._v(" "),a("Form-item",{attrs:{label:"金牌价"}},[a("Input",{staticStyle:{width:"200px"},attrs:{placeholder:""},model:{value:t.formValidate.goldPrice,callback:function(e){t.$set(t.formValidate,"goldPrice",e)},expression:"formValidate.goldPrice"}}),a("span",{staticStyle:{"padding-left":"10px",color:"grey"}},[t._v("2位小数，不填则默认商城价")])],1),t._v(" "),a("Form-item",{attrs:{label:"白金价"}},[a("Input",{staticStyle:{width:"200px"},attrs:{placeholder:""},model:{value:t.formValidate.platinumPrice,callback:function(e){t.$set(t.formValidate,"platinumPrice",e)},expression:"formValidate.platinumPrice"}}),a("span",{staticStyle:{"padding-left":"10px",color:"grey"}},[t._v("2位小数，不填则默认商城价")])],1)],1)],1)},staticRenderFns:[]}},o31E:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("m-card",[a("Table",{attrs:{height:"",columns:t.columns,data:t.data}})],1)},staticRenderFns:[]}},oKXi:function(t,e,a){var i=a("VU/8")(a("X0EP"),a("u+j6"),null,null);t.exports=i.exports},ofVE:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={createGoodsDetailImage:{api:{path:"/boss/mall/catalog/goods/create-goods-detail-image"}},createGoodsVideoImage:{api:{path:"/boss/mall/catalog/goods/create-goods-video-image"}}};e.default={name:"MGoodsImage",props:{formItem:{type:Object,name:function(){return{}}}},data:function(){return{modal:!1,formValidate:{goodsId:"",detailDescription:"",detailImages:[],detailVideos:[{id:"",location:"",video_path:"",cover_path:""}],topicId:""},detail:[],detailImagesIds:{},locationItem:[],validateRules:{description:[{required:!0,type:"string",message:"描述不能为空",trigger:"blur"}]}}},watch:{formValidate:{handler:function(t,e){var a=this;setTimeout(function(){a.$emit("on-data-change",t)},500)},deep:!0},formItem:{handler:function(t,e){var a=this;this.formValidate.goodsId=t.goods_id,this.formValidate.detailDescription=t.detail_description,this.formValidate.topicId=t.topic_id;for(var i=[],o=0;o<t.detail_images.length;o++){var r=t.detail_images[o].image_url.image_id,s=t.detail_images[o].image_url.origin;i[r]=s,a.formValidate.detailImages.push({image_id:r,url:s}),a.locationItem.push(o+1),a.detailImagesIds[s]=r}var n=[];this.formValidate.detailVideos=[];for(var o=0;o<t.detail_videos.length;o++)a.formValidate.detailVideos.push({id:t.detail_videos[o].id,location:t.detail_videos[o].location,video_path:t.detail_videos[o].video_path,cover_path:t.detail_videos[o].cover_path}),n[t.detail_videos[o].id]={location:t.detail_videos[o].location,video_path:t.detail_videos[o].video_path,cover_path:t.detail_videos[o].cover_path};a.detail=[];for(var d=t.detail_description.replace(/\[IMG(\d+)]/gm,"__[IMG$1]__").replace(/\[VIDEO(\d+)]/gm,"__[VIDEO$1]__").replace(/____/g,"__"),l=d.split("__"),c=/\[IMG\d+]/,m=/\[VIDEO\d+]/,u="",p="",f="",h="",_="",g="",v="",y=-1,o=0;o<l.length;o++)try{c.test(l[o])?(u=l[o].replace("[IMG","").replace(/](\r\n)*/,""),void 0!==i[u]&&(p=void 0===i[u]?"":i[u],"image"!==v&&(y++,a.detail[y]=[],a.detail[y].type="image",a.detail[y].content=[]),a.detail[y].content.push({image_id:u,url:p}),v="image")):m.test(l[o])?(f=l[o].replace("[VIDEO","").replace(/](\r\n)*/,""),void 0!==n[f]&&(h=void 0===n[f].location?"":n[f].location,_=void 0===n[f].video_path?"":n[f].video_path,g=void 0===n[f].cover_path?"":n[f].cover_path,"video"!==v&&(y++,a.detail[y]=[],a.detail[y].type="video",a.detail[y].content=[]),a.detail[y].content.push({id:f,location:h,video_path:_,cover_path:g}),v="video")):""!==l[o]&&(y++,a.detail[y]=[],a.detail[y].type="text",a.detail[y].content=l[o],v="text")}catch(t){}},deep:!1}},methods:{addTextArea:function(){var t=[];t.type="text",t.content="",this.detail.push(t)},addTextImage:function(){var t=[];t.type="image",t.content=[],this.detail.push(t)},addTextVideo:function(){var t=[];t.type="video",t.content=[],this.detail.push(t)},syncDetailImage:function(t,e){var a=this,o=this;o.detail[e].content=[];for(var r=0,s=function(){var s=t[n].url;null!=a.detailImagesIds[s]?(o.detail[e].content.push({image_id:o.detailImagesIds[s],url:s}),r=a.detailImagesIds[s]):(bus.$emit("on-loading"),a.$Util.api.post(i.createGoodsDetailImage,JSON.stringify({url:s,goodsId:o.formValidate.goodsId}),o).then(function(t){bus.$emit("on-loading"),r=t.data.id,setTimeout(function(){o.detail[e].content.push({image_id:r,url:s})},500),o.detailImagesIds[s]=r,o.formValidate.detailImages.push({image_id:r,url:s})},function(t){bus.$emit("on-loading"),o.$Message.warning("请求失败")}))},n=0;n<t.length;n++)s();setTimeout(function(){o.syncDetailDescription()},2e3)},syncVideoImage:function(t,e,a,o){var r=this;if(""===a)bus.$emit("on-loading"),this.$Util.api.post(i.createGoodsVideoImage,JSON.stringify({url:t[0].url,goodsId:r.formValidate.goodsId}),r).then(function(a){bus.$emit("on-loading");var i=parseInt(a.data.id);setTimeout(function(){r.detail[e].content[o].id=i,r.detail[e].content[o].cover_path=t[0].url},500),r.formValidate.detailVideos.push({id:i,location:0,video_path:"",cover_path:t[0].url})},function(t){bus.$emit("on-loading"),r.$Message.warning("请求失败")});else{r.detail[e].content[o].id=a,r.detail[e].content[o].cover_path=t[0].url;var s=r.detail[e].content[o].video_path;r.formValidate.detailVideos.push({id:a,location:0,video_path:s,cover_path:t[0].url})}setTimeout(function(){r.syncDetailDescription()},2e3)},syncVideoPath:function(t,e,a){for(var i=this,o=this,r=0;r<o.formValidate.detailVideos.length;r++)o.formValidate.detailVideos[r].id==e&&(o.formValidate.detailVideos[r].video_path=o.detail[t].content[a].video_path);setTimeout(function(){i.$emit("on-data-change",o.formValidate)},500)},handleAddVideo:function(t){this.detail[t].content.push({id:"",image:"",location:"",video_path:""}),this.syncDetailDescription()},handleDeleteVideo:function(t,e){this.detail[t].content.length>=1&&(this.detail[t].content.splice(e,1),this.syncDetailDescription())},handleDeleteItem:function(t){confirm("确认删除?")&&this.detail.length>=1&&(this.detail.splice(t,1),this.syncDetailDescription())},moveUpItem:function(t){if(this.detail.length>=1&&void 0!==this.detail[t-1]&&void 0!==this.detail[t]){var e=this.detail[t];this.detail[t]=this.detail[t-1],this.detail[t-1]=e,this.syncDetailDescription()}},moveDownItem:function(t){if(this.detail.length>=1&&void 0!==this.detail[t+1]&&void 0!==this.detail[t]){var e=this.detail[t];this.detail[t]=this.detail[t+1],this.detail[t+1]=e,this.syncDetailDescription()}},syncDetailDescription:function(){this.formValidate.detailDescription="",this.formValidate.detailImages=[],this.formValidate.detailVideos=[];for(var t=0;t<this.detail.length;t++)if("text"===this.detail[t].type)this.formValidate.detailDescription+=this.detail[t].content;else if("image"===this.detail[t].type)for(var e=0;e<this.detail[t].content.length;e++)this.formValidate.detailDescription+="[IMG"+this.detail[t].content[e].image_id+"]",this.formValidate.detailImages.push({image_id:this.detail[t].content[e].image_id,url:this.detail[t].content[e].url});else if("video"===this.detail[t].type)for(var a=0;a<this.detail[t].content.length;a++)this.formValidate.detailDescription+="[VIDEO"+this.detail[t].content[a].id+"]",this.formValidate.detailVideos.push({id:this.detail[t].content[a].id,location:this.detail[t].content[a].location,video_path:this.detail[t].content[a].video_path,cover_path:this.detail[t].content[a].cover_path})}}}},pg9y:function(t,e,a){var i=a("eLgO");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a("rjj0")("130a2834",i,!0)},raGN:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("m-card",[a("Row",[a("h3",{staticStyle:{"margin-bottom":"10px"}},[t._v("管理员")])]),t._v(" "),a("Row",{attrs:{span:"24"}},[a("Col",{attrs:{span:"5"}},[t._v("\n        运营:"),a("Select",{staticStyle:{width:"200px"},attrs:{filterable:"",clearable:"",remote:"","remote-method":t.remoteMethod1,loading:t.loading,placeholder:"运营"},model:{value:t.formValidate.operator,callback:function(e){t.$set(t.formValidate,"operator",e)},expression:"formValidate.operator"}},t._l(t.options1,function(e,i){return a("Option",{key:e.id,attrs:{value:e.id}},[t._v(t._s(e.value))])}))],1),t._v(" "),a("Col",{attrs:{span:"5"}},[t._v("\n        运营主管:"),a("Select",{staticStyle:{width:"200px"},attrs:{filterable:"",clearable:"",remote:"","remote-method":t.remoteMethod2,loading:t.loading,placeholder:"运营主管"},model:{value:t.formValidate.operatorManager,callback:function(e){t.$set(t.formValidate,"operatorManager",e)},expression:"formValidate.operatorManager"}},t._l(t.options2,function(e,i){return a("Option",{key:e.id,attrs:{value:e.id}},[t._v(t._s(e.value))])}))],1),t._v(" "),a("Col",{attrs:{span:"5"}},[t._v("\n        采购:"),a("Select",{staticStyle:{width:"200px"},attrs:{filterable:"",clearable:"",remote:"","remote-method":t.remoteMethod3,loading:t.loading,placeholder:"采购"},model:{value:t.formValidate.purchaser,callback:function(e){t.$set(t.formValidate,"purchaser",e)},expression:"formValidate.purchaser"}},t._l(t.options3,function(e,i){return a("Option",{key:e.id,attrs:{value:e.id}},[t._v(t._s(e.value))])}))],1),t._v(" "),a("Col",{attrs:{span:"5"}},[t._v("\n        采购主管:"),a("Select",{staticStyle:{width:"200px"},attrs:{filterable:"",clearable:"",remote:"","remote-method":t.remoteMethod4,loading:t.loading,placeholder:"采购主管"},model:{value:t.formValidate.purchaserManager,callback:function(e){t.$set(t.formValidate,"purchaserManager",e)},expression:"formValidate.purchaserManager"}},t._l(t.options4,function(e,i){return a("Option",{key:e.id,attrs:{value:e.id}},[t._v(t._s(e.value))])}))],1)],1)],1)},staticRenderFns:[]}},"u+j6":function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("m-card",[a("h3",{staticStyle:{"margin-bottom":"10px"}},[t._v("基础信息")]),t._v(" "),a("Form",{attrs:{model:t.formValidate,"label-width":120}},[a("Form-item",{attrs:{required:"",label:"是否日常ID"}},[a("Radio-group",{model:{value:t.formValidate.isDaily,callback:function(e){t.$set(t.formValidate,"isDaily",e)},expression:"formValidate.isDaily"}},[a("Radio",{attrs:{label:"is_daily_yes"}},[t._v("是")]),t._v(" "),a("Radio",{attrs:{label:"is_daily_no"}},[t._v("否")])],1)],1),t._v(" "),a("Form-item",{attrs:{required:"",label:"商品名称"}},[a("Input",{staticStyle:{width:"500px"},attrs:{placeholder:"请输入商品名称"},model:{value:t.formValidate.goodsName,callback:function(e){t.$set(t.formValidate,"goodsName",e)},expression:"formValidate.goodsName"}}),a("span",{staticStyle:{"padding-left":"10px",color:"grey"}},[t._v("建议不超过15个字")])],1),t._v(" "),a("Form-item",{attrs:{label:"商品短名称"}},[a("Input",{staticStyle:{width:"500px"},attrs:{placeholder:"请输入商品短名称"},model:{value:t.formValidate.shortName,callback:function(e){t.$set(t.formValidate,"shortName",e)},expression:"formValidate.shortName"}}),a("span",{staticStyle:{"padding-left":"10px",color:"grey"}},[t._v("最多7个字, for广告位")])],1),t._v(" "),a("Form-item",{attrs:{label:"商品中名称"}},[a("Input",{staticStyle:{width:"500px"},attrs:{placeholder:"请输入商品中名称"},model:{value:t.formValidate.middleName,callback:function(e){t.$set(t.formValidate,"middleName",e)},expression:"formValidate.middleName"}}),a("span",{staticStyle:{"padding-left":"10px",color:"grey"}},[t._v("最多11个字, for广告位")])],1),t._v(" "),a("Form-item",{attrs:{required:"",label:"商品描述"}},[a("Input",{staticStyle:{width:"500px"},attrs:{placeholder:"请输入商品描述"},model:{value:t.formValidate.briefDescription,callback:function(e){t.$set(t.formValidate,"briefDescription",e)},expression:"formValidate.briefDescription"}}),a("span",{staticStyle:{"padding-left":"10px",color:"grey"}},[t._v("建议不超过20个字")])],1),t._v(" "),a("Form-item",{attrs:{required:"",label:"所在仓库"}},[a("Select",{staticStyle:{width:"300px"},attrs:{clearable:"",filterable:"",placeholder:"请选择仓库"},model:{value:t.formValidate.warehouseId,callback:function(e){t.$set(t.formValidate,"warehouseId",e)},expression:"formValidate.warehouseId"}},t._l(t.warehouse,function(e){return a("Option",{key:e.index,attrs:{value:e.index}},[t._v(t._s(e.name))])}))],1),t._v(" "),a("Form-item",{attrs:{required:"",label:"开售时间"}},[a("Radio-group",{on:{"on-change":t.handleStartTime},model:{value:t.formValidate.startTimeOn,callback:function(e){t.$set(t.formValidate,"startTimeOn",e)},expression:"formValidate.startTimeOn"}},[a("Radio",{attrs:{label:"start_time_now"}},[t._v("立即开售")]),t._v(" "),a("Radio",{attrs:{label:"start_time_crontab"}},[t._v("定时开售")])],1),t._v(" "),t.isShow?a("Date-picker",{staticStyle:{width:"200px"},attrs:{value:t.value1,format:"yyyy-MM-dd HH:mm:ss",type:"datetime",placeholder:"选择时间"},model:{value:t.formValidate.startTime,callback:function(e){t.$set(t.formValidate,"startTime",e)},expression:"formValidate.startTime"}}):t._e()],1),t._v(" "),a("Form-item",{attrs:{required:"",required:"",label:"主图"}},[a("m-upload-image",{attrs:{"default-images":t.formValidate.coverImages,"obj-type":"goods/origin","length-width":"",sortable:"",multiple:""},on:{"on-success":t.syncCoverImage}})],1),t._v(" "),a("Form-item",{attrs:{label:"主图短视频"}},[a("Select",{staticStyle:{width:"100px"},attrs:{placeholder:"请选择位置"},model:{value:t.formValidate.coverVideo.location,callback:function(e){t.$set(t.formValidate.coverVideo,"location",e)},expression:"formValidate.coverVideo.location"}},t._l(t.locationItem,function(e){return a("Option",{key:e,attrs:{value:e}},[t._v("第"+t._s(e)+"位主图")])})),t._v(" "),a("Input",{staticStyle:{width:"300px"},attrs:{placeholder:"视频源URL"},model:{value:t.formValidate.coverVideo.url,callback:function(e){t.$set(t.formValidate.coverVideo,"url",e)},expression:"formValidate.coverVideo.url"}})],1),t._v(" "),a("Form-item",{attrs:{label:"主图角标"}},[a("Select",{staticStyle:{width:"300px"},attrs:{placeholder:"请选择主图角标",clearable:"",filterable:""},on:{"on-change":t.changeMarkId},model:{value:t.formValidate.goodsMarkId,callback:function(e){t.$set(t.formValidate,"goodsMarkId",e)},expression:"formValidate.goodsMarkId"}},t._l(t.marks,function(e){return a("Option",{key:e.id,attrs:{value:e.id}},[t._v(t._s(e.id)+"-"+t._s(e.name))])})),t._v(" "),a("m-upload-image",{attrs:{disabled:"true","default-images":[{url:t.markImage}]}}),t._v(" "),a("span",{staticStyle:{"padding-left":"10px",color:"grey"}},[t._v("选择下拉框，点键盘Delete删除")])],1),t._v(" "),a("Form-item",{staticStyle:{width:"300px"},attrs:{label:"列表页底标"}},[a("m-upload-image",{attrs:{"default-images":[{url:t.formValidate.bottomMark}]},on:{"on-success":t.syncBottomMarkImage}})],1),t._v(" "),a("Form-item",{attrs:{label:"营销文案"}},[a("Input",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入营销文案"},model:{value:t.formValidate.promotionTips,callback:function(e){t.$set(t.formValidate,"promotionTips",e)},expression:"formValidate.promotionTips"}})],1),t._v(" "),a("Form-item",{attrs:{label:"商品属性标签"}},[a("Input",{staticStyle:{width:"300px"},attrs:{type:"textarea",placeholder:"请输入商品属性标签"},model:{value:t.formValidate.attributeTag,callback:function(e){t.$set(t.formValidate,"attributeTag",e)},expression:"formValidate.attributeTag"}})],1)],1)],1)},staticRenderFns:[]}},xt9Q:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("m-page-edit",{attrs:{"is-loading":t.loadingState}},[a("m-goods-form",{attrs:{usage:"add"},on:{loading:t.changeLoadingState}})],1)},staticRenderFns:[]}},zdkh:function(t,e,a){"use strict";function i(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}Object.defineProperty(e,"__esModule",{value:!0});var o=a("Y8tV"),r=a.n(o),s=a("oKXi"),n=a.n(s),d=a("ASjo"),l=a.n(d),c=a("depY"),m=a.n(c),u=a("eV8O"),p=a.n(u),f=a("YWI7"),h=a.n(f),_=a("Ju9k"),g=a.n(_),v=a("WoZQ"),y=a.n(v),b={create:{api:{path:"/boss/mall/catalog/goods/create"}},update:{api:{path:"/boss/mall/catalog/goods/update"}},resource:{api:{path:"/boss/mall/catalog/goods/add-page-info",params:{type:"edit",fields:"{warehouse{index,name},marks{id,name,image{url,origin}}}"}}},find:{api:{path:"/boss/mall/catalog/goods/find",params:{fields:"{goods_id, goods_name, short_name, middle_name, create_time, shelf_status,customer_crowd{limit_type,limit_value,app_route},is_daily,detail_description, warehouse_id, start_time,first_on_shelf_time,delete_time,cover_video{sort_order,video_path},detail_videos{id,video_path,cover_path,location,cover_path}, bottom_mark{s(w:80,h:80){url,origin}},cover_images,detail_images, goods_mark_id, brief_description, topic_id, original_price, mall_price, price_grade, is_suit, brand_id,category_id,deprecated_brand_id,deprecated_category_ids,spec_select_mode,spec_name_1,spec_name_2,spec_name_3,spec_name_4,spec_name_5,spec_quantity,is_private,is_top,base_sold_count,can_use_coupon,can_cod,is_free_shipment,buy_count_limit_start_time,buy_count_limit_end_time,recommend_weight,buy_count_limit,promotion_tips,attribute_tag,color_tags{color_tag_id,color_tag_name,name,sort},operators{operator_id,operator_manager_id,purchaser_id,purchaser_manager_id}}",id:0}},responseHandle:function(t){return t.data.start_time>0?t.data.start_time=vm.$Util.dateFormat(t.data.start_time,"yyyy-MM-dd h:m:s"):t.data.start_time="",t.data.create_time?t.data.create_time=vm.$Util.dateFormat(t.data.create_time,"yyyy-MM-dd h:m:s"):t.data.create_time="",t.data.first_on_shelf_time?t.data.first_on_shelf_time=vm.$Util.dateFormat(t.data.first_on_shelf_time,"yyyy-MM-dd h:m:s"):t.data.first_on_shelf_time="",t}}};e.default={name:"MGoodsForm",components:{MSystemOperator:r.a,MGoodsInfo:n.a,MGoodsImage:l.a,MGoodsPrice:m.a,MGoodsCategory:p.a,MGoodsRules:h.a,MGoodsColorTag:g.a,MGoodsLimit:y.a},props:{id:{type:String,default:""},usage:{type:String,default:"edit"}},data:function(){return{modal:!1,formItem:{goods_id:0,goods_name:"",detail_description:"",warehouse_id:"",start_time:"",shelf_status:"",bottom_mark:[],goods_mark_id:0,brief_description:"",topic_id:0,original_price:0,mall_price:0,price_grade:[],is_suit:0,brand_id:0,category_id:0,deprecated_brand_id:0,deprecated_category_ids:"",spec_select_mode:0,spec_name_1:"",spec_name_2:"",spec_name_3:"",spec_name_4:"",spec_name_5:"",spec_quantity:0,is_private:0,is_top:0,base_sold_count:0,can_use_coupon:0,can_cod:0,is_free_shipment:0,buy_count_limit_start_time:"",buy_count_limit_end_time:"",recommend_weight:0,buy_count_limit:"",promotion_tips:"",attribute_tag:"",color_tags:[],system_operator:[],is_daily:1},systemInfo:[],warehouse:[],marks:[],basicBrand:[],basicCategory:[],brands:[],category:[],goodsInfo:{},imageInfo:{},priceInfo:{},categoryInfo:{},ruleInfo:{},labelInfo:{},limitInfo:{baseSoldCount:0},reOffSale:!1,onSale:!1,offSale:!1,deleteStatus:!1,stateName:"",colorTags:[],systemOperators:[],systemOperatorInfo:[],operatorBadgeCount:0,infoBadgeCount:0,imageBadgeCount:0,priceBadgeCount:0,categoryBadgeCount:0,ruleBadgeCount:0,colorTagBadgeCount:0,limitBadgeCount:0}},methods:{toGroupon:function(){window.location="/admin.php?m=Admin&c=MallGoods&a=addGroupon&goods_id="+this.id},toFlashSale:function(){window.location="/admin.php?m=Admin&c=MallGoods&a=addFlashSale&goods_id="+this.id},back:function(){location.hash="/mall/catalog/goods/list"},goAnchor:function(t){var e=this.$el.querySelector(t);document.documentElement.scrollTop=e.offsetTop,document.body.scrollTop=e.offsetTop},btnShow:function(t){switch(t){case 0:this.stateName="下架",this.offSale=!1,this.onSale=!0,this.deleteStatus=!0,this.reOffSale=!1;break;case 1:this.stateName="上架",this.offSale=!0,this.onSale=!1,this.deleteStatus=!0,this.reOffSale=!1;break;case-1:this.stateName="废弃",this.offSale=!1,this.onSale=!1,this.deleteStatus=!1,this.reOffSale=!0}},initIds:function(){if("edit"==this.usage){var t=this.id;if(!parseInt(t))return alert("商品id格式有误"),!1;t=parseInt(t),b.find.api.params.id=t,this.loadFormData(t)}},loadFormData:function(t){b.find.api.params.id=t;var e=this;this.$Util.api.get(b.find,e).then(function(t){if(!t.data)return e.$Message.warning("商品不存在或数据有误"),!1;e.formItem=t.data,e.formItem.system_operator=t.data.operators,e.btnShow(t.data.delete_time>0?-1:e.formItem.shelf_status)},function(t){})},loadResource:function(){bus.$emit("on-loading");var t=this;this.$Util.api.get(b.resource,t).then(function(e){bus.$emit("on-loading"),t.warehouse=e.data.form.warehouse,t.marks=e.data.form.marks},function(e){bus.$emit("on-loading"),t.$Message.warning("加载资源失败")})},getSystemOperatorData:function(t){this.systemOperatorInfo=t},getGoodsInfoData:function(t){this.goodsInfo=t},getGoodsImageData:function(t){this.imageInfo=t},getGoodsPriceData:function(t){this.priceInfo=t},getGoodsCategoryData:function(t){this.categoryInfo=t},getGoodsRulesData:function(t){this.ruleInfo=t},getGoodsColorTagData:function(t){this.colorTags=t},getGoodsLimitData:function(t){this.limitInfo=t},submit:function(){if(this.validateFormData()){var t=this.getRequestParams();this.submitRequest(t)}},getRequestParams:function(){var t,e={};return t={goodsId:this.id,goodsName:this.goodsInfo.goodsName,shortName:this.goodsInfo.shortName,middleName:this.goodsInfo.middleName,briefDescription:this.goodsInfo.briefDescription,warehouseId:this.goodsInfo.warehouseId,startTimeOn:"start_time_now"==this.goodsInfo.startTimeOn?1:0,startTime:Date.parse(this.goodsInfo.startTime)/1e3,goodsMarkId:this.goodsInfo.goodsMarkId,bottomMark:this.goodsInfo.bottomMark,coverImages:this.goodsInfo.coverImages,coverVideo:this.goodsInfo.coverVideo},i(t,"startTimeOn",this.goodsInfo.startTimeOn),i(t,"promotionTips",this.goodsInfo.promotionTips),i(t,"attributeTag",this.goodsInfo.attributeTag),i(t,"isDaily","is_daily_yes"==this.goodsInfo.isDaily?1:0),i(t,"detailDescription",this.imageInfo.detailDescription),i(t,"detailImages",this.imageInfo.detailImages),i(t,"detailVideos",this.imageInfo.detailVideos),i(t,"topicId",this.imageInfo.topicId),i(t,"isSuit","is_suit_yes"==this.categoryInfo.isSuit?1:0),i(t,"brandId",this.categoryInfo.brandId),i(t,"categoryId",this.categoryInfo.categoryId),i(t,"deprecatedBrandId",this.categoryInfo.deprecatedBrandId),i(t,"deprecatedCategoryIds",this.categoryInfo.deprecatedCategoryIds),i(t,"originalPrice",this.priceInfo.originalPrice),i(t,"mallPrice",this.priceInfo.mallPrice),i(t,"silverPrice",this.priceInfo.silverPrice),i(t,"goldPrice",this.priceInfo.goldPrice),i(t,"platinumPrice",this.priceInfo.platinumPrice),i(t,"specSelectMode","mode_many"==this.ruleInfo.specSelectMode?1:0),i(t,"specItems",this.ruleInfo.items),i(t,"isPrivate","is_private_yes"==this.limitInfo.isPrivate?1:0),i(t,"isTop",this.limitInfo.isTop?1:0),i(t,"baseSoldCount",parseInt(this.limitInfo.baseSoldCount)),i(t,"canUseCoupon","can_use_yes"==this.limitInfo.canUseCoupon?1:0),i(t,"canCod","can_cod_yes"==this.limitInfo.canCod?1:0),i(t,"isFreeShipment","is_free_shipment_yes"==this.limitInfo.isFreeShipment?1:0),i(t,"buyCountLimitStartTimeOn","start_time_now"==this.limitInfo.buyCountLimitStartTimeOn?1:0),i(t,"buyCountLimitEndTimeOn","end_time_forever"==this.limitInfo.buyCountLimitEndTimeOn?1:0),i(t,"buyCountLimitStartTime",Date.parse(this.limitInfo.buyCountLimitStartTime)/1e3),i(t,"buyCountLimitEndTime",Date.parse(this.limitInfo.buyCountLimitEndTime)/1e3),i(t,"buyCountLimit",this.limitInfo.buyCountLimit),i(t,"buyCountLimitOn",this.limitInfo.buyCountLimitOn?1:0),i(t,"recommendWeight",this.limitInfo.recommendWeight),i(t,"customerCrowd",this.limitInfo.receiverData),i(t,"colorTags",this.colorTags),i(t,"operators",{operator_id:this.systemOperatorInfo.operator,operator_manager_id:this.systemOperatorInfo.operatorManager,purchaser_id:this.systemOperatorInfo.purchaser,purchaser_manager_id:this.systemOperatorInfo.purchaserManager}),e=t,e},submitRequest:function(t){bus.$emit("on-loading");var e=this;this.$Util.api.post("edit"==e.usage?b.update:b.create,JSON.stringify(t),e).then(function(t){e.back()},function(t){bus.$emit("on-loading"),e.$Message.warning("请求失败")})},errorMessage:function(t){this.$Notice.error({title:t})},validateFormData:function(){var t="";this.operatorBadgeCount=0,this.infoBadgeCount=0,this.imageBadgeCount=0,this.priceBadgeCount=0,this.categoryBadgeCount=0,this.ruleBadgeCount=0,this.colorTagBadgeCount=0,this.limitBadgeCount=0,""!==this.goodsInfo.goodsName&&void 0!==this.goodsInfo.goodsName||(t+="请填写商品名称,",this.infoBadgeCount+=1),void 0!==this.goodsInfo.shortName&&this.goodsInfo.shortName.length>7&&(t+="短名称不能多于7个字符,",this.infoBadgeCount+=1),void 0!==this.goodsInfo.middleName&&this.goodsInfo.middleName.length>11&&(t+="中名称不能多于11个字符,",this.infoBadgeCount+=1),""!==this.goodsInfo.briefDescription&&void 0!==this.goodsInfo.briefDescription||(t+="请填写商品描述,",this.infoBadgeCount+=1),""!==this.goodsInfo.warehouseId&&void 0!==this.goodsInfo.warehouseId||(t+="请填写商品仓库,",this.infoBadgeCount+=1),"start_time_crontab"===this.goodsInfo.startTimeOn&&(""!==this.goodsInfo.startTime&&void 0!==this.goodsInfo.startTime||(t+="请填写定时开售时间,",this.infoBadgeCount+=1)),void 0!==this.goodsInfo.coverImages&&this.goodsInfo.coverImages.length<1&&(t+="请上传商品主图,",this.infoBadgeCount+=1),void 0!==this.goodsInfo.promotionTips&&this.goodsInfo.promotionTips.length>12&&(t+="营销文案不能多于12个字符,",this.infoBadgeCount+=1),""!==this.imageInfo.detailDescription&&void 0!==this.imageInfo.detailDescription||(t+="请填写图文详情,",this.imageBadgeCount+=1),""!==this.priceInfo.originalPrice&&void 0!==this.priceInfo.originalPrice||(t+="请填写原价,",this.priceBadgeCount+=1),""!==this.priceInfo.mallPrice&&void 0!==this.priceInfo.mallPrice||(t+="请填写商城价,",this.priceBadgeCount+=1),""!==this.categoryInfo.brandId&&void 0!==this.categoryInfo.brandId||(t+="请选择品牌,",this.categoryBadgeCount+=1),""!==this.categoryInfo.categoryId&&void 0!==this.categoryInfo.categoryId||(t+="请选择品类,",this.categoryBadgeCount+=1);for(var e in this.ruleInfo.items)""!==this.ruleInfo.items[e].value&&void 0!==this.ruleInfo.items[e].value||(t+="请填写[规格名称"+(e+1)+"],",this.ruleBadgeCount+=1);return!0===this.limitInfo.buyCountLimitOn&&("start_time_crontab"===this.limitInfo.buyCountLimitStartTimeOn&&""===this.limitInfo.buyCountLimitStartTime&&(t+="请填写限制开始时间,",this.limitBadgeCount+=1),"end_time_crontab"===this.limitInfo.buyCountLimitEndTimeOn&&""===this.limitInfo.buyCountLimitEndTime&&(t+="请填写限制结束时间,",this.limitBadgeCount+=1),""!==this.limitInfo.buyCountLimit&&void 0!==this.limitInfo.buyCountLimit||(t+="请填写限制数量,",this.limitBadgeCount+=1)),(""===this.limitInfo.baseSoldCount||isNaN(this.limitInfo.baseSoldCount)||this.limitInfo.baseSoldCount<0)&&(t+="销量基数必须为非负整数,",this.limitBadgeCount+=1),""===t||(this.$Modal.error({width:300,content:t}),!1)},loadBasicBrands:function(){var t=this;this.$Util.api.get({api:{path:"/boss/mall/catalog/brand/available",params:{fields:"{id,name}"}}}).then(function(e){t.basicBrand=e.data},function(e){return t.basicBrand=[]})},loadBasicCategories:function(){var t=this;this.$Util.api.get({api:{path:"/boss/mall/catalog/category/available",params:{fields:"{id,name}",level:[3]}}}).then(function(e){t.basicCategory=e.data},function(e){return t.basicCategory=[]})},loadCategories:function(){var t=this;this.$Util.api.get({api:{path:"/boss/mall/catalog/deprecated-category/available",params:{fields:"{cate_id,cate_name}"}}}).then(function(e){t.category=e.data},function(e){return t.category=[]})},loadBrands:function(){var t=this;this.$Util.api.get({api:{path:"/boss/mall/catalog/deprecated-brand/available",params:{fields:"{brand_id,brand_name}"}}}).then(function(e){t.brands=e.data},function(e){return t.brands=[]})},loadAdmin:function(){var t=this;this.$Util.api.get({api:{path:"/boss/backend/admin/administrators/find-all",params:{fields:"{id,admin_name}"}}}).then(function(e){t.systemOperators=e.data},function(e){return t.systemOperators=[]})},setStatus:function(t){var e=this;bus.$emit("on-loading");var a=this;this.$Util.api.post({api:{path:"/boss/mall/catalog/goods/set-status"}},{goods_id:a.id,status:t}).then(function(i){bus.$emit("on-loading"),0===i.error_code?(a.btnShow(t),e.$Message.success("状态修改成功")):e.$Message.error("状态修改失败")},function(t){bus.$emit("on-loading"),e.$Message.error("状态修改失败")})}},mounted:function(){var t=this;document.addEventListener("keydown",function(e){13===e.keyCode&&e.shiftKey&&t.submit()},!1)},created:function(){this.initIds(),this.$nextTick(function(){this.loadResource()}),this.loadBasicBrands(),this.loadBasicCategories(),this.loadCategories(),this.loadBrands(),this.loadAdmin()}}}});