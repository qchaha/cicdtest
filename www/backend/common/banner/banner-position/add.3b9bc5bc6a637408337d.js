webpackJsonp([166],{"5fKa":function(t,e,a){var n=a("VU/8")(a("ccpZ"),a("dZQ0"),null,null);t.exports=n.exports},"9S4O":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={create:{api:{path:"/boss/common/banner/banner-position/create"}},update:{api:{path:"/boss/common/banner/banner-position/update"}},remove:{api:{path:"/boss/common/banner/banner-position/delete",params:{id:0}}},find:{api:{path:"/boss/common/banner/banner-position/find",params:{fields:"{id,pos_code,name,ratio,remark}",id:0}}},resource:{api:{path:"/boss/common/banner/banner-position/add-page-info",params:{}}}};e.default={name:"MBannerPositionForm",props:{id:{type:String,name:""},usage:{type:String,name:"edit"}},data:function(){return{formItem:{id:0,name:"",pos_code:"",ratio:0,remark:""},categories:[],species:[]}},methods:{back:function(){location.hash="/common/banner/banner-position/list"},submit:function(){if(this.validateFormData()){var t=this.getRequestParams();this.submitRequest(t)}},validateFormData:function(){return 0===this.formItem.pos_code.length?(this.$Message.warning("活动类型编码不能为空"),!1):0===this.formItem.ratio.length?(this.$Message.warning("图片比例不能为空"),!1):0!==this.formItem.name.length||(this.$Message.warning("活动分类名称不能为空"),!1)},getRequestParams:function(){var t={};return t={name:this.formItem.name,pos_code:this.formItem.pos_code,ratio:this.formItem.ratio,remark:this.formItem.remark},"edit"===this.usage&&(t.id=this.formItem.id),t},submitRequest:function(t){bus.$emit("on-loading");var e=this,a=n.create;"edit"===this.usage&&(a=n.update),this.$Util.api.post(a,t,e).then(function(){e.$Message.success("请求成功"),e.back()},function(t){bus.$emit("on-loading"),e.$Message.warning("请求失败")})},loadResource:function(){var t=this;bus.$emit("on-loading"),this.$Util.api.get(n.resource,t).then(function(e){bus.$emit("on-loading"),t.submitEnable=!1,"edit"===t.usage&&t.$nextTick(function(){t.loadFormData()})},function(e){t.$Message.warning("加载资源失败")})},loadFormData:function(){bus.$emit("on-loading"),this.$Util.api.get(n.find,this).then(function(t){if(bus.$emit("on-loading"),!t.data)return self.$Message.warning("活动分类不存在或数据有误"),!1;this.formItem=t.data,this.submitEnable=!1},function(t){})},initIds:function(){if("edit"===this.usage){var t=this.id;if(!parseInt(t))return alert("活动分类id格式有误"),!1;t=parseInt(t),this.formItem.id=t,n.find.api.params.id=t}}},created:function(){this.initIds(),"edit"===this.usage&&(n.resource.api.path="/boss/common/banner/banner-position/edit-page-info"),this.$nextTick(function(){this.loadResource()})}}},b1fw:function(t,e,a){var n=a("VU/8")(a("9S4O"),a("fvMQ"),null,null);t.exports=n.exports},ccpZ:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("b1fw"),i=a.n(n);e.default={name:"app",components:{MBannerPositionForm:i.a},data:function(){return{format:this.$route.params.format,loadingState:!1}},methods:{changeLoadingState:function(){this.loadingState=!this.loadingState}}}},dZQ0:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("m-page-edit",{attrs:{"is-loading":t.loadingState}},[a("m-banner-position-form",{attrs:{usage:"add",format:t.format},on:{loading:t.changeLoadingState}})],1)},staticRenderFns:[]}},fvMQ:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{"padding-top":"20px"}},[a("Form",{attrs:{model:t.formItem,"label-width":100}},[a("Form-item",{attrs:{label:"活动分类名称"}},[a("Input",{staticStyle:{width:"300px"},attrs:{placeholder:"活动分类名称"},model:{value:t.formItem.name,callback:function(e){t.$set(t.formItem,"name",e)},expression:"formItem.name"}})],1),t._v(" "),a("Form-item",{attrs:{label:"活动类型编码"}},[a("Input",{staticStyle:{width:"300px"},attrs:{placeholder:""},model:{value:t.formItem.pos_code,callback:function(e){t.$set(t.formItem,"pos_code",e)},expression:"formItem.pos_code"}})],1),t._v(" "),a("Form-item",{attrs:{label:"图片比例"}},[a("Input",{staticStyle:{width:"300px"},attrs:{placeholder:""},model:{value:t.formItem.ratio,callback:function(e){t.$set(t.formItem,"ratio",e)},expression:"formItem.ratio"}})],1),t._v(" "),a("Form-item",{attrs:{label:"备注"}},[a("Input",{staticStyle:{width:"500px"},attrs:{placeholder:"备注"},model:{value:t.formItem.remark,callback:function(e){t.$set(t.formItem,"remark",e)},expression:"formItem.remark"}})],1),t._v(" "),a("Form-item",[a("i-button",{attrs:{type:"primary"},nativeOn:{click:function(e){return t.submit(e)}}},[t._v("提交")]),t._v(" "),a("i-button",{staticStyle:{"margin-left":"8px"},attrs:{type:"ghost"},nativeOn:{click:function(e){return t.back(e)}}},[t._v("取消")])],1)],1)],1)},staticRenderFns:[]}}});