webpackJsonp([184],{B9db:function(s,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var t={add:{api:{path:"/boss/common/banner/ad-sense-group/add-business-id"}},remove:{api:{path:"/boss/common/banner/ad-sense-group/delete-business-id",params:{index:0}}}},i=void 0;n.default={name:"app",data:function(){return{api:{path:"/boss/common/banner/ad-sense-group/find-manage-list",params:{fields:"{id,name,business_id,business_name}"}},sortInfoApi:{path:"/boss/common/banner/ad-sense-group/sort"},pageInfoApi:{path:"/boss/common/banner/ad-sense-group/manage-page-info"},columns:[{title:"部门",key:"business_name",width:"80"},{title:"标题",key:"name",render:function(s,n){return s("span",{style:{color:n.row.name?"black":"#DDD"}},n.row.name?n.row.name:"当前没有内容")}},{title:"操作",key:"action",render:function(s,n){return s("div",[s("i-button",{props:{type:"text"},nativeOn:{click:function(){i.removeBusinessPit(n.row.business_index)}}},"删除")])}}],businesses:[],total:0,businessIdList:[]}},computed:{},methods:{handleListPageInfoSuccess:function(s){this.businesses=s.data.filter.businesses,this.total=s.data.total},addBusinessId:function(s){var n={businessId:s},e=this,i=t.add;bus.$emit("on-loading"),this.$Util.api.post(i,n,e).then(function(){e.$Notice.success({title:"请求成功",desc:""}),window.location.reload()},function(){bus.$emit("on-loading"),e.$Message.warning("请求失败")})},removeBusinessId:function(s){var n=this;t.remove.api.params.index=s;var e=t.remove;bus.$emit("on-loading"),this.$Util.api.delete(e,n).then(function(){n.$Message.success("请求成功"),window.location.reload()},function(){bus.$emit("on-loading"),n.$Message.warning("请求失败")})},addBusinessPit:function(s){return void 0!==this.businesses[s]&&(this.total>=50?(this.$Notice.error({title:"最多只能容纳50个信息流广告位置",desc:'设置内容请前往"社区 - 广告组 - App首页广告组"'}),!1):void this.addBusinessId(s))},removeBusinessPit:function(s){if(s<0||s>this.total-1)return!1;confirm("确定删除?")&&this.removeBusinessId(s)}},created:function(){i=this,this.$nextTick(function(){})}}},JED3:function(s,n,e){e("ZvVI");var t=e("VU/8")(e("B9db"),e("zoZa"),"data-v-73457aa3",null);s.exports=t.exports},"Vp/2":function(s,n,e){n=s.exports=e(0)(),n.push([s.i,"[class*=span][data-v-73457aa3]{margin-left:0!important}",""])},ZvVI:function(s,n,e){var t=e("Vp/2");"string"==typeof t&&(t=[[s.i,t,""]]),t.locals&&(s.exports=t.locals);e("rjj0")("74f6d4fb",t,!0)},zoZa:function(s,n){s.exports={render:function(){var s=this,n=s.$createElement,e=s._self._c||n;return e("m-page-list",{attrs:{path:s.api.path,params:s.api.params,columns:s.columns,"sort-key":"business_index","sort-index":3,sortable:"","sort-path":s.sortInfoApi.path,"page-info-path":s.pageInfoApi.path,"page-info-params":s.pageInfoApi.params},on:{"on-page-info-success":s.handleListPageInfoSuccess}},[e("Dropdown",{staticStyle:{"margin-bottom":"20px"},attrs:{placement:"bottom-start"},on:{"on-click":s.addBusinessPit}},[e("Button",{attrs:{type:"primary"}},[s._v("新增\n            "),e("Icon",{attrs:{type:"arrow-down-b"}})],1),s._v(" "),e("Dropdown-menu",{attrs:{slot:"list"},slot:"list"},s._l(s.businesses,function(n,t){return e("Dropdown-item",{attrs:{name:t}},[s._v("\n                新增"+s._s(n)+"运营位\n            ")])}))],1)],1)},staticRenderFns:[]}}});