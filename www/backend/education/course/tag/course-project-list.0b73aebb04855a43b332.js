webpackJsonp([159],{"3snG":function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=o("Xysa"),s=o.n(i);e.default={name:"app",components:{MTagListTable:s.a},data:function(){return{}}}},I9eZ:function(t,e,o){var i=o("VU/8")(o("3snG"),o("jmOd"),null,null);t.exports=i.exports},JIua:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=null;e.default={name:"app",props:{listFilter:{type:String,default:"allCourseProjects"}},computed:{allTagList:function(){return"allCourseProjects"===this.listFilter},sortable:function(){return!this.allTagList},columns:function(){var t={title:"操作",key:"action",render:function(t,e){var o=function(){location.hash="/education/course/tag/edit/"+e.row.id+"/"+i.listFilter},s=function(){if(confirm("确认删除?")){bus.$emit("on-loading");vm.$Util.api.delete({api:{path:"/boss/education/course/tag/delete",params:{id:e.row.id}}},vm).then(function(){vm.$Notice.success({title:"删除成功",desc:"页面即将刷新"}),setTimeout(function(){location.reload()},500)},function(t){bus.$emit("on-loading"),vm.$Notice.error({title:"删除失败",desc:""})})}},n=function(){location.hash="/education/course/tag/detail/"+e.row.id},r=function(){bus.$emit("on-loading");vm.$Util.api.post({api:{path:"/boss/education/course/tag/add-to-category"}},{tagId:e.row.id,category:"videoCourse"},vm).then(function(){vm.$Notice.success({title:"添加成功",desc:"页面即将刷新"}),setTimeout(function(){location.reload()},500)},function(t){bus.$emit("on-loading"),vm.$Notice.error({title:"添加失败",desc:""})})},a=function(){bus.$emit("on-loading");vm.$Util.api.post({api:{path:"/boss/education/course/tag/add-to-category"}},{tagId:e.row.id,category:"courseProject"},vm).then(function(){vm.$Notice.success({title:"添加成功",desc:"页面即将刷新"}),setTimeout(function(){location.reload()},500)},function(t){bus.$emit("on-loading"),vm.$Notice.error({title:"添加失败",desc:""})})},c=function(){if(confirm("确认从视频教程列表移除?")){bus.$emit("on-loading");vm.$Util.api.delete({api:{path:"/boss/education/course/tag/remove-from-category",params:{tagId:e.row.id,category:"videoCourse"}}},vm).then(function(){vm.$Notice.success({title:"删除成功",desc:"页面即将刷新"}),setTimeout(function(){location.reload()},500)},function(t){bus.$emit("on-loading"),vm.$Notice.error({title:"删除失败",desc:""})})}},l=function(){if(confirm("确认从教程专题列表移除?")){bus.$emit("on-loading");vm.$Util.api.delete({api:{path:"/boss/education/course/tag/remove-from-category",params:{tagId:e.row.id,category:"courseProject"}}},vm).then(function(){vm.$Notice.success({title:"删除成功",desc:"页面即将刷新"}),setTimeout(function(){location.reload()},500)},function(t){bus.$emit("on-loading"),vm.$Notice.error({title:"删除失败",desc:""})})}},u=[t("div",[t("i-button",{props:{type:"text",size:"small"},on:{click:o}},[t("span",{style:{color:"#39f"}},"编辑")]),t("i-button",{props:{type:"text",size:"small"},on:{click:s}},[t("span",{style:{color:"#39f"}},"删除")]),t("i-button",{props:{type:"text",size:"small"},on:{click:n}},[t("span",{style:{color:"#39f"}},"查看")])])];return"allCourseProjects"===i.listFilter?(void 0!==e.row.in_video_course&&e.row.in_video_course||u.push(t("div",[t("i-button",{props:{type:"text",size:"small"},on:{click:r}},[t("span",{style:{color:"#39f"}},"添加到视频教程列表")])])),void 0!==e.row.in_course_project&&e.row.in_course_project||u.push(t("div",[t("i-button",{props:{type:"text",size:"small"},on:{click:a}},[t("span",{style:{color:"#39f"}},"添加到教程专题列表")])]))):"courseProject"===i.listFilter?u.push(t("div",[t("i-button",{props:{type:"text",size:"small"},on:{click:l}},[t("span",{style:{color:"#39f"}},"从教程专题列表移除")])])):"videoCourse"===i.listFilter&&u.push(t("div",[t("i-button",{props:{type:"text",size:"small"},on:{click:c}},[t("span",{style:{color:"#39f"}},"从视频教程列表移除")])])),t("div",u)}},e={title:"使用处",key:"usage",render:function(t,e){var o=[];return void 0!==e.row.in_video_course&&e.row.in_video_course&&o.push(t("div",{style:{color:"#39f"}},"视频教程列表")),void 0!==e.row.in_course_project&&e.row.in_course_project&&o.push(t("div",{style:{color:"#39f"}},"教程专题列表")),0===o.length&&o.push(t("div","/")),t("div",o)}},o=[{title:"编号",key:"id"},{title:"专题名称",key:"name"},{title:"教程数",key:"course_count",render:function(t,e){return t("span",e.row.all_courses.length)}},{title:"封面图",key:"cover",width:236,render:function(t,e){return t("div",{style:{width:"200px",height:"150px",backgroundColor:"#e7e7e7",overflow:"hidden",margin:"5px"}},[t("img",{attrs:{src:void 0!==e.row.cover.s?e.row.cover.s.url:""},style:{width:"200px"}})])}}];return this.allTagList&&o.push(e),o.push(t),o}},data:function(){return{addRoute:"/education/course/tag/add",api:{path:"/boss/education/course/tag/find-list",params:{fields:"{id,name,cover{s(w:400){url}},in_course_project,in_video_course,all_courses{id}}",filter:this.listFilter}},pageInfoApi:{path:"/boss/education/course/tag/list-page-info",params:{filter:this.listFilter}},sortInfoApi:{path:"/boss/education/course/tag/sort-in-special-category",params:{category:""}},regions:[],searchConditionHandle:function(t){return""===t.name&&""===t.id?i.searching=!1:i.searching=!0,t},searchCondition:{name:"",id:""},searching:!1,canAddToVideoCourse:!1}},methods:{handlePageInfoSuccess:function(t){this.canAddToVideoCourse=t.data.filter.canAddToVideoCourse},checkCanJumpToAdd:function(){if("videoCourse"!==this.listFilter){var t="";return"courseProject"===this.listFilter&&(t="/courseProject"),void this.toAdd(t)}if(!this.canAddToVideoCourse)return void this.$Notice.error({title:"视频教程标签已达上限",desc:""});this.toAdd("/videoCourse")},toAdd:function(t){location.hash=this.addRoute+t}},created:function(){i=this,this.sortInfoApi.params.category=this.listFilter}}},Xysa:function(t,e,o){var i=o("VU/8")(o("JIua"),o("qYnT"),null,null);t.exports=i.exports},jmOd:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("m-tag-list-table",{attrs:{listFilter:"courseProject"}})},staticRenderFns:[]}},qYnT:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("m-page-list",{attrs:{path:t.api.path,params:t.api.params,columns:t.columns,methods:t.methods,"response-handle":t.responseHandle,"page-info-path":t.pageInfoApi.path,"page-info-params":t.pageInfoApi.params,"sort-key":"id","sort-index":5,sortable:t.sortable&&!t.searching,"sort-path":t.sortInfoApi.path,"sort-params":t.sortInfoApi.params},on:{"on-page-info-success":t.handlePageInfoSuccess}},[o("m-action-bar",[o("Button",{attrs:{type:"primary"},on:{click:t.checkCanJumpToAdd}},[t._v("新增")])],1),t._v(" "),o("m-action-bar",{attrs:{slot:"search"},slot:"search"},[o("m-action-search-bar",{attrs:{"search-condition":t.searchCondition,"search-condition-handle":t.searchConditionHandle}},[o("m-form-item",[o("Input",{staticStyle:{width:"150px"},attrs:{placeholder:"专题名称"},model:{value:t.searchCondition.name,callback:function(e){t.$set(t.searchCondition,"name",e)},expression:"searchCondition.name"}})],1),t._v(" "),o("m-form-item",{attrs:{label:""}},[o("Input",{staticStyle:{width:"150px"},attrs:{placeholder:"专题ID"},model:{value:t.searchCondition.id,callback:function(e){t.$set(t.searchCondition,"id",e)},expression:"searchCondition.id"}})],1)],1)],1)],1)},staticRenderFns:[]}}});