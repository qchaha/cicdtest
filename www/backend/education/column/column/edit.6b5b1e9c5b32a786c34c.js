webpackJsonp([51],{"+qSk":function(t,e,i){var a=i("u0M/");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);i("rjj0")("8cf8355a",a,!0)},"6Cl9":function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("m-page-edit",[i("m-column-form",{attrs:{id:t.id,model:"edit"}})],1)},staticRenderFns:[]}},"DD/B":function(t,e,i){"use strict";i.d(e,"a",function(){return a});var a={name:[{required:!0,message:"请填写专栏名称",trigger:"blur"}],description:[{required:!0,message:"请填写专栏描述",trigger:"blur"}],cover:[{required:!0,message:"请上传封面图片",trigger:"blur"}]}},EN0h:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticStyle:{"padding-top":"20px"}},[i("Form",{ref:"formItem",attrs:{"label-width":80,rules:t.ruleValidate}},[i("Form-item",{attrs:{label:"专栏名称",prop:"name"}},[i("i-input",{staticStyle:{width:"320px"},attrs:{placeholder:"专栏名称"},model:{value:t.submitData.name,callback:function(e){t.$set(t.submitData,"name",e)},expression:"submitData.name"}})],1),t._v(" "),i("Form-item",{attrs:{label:"专栏描述",prop:"description"}},[i("i-input",{staticStyle:{width:"320px"},attrs:{placeholder:"专栏描述"},model:{value:t.submitData.description,callback:function(e){t.$set(t.submitData,"description",e)},expression:"submitData.description"}})],1),t._v(" "),i("Form-item",{attrs:{label:"封面图",prop:"cover"}},[i("m-upload-image",{attrs:{"default-images":t.cover},on:{"on-success":t.createCoverData}})],1),t._v(" "),i("Form-item",{attrs:{label:"包含教程"}},[i("i-input",{staticStyle:{width:"520px"},attrs:{type:"textarea",rows:4,placeholder:"输入教程id，用英文逗号隔开"},model:{value:t.submitData.normal_course_ids,callback:function(e){t.$set(t.submitData,"normal_course_ids",e)},expression:"submitData.normal_course_ids"}})],1),t._v(" "),i("Form-item",{attrs:{label:"包含线上课"}},[i("i-input",{staticStyle:{width:"520px"},attrs:{type:"textarea",rows:4,placeholder:"输入线上课id，用英文逗号隔开"},model:{value:t.submitData.online_course_ids,callback:function(e){t.$set(t.submitData,"online_course_ids",e)},expression:"submitData.online_course_ids"}})],1),t._v(" "),i("div",{staticStyle:{"margin-top":"30px"}},[i("i-button",{staticStyle:{width:"80px","margin-right":"20px"},attrs:{type:"primary"},on:{click:t.submit}},[t._v("\n                保存\n            ")]),t._v(" "),i("i-button",{staticStyle:{width:"80px"}},[t._v("取消")])],1)],1)],1)},staticRenderFns:[]}},QNSm:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i("sa35"),r=i.n(a);e.default={name:"column-add",components:{mColumnForm:r.a},computed:{id:function(){return this.$route.params.id}}}},hkvD:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i("DD/B"),r={addApi:{api:{path:"/boss/education/courses/columns/create"}},editApi:function(t){return{api:{path:"/boss/education/courses/columns/"+t+"/update"}}},getDetail:function(t){return{api:{path:"/boss/education/courses/courses/columns/"+t,params:{fields:'{id,name,description,normal_course_ids,online_course_ids,cover{s(w:1080,format:"webp"){url,width,height,origin}}}}'}}}}};e.default={name:"TopicForm",props:{model:{type:String,default:"edit"},id:{type:[String,Number],default:""}},data:function(){return{ruleValidate:a.a,cover:[],submitData:{name:"",description:"",cover:[],normal_course_ids:"",online_course_ids:""}}},methods:{createCoverData:function(t){t.forEach(function(t){t.path=t.url,delete t.url}),this.hasChoice=!0,this.submitData.cover=t[0]},submit:function(){var t=this;if(""===this.submitData.normal_course_ids&&""===this.submitData.online_course_ids)return this.$Message.error("教程和线上课不能全为空"),!1;var e="add"===this.model?r.addApi:r.editApi(this.id);if(!this.hasChoice)try{var i={path:this.cover[0].url,width:this.submitData.cover.s.width,height:this.submitData.cover.s.height};this.submitData.cover=i}catch(t){}this.$Util.api.post(e,this.submitData,this).then(function(e){0===e.error_code&&t.back()})},createImage:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t?[{url:t.s.origin}]:[]},ready:function(){var t=this;"add"!==this.model&&this.$Util.api.get(r.getDetail(this.id),this).then(function(e){t.submitData=e.data,t.cover=t.createImage(e.data.cover)})},back:function(){var t=this.$route.query.ref;t?window.location.href=t:window.location.hash="/education/column/column/list"}},mounted:function(){this.ready()}}},mmEn:function(t,e,i){var a=i("VU/8")(i("QNSm"),i("6Cl9"),null,null);t.exports=a.exports},sa35:function(t,e,i){i("+qSk");var a=i("VU/8")(i("hkvD"),i("EN0h"),"data-v-6e3dcf4a",null);t.exports=a.exports},"u0M/":function(t,e,i){e=t.exports=i(0)(),e.push([t.i,"",""])}});