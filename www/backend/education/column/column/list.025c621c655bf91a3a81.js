webpackJsonp([257],{TTWz:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("m-page-list",{attrs:{path:t.api.path,params:t.api.params,columns:t.columns,"sort-key":"ordering","sort-index":5,"sort-path":t.sortInfoApi.path,sortable:t.sortable,"page-info-path":t.pageInfoApi.path,"page-info-params":t.pageInfoApi.params},on:{"on-page-info-success":t.handleListPageInfoSuccess}},[o("m-action-bar",{attrs:{slot:"search"},slot:"search"},[o("m-action-search-bar",{attrs:{"search-condition":t.searchCondition,"search-condition-handle":t.searchConditionHandle}},[o("m-form-item",[o("Input",{staticStyle:{width:"150px"},attrs:{placeholder:"专栏名称"},model:{value:t.searchCondition.name,callback:function(e){t.$set(t.searchCondition,"name",e)},expression:"searchCondition.name"}})],1),t._v(" "),o("m-form-item",[o("Input",{staticStyle:{width:"150px"},attrs:{placeholder:"专栏id"},model:{value:t.searchCondition.id,callback:function(e){t.$set(t.searchCondition,"id",e)},expression:"searchCondition.id"}})],1)],1)],1),t._v(" "),o("m-action-bar",[o("m-action-button-add",{attrs:{route:t.addRoute}})],1)],1)},staticRenderFns:[]}},b2rI:function(t,e,o){var n=o("VU/8")(o("luEV"),o("TTWz"),null,null);t.exports=n.exports},luEV:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={props:{type:"text",size:"small"},style:{display:"block",color:"#39f",padding:0}};e.default={name:"app",data:function(){var t=this;return{addRoute:"/education/column/column/add",sortable:!0,searchTypeSource:{},searchCondition:{name:"",id:""},sortInfoApi:{path:"/boss/education/courses/columns/sort"},api:{path:"/boss/education/courses/columns/find-list",params:{fields:"{id,name,description,cover,ordering,course_count,display}",limit:24,offset:0}},pageInfoApi:{path:"/boss/education/courses/columns/list-page-info",params:{}},columns:[{title:"编号",render:function(t,e){return t("div",e.row.id)}},{title:"专栏名称",render:function(t,e){return t("div",e.row.name)}},{title:"教程数",render:function(t,e){return t("div",e.row.course_count)}},{title:"封面图",render:function(t,e){return t("img",{attrs:{src:e.row.cover}})}},{title:"是否可见",render:function(e,o){var n=o.row,i=n.id,a={attrs:{type:"checkmark"},style:{display:"block",color:"#42b983",cursor:"pointer"}},r={attrs:{type:"close"},style:{display:"block",color:"#e91e63",cursor:"pointer"}},s=1===n.display?a:r,c=[];return c[0]=e("Icon",Object.assign(s,{nativeOn:{click:function(){t.editDisplay(i)}}})),e("div",c)}},{title:"操作",render:function(e,o){var i=[],a=o.row,r=a.id;return i[0]=e("Button",Object.assign(n,{on:{click:function(){t.toEdit(r)}}}),"编辑"),i[1]=e("Button",Object.assign(n,{on:{click:function(){t.toCheck(r)}}}),"查看"),i[2]=e("Button",Object.assign(n,{on:{click:function(){t.confirmDelete(r)}}}),"删除"),e("div",i)}}],responseHandle:function(t){null===t.data&&(t.data=[]);for(var e in t.data){t.data[e].price<=0?t.data[e].price="免费":1==t.data[e].course_type&&(t.data[e].price=t.data[e].price+"钻")}return t}}},methods:{handleListPageInfoSuccess:function(t){},searchConditionHandle:function(t){var e=0===t.id.length&&0===t.name.length;return this.sortable=e,t},editDisplay:function(t){var e={path:"/boss/education/courses/columns/"+t+"/display"};this.$Util.api.post({api:e}).then(function(t){0===t.error_code&&window.location.reload()})},toEdit:function(t){window.location.href="/backend/#/education/column/column/edit/"+t},toCheck:function(t){window.location.href="/backend/#/education/column/column/detail/"+t},confirmDelete:function(t){var e=this;this.$Modal.confirm({title:"确定删除该专栏？",onOk:function(){e.toDelete(t)}})},toDelete:function(t){var e=this,o={path:"/boss/education/courses/courses/columns/"+t};this.$Util.api.delete({api:o},this).then(function(t){if(0===t.error_code)return void window.location.reload();e.$Message.error(t.error_description)})}}}}});