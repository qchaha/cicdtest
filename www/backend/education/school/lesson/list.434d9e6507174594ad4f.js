webpackJsonp([240],{ZuKo:function(o,t){o.exports={render:function(){var o=this,t=o.$createElement,e=o._self._c||t;return e("m-page-list",{attrs:{path:o.api.path,params:o.api.params,columns:o.columns,"sort-key":"ordering","sort-index":5,sortable:"","sort-path":o.sortInfoApi.path,methods:o.methods,"response-handle":o.responseHandle,"page-info-path":o.pageInfoApi.path,"page-info-params":o.pageInfoApi.params}},[e("m-action-bar",[e("m-action-button-add",{attrs:{route:o.addRoute}})],1)],1)},staticRenderFns:[]}},"eW+x":function(o,t,e){var n=e("VU/8")(e("z93J"),e("ZuKo"),null,null);o.exports=n.exports},z93J:function(o,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={add:{api:{path:"/boss/education/school/hot-lesson/add"}}};t.default={name:"app",data:function(){return{addRoute:"/education/school/lesson/add/"+this.$route.params.schoolId,api:{path:"/boss/education/school/lesson/find-list",params:{fields:"{id,school_id,title,lessons{id},start_time,end_time,ordering,is_hot}",schoolId:this.$route.params.schoolId}},sortInfoApi:{path:"/boss/education/school/lesson/sort?schoolId="+this.$route.params.schoolId,params:{schoolId:this.$route.params.schoolId}},pageInfoApi:{path:"/boss/education/school/lesson/list-page-info",params:{schoolId:this.$route.params.schoolId}},columns:[{title:"课程id",key:"id"},{title:"课程名称",key:"title"},{title:"是否热门课程",key:"hot"},{title:"显示开始时间",key:"start_time"},{title:"显示结束时间",key:"end_time"},{title:"操作",key:"action",render:function(o,t){var e=[],a=[{name:"编辑",handle:function(){location.hash="/education/school/lesson/edit/"+t.row.school_id+"/"+t.row.id}},{name:"删除",handle:function(){confirm("确认删除?")&&(bus.$emit("on-loading"),vm.$Util.api.delete({api:{path:"/boss/education/school/lesson/delete",params:{lessonId:t.row.id}}},vm).then(function(){location.reload()},function(o){alert(o)}))}},{name:"每日课程",handle:function(){location.hash="/education/school/lesson/period/"+t.row.id}},{name:"复制本课",handle:function(){if(confirm("确认复制?")){bus.$emit("on-loading");var o={id:t.row.id};vm.$Util.api.post({api:{path:"/boss/education/school/lesson/copy"}},o,vm).then(function(o){0==o.error_code?(vm.$Notice.success({title:"复制成功",desc:""}),bus.$emit("on-loading"),location.reload()):(vm.$Notice.warning({title:"请求失败",desc:o.error_description}),bus.$emit("on-loading"))},function(o){bus.$emit("on-loading"),alert(o)})}}}];return t.row.is_hot?a.push({name:"从热门课程移除",handle:function(){confirm("确认移除?")&&(bus.$emit("on-loading"),vm.$Util.api.delete({api:{path:"/boss/education/school/hot-lesson/delete",params:{id:t.row.id}}},vm).then(function(){location.reload()},function(o){alert(o)}))}}):a.push({name:"添加到热门课程",handle:function(){bus.$emit("on-loading");var o={id:t.row.id};vm.$Util.api.post(n.add,o,vm).then(function(){location.reload()},function(o){alert(o)})}}),a.map(function(t){e.push(o("i-button",{props:{type:"text",size:"small"},on:{click:function(){t.handle()}}},[o("span",{style:{color:"#39f"}},t.name)]))}),o("div",e)}}],methods:{},responseHandle:function(o,t){return null!==o.data&&o.data.map(function(o){return o.start_time=t.$Util.dateFormat(o.start_time,"yyyy-MM-dd hh:mm:ss"),o.end_time=t.$Util.dateFormat(o.end_time,"yyyy-MM-dd hh:mm:ss"),o.is_hot?o.hot='<p style="color:#00cc66;">是</p>':o.hot='<p style="color:#ff3300;">否</p>',o}),o}}}}}});