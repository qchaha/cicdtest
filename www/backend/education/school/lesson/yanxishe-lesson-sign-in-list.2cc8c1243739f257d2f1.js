webpackJsonp([237],{"D17+":function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={resource:{api:{path:"/boss/education/school/lesson/find-location-and-period-info",params:{fields:"{id,title,lesson{school{name,location{province,city,district,address,summary}}}}",periodId:0}}}};t.default={name:"app",data:function(){return{location:"",api:{path:"/boss/education/school/lesson/yanxishe-lesson-sign-in-list",params:{fields:"{uid,create_time,period_id,user{uid,phone,user_name}}",periodId:this.$route.params.periodId}},exportApi:{api:{path:"/boss/education/school/lesson/export",params:{fields:"{uid,create_time,period_id,user{uid,phone,user_name}}",periodId:this.$route.params.periodId}}},regions:[],columns:[{title:"UID",key:"uid"},{title:"昵称",key:"username",render:function(e,t){return e("p",t.row.user.user_name)}},{title:"手机号",key:"phone",render:function(e,t){return e("p",t.row.user.phone)}},{title:"签到时间",key:"create_time"}]}},methods:{responseHandle:function(e){return null!==e.data&&e.data.map(function(e){return 0!==e.create_time?e.create_time=vm.$Util.dateFormat(e.create_time,"yyyy-MM-dd hh:mm:ss"):e.create_time='<p style="color:#ff0000;">未签到</p>',e}),e},loadResource:function(){bus.$emit("on-loading");var e=this;this.$Util.api.get(i.resource,e).then(function(e){bus.$emit("on-loading"),this.location=e.data.lesson.school.location.province+" "+e.data.lesson.school.location.city+" "+e.data.lesson.school.location.summary+" "+e.data.lesson.school.name+" "+e.data.title},function(t){bus.$emit("on-loading"),e.$Message.warning("加载资源失败")})},exportExcel:function(){var e=this.exportApi.api.path+"?periodId="+this.exportApi.api.params.periodId+"&fields="+this.exportApi.api.params.fields;window.open(e)}},created:function(){this.$nextTick(function(){this.loadResource()}),i.resource.api.params.periodId=this.$route.params.periodId}}},JiXl:function(e,t,o){var i=o("VU/8")(o("D17+"),o("hYyr"),null,null);e.exports=i.exports},hYyr:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("m-page-list",{attrs:{path:e.api.path,params:e.api.params,columns:e.columns,methods:e.methods,"response-handle":e.responseHandle}},[o("p",[e._v("当前："+e._s(e.location)+" 签到情况\n    ")]),e._v(" "),o("label",{staticStyle:{color:"#39f"},on:{click:e.exportExcel}},[e._v("\n        导出\n    ")])])},staticRenderFns:[]}}});