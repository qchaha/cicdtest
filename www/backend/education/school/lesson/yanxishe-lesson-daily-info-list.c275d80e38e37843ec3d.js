webpackJsonp([239],{DfAf:function(s,n,t){var e=t("VU/8")(t("x6Gh"),t("bbvy"),null,null);s.exports=e.exports},bbvy:function(s,n){s.exports={render:function(){var s=this,n=s.$createElement,t=s._self._c||n;return t("m-page-list",{attrs:{path:s.api.path,params:s.api.params,columns:s.columns,methods:s.methods,"page-info-path":s.pageInfoApi.path,"page-info-params":s.pageInfoApi.params}},[t("m-action-bar",[t("i-button",{on:{click:s.back}},[s._v("返回")])],1),s._v(" "),t("p",[s._v("当前："+s._s(s.location)+"\n    ")])],1)},staticRenderFns:[]}},x6Gh:function(s,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var e={resource:{api:{path:"/boss/education/school/lesson/find-location-and-lesson-info",params:{fields:"{id,title,school{id,name,location{province,city,district,address,summary}}}",lessonId:0}}},find:{api:{path:"/boss/education/school/lesson/find-users",params:{fields:"{users{lessonId}}",lessonId:0}}}},o=null;n.default={name:"app",data:function(){return{schoolId:0,location:"",users:[],api:{path:"/boss/education/school/lesson/find-yanxishe-lesson-daily-info-list",params:{fields:"{id,name,title,create_time,getSignInRecord{id},getValuationRecord{id},statistics_info}",lessonId:this.$route.params.lessonId}},pageInfoApi:{path:"/boss/education/school/lesson/list-yanxishe-daily-lesson-page-info",params:{lessonId:this.$route.params.lessonId}},columns:[{title:"第几天的课",key:"name"},{title:"课程名称",key:"title"},{title:"签到情况",key:"signIn",render:function(s,n){return s("span",n.row.getSignInRecord.length+"/"+o.users.length)}},{title:"评价情况",key:"evaluation",render:function(s,n){return s("span",n.row.getValuationRecord.length+"/"+o.users.length)}},{title:"作业情况",key:"assignment_info",render:function(s,n){return s("div",[s("div",[s("span","提交："+n.row.statistics_info.handedAssignmentStudentCount+"/"+o.users.length)]),s("div",[s("span","评价："+n.row.statistics_info.reviewedAssignmentCount+"/"+n.row.statistics_info.assignmentCount)])])}},{title:"操作",key:"action",render:function(s,n){var t=[];return[{name:"签到详情",handle:function(){location.hash="/education/school/lesson/yanxishe-lesson-sign-in-list/"+n.row.id}},{name:"评价详情",handle:function(){location.hash="/education/school/survey/statistics/"+n.row.id}},{name:"作业详情",handle:function(){location.hash="/education/school/lesson/period/assignment/"+n.row.id}}].map(function(n){t.push(s("i-button",{props:{type:"text",size:"small"},on:{click:function(){n.handle()}}},[s("span",{style:{color:"#39f"}},n.name)]))}),s("div",t)}}]}},methods:{back:function(){location.hash="/education/school/lesson/yanxishe-lesson-list/"+this.schoolId},loadResource:function(){var s=this;this.$Util.api.get(e.resource,s).then(function(s){this.location=s.data.school.location.province+" "+s.data.school.location.city+" "+s.data.school.location.summary+" "+s.data.school.name+" "+s.data.title,this.schoolId=s.data.school.id},function(n){bus.$emit("on-loading"),s.$Message.warning("加载资源失败")})},getAllUsers:function(){var s=this;this.$Util.api.get(e.find,s).then(function(s){this.users=s.data},function(n){bus.$emit("on-loading"),s.$Message.warning("加载资源失败")})}},created:function(){this.$nextTick(function(){this.loadResource(),this.getAllUsers()}),o=this,e.resource.api.params.lessonId=this.$route.params.lessonId,e.find.api.params.lessonId=this.$route.params.lessonId}}}});