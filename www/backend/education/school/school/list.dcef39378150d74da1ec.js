webpackJsonp([233],{"4Fzx":function(e,t,o){var n=o("VU/8")(o("yPYh"),o("f+C9"),null,null);e.exports=n.exports},"f+C9":function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("m-page-list",{attrs:{path:e.api.path,params:e.api.params,columns:e.columns,methods:e.methods,"response-handle":e.responseHandle,"page-info-path":e.pageInfoApi.path,"page-info-params":e.pageInfoApi.params},on:{"on-page-info-success":e.handlePageInfoSuccess}},[o("m-action-bar",[o("m-action-button-add",{attrs:{route:e.addRoute}})],1),e._v(" "),o("m-action-bar",{attrs:{slot:"search"},slot:"search"},[o("m-action-search-bar",{attrs:{"search-condition":e.searchCondition,"search-condition-handle":e.searchConditionHandle}},[o("m-form-item",[o("Cascader",{staticStyle:{width:"300px"},attrs:{data:e.regions,"change-on-select":""},model:{value:e.searchCondition.region,callback:function(t){e.$set(e.searchCondition,"region",t)},expression:"searchCondition.region"}})],1),e._v(" "),o("m-form-item",{attrs:{label:""}},[o("Input",{staticStyle:{width:"150px"},attrs:{placeholder:"输入名称搜索"},model:{value:e.searchCondition.name,callback:function(t){e.$set(e.searchCondition,"name",t)},expression:"searchCondition.name"}})],1)],1)],1)],1)},staticRenderFns:[]}},yPYh:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={add:{api:{path:"/boss/education/school/hot-school/add"}}};t.default={name:"app",data:function(){return{addRoute:"/education/school/school/add",api:{path:"/boss/education/school/school/find-list",params:{fields:"{id,name,all_lessons{id},start_time,end_time,location{city},is_hot}"}},pageInfoApi:{path:"/boss/education/school/school/list-page-info",params:{}},regions:[],columns:[{title:"学校id",key:"id"},{title:"学校名称",key:"name"},{title:"城市",key:"city",render:function(e,t){return e("p",t.row.location.city)}},{title:"是否热门学校",key:"hot"},{title:"所含课程数",key:"lessonCount",render:function(e,t){return e("span",t.row.all_lessons.length)}},{title:"显示开始时间",key:"start_time"},{title:"显示结束时间",key:"end_time"},{title:"操作",key:"action",render:function(e,t){var o=[],a=[{name:"编辑",handle:function(){location.hash="/education/school/school/edit/"+t.row.id}},{name:"查看课程",handle:function(){location.hash="/education/school/lesson/list/"+t.row.id}},{name:"学员评价",handle:function(){location.hash="/education/school/comment/list/"+t.row.id}},{name:"删除",handle:function(){confirm("确认删除?")&&(bus.$emit("on-loading"),vm.$Util.api.delete({api:{path:"/boss/education/school/school/delete",params:{id:t.row.id}}},vm).then(function(){location.reload()},function(e){alert(e)}))}}];return t.row.is_hot?a.push({name:"从热门学校移除",handle:function(){confirm("确认移除?")&&(bus.$emit("on-loading"),vm.$Util.api.delete({api:{path:"/boss/education/school/hot-school/delete",params:{id:t.row.id}}},vm).then(function(){location.reload()},function(e){alert(e)}))}}):a.push({name:"添加到热门学校",handle:function(){bus.$emit("on-loading");var e={id:t.row.id};vm.$Util.api.post(n.add,e,vm).then(function(){location.reload()},function(e){alert(e)})}}),a.map(function(t){o.push(e("i-button",{props:{type:"text",size:"small"},on:{click:function(){t.handle()}}},[e("span",{style:{color:"#39f"}},t.name)]))}),e("div",o)}}],responseHandle:function(e,t){return null!==e.data&&e.data.map(function(e){return e.start_time=t.$Util.dateFormat(e.start_time,"yyyy-MM-dd hh:mm:ss"),e.end_time=t.$Util.dateFormat(e.end_time,"yyyy-MM-dd hh:mm:ss"),e.is_hot?e.hot='<p style="color:#00cc66;">是</p>':e.hot='<p style="color:#ff3300;">否</p>',e}),e},searchConditionHandle:function(e){return e[e.select]=e.keyword,e.region&&(e.province_id=e.region[0],e.city_id=e.region[1]),e},searchCondition:{name:"",region:[],province_id:0,city_id:0}}},methods:{handlePageInfoSuccess:function(e){var t=[];for(var o in e.data.filter.regions){var n=e.data.filter.regions[o],a={value:n.area_code,label:n.name,children:[]};for(var i in n.cities){var s=n.cities[i],r={value:s.area_code,label:s.name,children:[]};a.children.push(r)}t.push(a)}e.data.filter.regions=t,this.regions=t}}}}});