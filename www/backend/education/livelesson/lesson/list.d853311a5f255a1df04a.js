webpackJsonp([254],{Awe2:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("m-page-list",{attrs:{path:t.api.path,params:t.api.params,columns:t.columns,"response-handle":t.responseHandle,"page-info-path":t.pageInfoApi.path,"page-info-params":t.pageInfoApi.params}},[a("m-action-bar",[a("m-action-button-add",{attrs:{route:t.addRoute}})],1),t._v(" "),a("m-action-bar",{attrs:{slot:"search"},slot:"search"},[a("m-action-search-bar",{attrs:{"search-condition":t.searchCondition}},[a("m-form-item",{attrs:{label:"显示状态"}},[a("i-select",{staticStyle:{width:"260px"},model:{value:t.searchCondition.show_status,callback:function(e){t.$set(t.searchCondition,"show_status",e)},expression:"searchCondition.show_status"}},[a("i-option",{attrs:{value:0}},[t._v("全部")]),t._v(" "),a("i-option",{attrs:{value:1}},[t._v("线上显示")]),t._v(" "),a("i-option",{attrs:{value:2}},[t._v("未在线上显示")])],1)],1),t._v(" "),a("m-form-item",{attrs:{label:""}},[a("Input",{staticStyle:{width:"150px"},attrs:{placeholder:"输入名称搜索"},model:{value:t.searchCondition.title,callback:function(e){t.$set(t.searchCondition,"title",e)},expression:"searchCondition.title"}})],1),t._v(" "),a("m-form-item",{attrs:{label:""}},[a("Input",{staticStyle:{width:"150px"},attrs:{placeholder:"输入ID搜索"},model:{value:t.searchCondition.id,callback:function(e){t.$set(t.searchCondition,"id",e)},expression:"searchCondition.id"}})],1)],1)],1)],1)},staticRenderFns:[]}},nG67:function(t,e,a){var n=a("VU/8")(a("t0lT"),a("Awe2"),null,null);t.exports=n.exports},t0lT:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"list",data:function(){return{addRoute:"/education/livelesson/lesson/add",api:{path:"/boss/education/livelesson/lesson/find-list",params:{fields:"{id,title,sort,diamond_coin_price,status,display_status,attendance_count,limited_count,teacher{uid},live_room_id}"}},pageInfoApi:{path:"/boss/education/livelesson/lesson/list-page-info",params:{}},columns:[{title:"ID",key:"id"},{title:"课程名称",key:"title"},{title:"价格",key:"diamond_coin_price"},{title:"显示状态",key:"display_status"},{title:"线上课堂状态",key:"status",render:function(t,e){var a=e.row.status.split("-");return t("div",{style:{color:a[1]}},a[0])}},{title:"参加人数",key:"participant_count",render:function(t,e){var a=e.row.participant_count.split("-");return t("div",{style:{color:a[1]}},a[0])}},{title:"操作",key:"action",render:function(t,e){var a=[],n=[{name:"查看",handle:function(){location.hash="/education/livelesson/lesson/detail/"+e.row.id}},{name:"编辑",handle:function(){location.hash="/education/livelesson/lesson/edit/"+e.row.id}},{name:"删除",handle:function(){confirm("确认删除?")&&(bus.$emit("on-loading"),vm.$Util.api.delete({api:{path:"/boss/education/livelesson/lesson/delete",params:{id:e.row.id}}},vm).then(function(){location.reload()},function(t){alert(t)}))}},{name:"发送路由",handle:function(){var t=e.row.teacher.uid,a=e.row.id,n=e.row.title,i="/admin.php?m=Admin&c=SystemNotice&a=addSingle",o="老师好，您执教的课程"+n+"已上线，请点击链接查看，并及时参与学员讨论，谢谢~",s="meijiabang://live_lessons/"+a+"?index=0",l=i+"&uid="+t+"&content="+o+"&app_route="+s;location.href="//"+window.location.host+l}},{name:"再次上线",handle:function(){location.hash="/education/livelesson/lesson/relive/"+e.row.id}}];return"线上显示"==e.row.display_status&&n.push({name:"调整排序",handle:function(){location.hash="/education/livelesson/lesson/sort/"+e.row.id+"/"+e.row.sort}}),n.map(function(e){a.push(t("i-button",{props:{type:"text",size:"small"},on:{click:function(){e.handle()}}},[t("span",{style:{color:"#39f"}},e.name)]))}),t("div",a)}}],responseHandle:function(t){for(var e in t.data){t.data[e].participant_count=t.data[e].attendance_count+"/"+t.data[e].limited_count;t.data[e].attendance_count==t.data[e].limited_count&&(t.data[e].participant_count+=" (满员)-#f57"),2==t.data[e].status?t.data[e].status="已结束":t.data[e].status="未结束",0==t.data[e].display_status?t.data[e].display_status="未在线上显示":t.data[e].display_status="线上显示"}return t},searchCondition:{title:"",show_status:0,id:""}}},created:function(){var t=this;bus.$on("on-search",function(e){if(1==e.show_status){var a={title:"排序",key:"sort"};7==t.columns.length&&t.columns.splice(t.columns.length-2,0,a)}else"sort"==t.columns[t.columns.length-3].key&&t.columns.splice(t.columns.length-3,1)})}}}});