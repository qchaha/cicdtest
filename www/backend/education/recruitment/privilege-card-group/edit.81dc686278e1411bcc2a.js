webpackJsonp([64],{"/FXN":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("henV"),r=i.n(a);t.default={name:"app",components:{MPrivilegeCardGroupForm:r.a},data:function(){return{id:this.$route.params.id}}}},"6YaG":function(e,t,i){t=e.exports=i(0)(),t.push([e.i,"[class*=span][data-v-19b396bd]{margin-left:0!important}.inlineCard[data-v-19b396bd]{display:inline-block}.mix[data-v-19b396bd]{width:400px}.B1[data-v-19b396bd]{width:400px;float:left}.adSenseGroup[data-v-19b396bd]{margin:20px 0}.clear[data-v-19b396bd]{clear:both;overflow:hidden}.hidden[data-v-19b396bd]{display:none!important}div[required] span.adSenseItemLabel[data-v-19b396bd]:before,div[required] span.adSenseLabel[data-v-19b396bd]:before{content:'*';color:red;font-size:20px}",""])},Ibs6:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticStyle:{"padding-top":"20px"}},[i("Form",{attrs:{model:e.formItem,"label-width":120}},[i("Form-item",{attrs:{label:"特权卡活动标题"}},[i("Input",{staticStyle:{width:"300px"},attrs:{maxlength:30,placeholder:"特权卡专场标题(30字以内)"},model:{value:e.formItem.title,callback:function(t){e.$set(e.formItem,"title",t)},expression:"formItem.title"}})],1),e._v(" "),i("Form-item",{attrs:{label:"特权卡分类"}},[i("Select",{staticStyle:{width:"200px"},attrs:{clearable:"",filterable:"",placeholder:"请选择分类"},model:{value:e.formItem.code,callback:function(t){e.$set(e.formItem,"code",t)},expression:"formItem.code"}},e._l(e.categories,function(t){return i("Option",{attrs:{value:t.code}},[e._v(e._s(t.name))])}))],1),e._v(" "),i("Form-item",{attrs:{label:"特权卡有效期"}},[i("Date-picker",{staticStyle:{width:"300px"},attrs:{type:"daterange",placeholder:"选择有效日期",options:e.options,value:e.formItem.valid_time},on:{"on-change":e.getValidTime}})],1),e._v(" "),i("Form-item",{attrs:{label:"小秘书文案"}},[i("Input",{staticStyle:{width:"300px"},attrs:{maxlength:50,placeholder:"",type:"textarea",autosize:{minRows:2,maxRows:5}},model:{value:e.formItem.notice,callback:function(t){e.$set(e.formItem,"notice",t)},expression:"formItem.notice"}})],1),e._v(" "),i("Form-item",{attrs:{label:"跳转路由"}},[i("m-app-route",{attrs:{placeholder:"输入路由","default-route":e.formItem.app_route},on:{"on-ok":e.getRoute}})],1),e._v(" "),i("Form-item",[i("i-button",{attrs:{type:"primary"},nativeOn:{click:function(t){return e.submit(t)}}},[e._v("提交")]),e._v(" "),i("i-button",{staticStyle:{"margin-left":"8px"},attrs:{type:"ghost"},on:{click:e.back}},[e._v("取消")])],1)],1)],1)},staticRenderFns:[]}},OL7L:function(e,t,i){var a=i("6YaG");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);i("rjj0")("290c063a",a,!0)},PRYf:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a={create:{api:{path:"/boss/education/recruitment/privilege-card-group/create"}},update:{api:{path:"/boss/education/recruitment/privilege-card-group/update"}},remove:{api:{path:"/boss/education/recruitment/privilege-card-group/delete",params:{id:0}}},find:{api:{path:"/boss/education/recruitment/privilege-card-group/find",params:{fields:"{id,title,code,valid_start_time,valid_end_time,notice,app_route}",id:0}}},resource:{api:{path:"/boss/education/recruitment/privilege-card-group/add-page-info",params:{fields:"{categories{name,code}}"}},responseHandle:function(e){return e.categories=e.data.form.categories,e}}};t.default={name:"MTagsForm",props:{id:{type:String,name:""},usage:{type:String,name:"edit"}},data:function(){return{formItem:{id:0,title:"",code:"",valid_time:[],valid_start_time:0,valid_end_time:0,notice:"",app_route:""},categories:[],options:{disabledDate:function(e){return e&&e.valueOf()<Date.now()-864e5}}}},methods:{getRoute:function(e){this.formItem.app_route=e},getValidTime:function(e){var t=new Date(e[0]),i=new Date(e[1]);this.formItem.valid_start_time=t.getTime()/1e3-28800,this.formItem.valid_end_time=i.getTime()/1e3-28800+86400-1},back:function(){location.hash="/education/recruitment/privilege-card-group/list"},remove:function(){if("edit"===this.usage){var e=this.id;if(!parseInt(e))return alert("特权卡活动id格式有误"),!1;e=parseInt(e),this.formItem.id=e,a.remove.api.params.id=e,confirm("确认删除?")&&vm.$Util.api.delete(a.remove).then(this.back())}},submit:function(){if(this.validateFormData()){var e=this.getRequestParams();this.submitRequest(e)}},validateFormData:function(){return 0===this.formItem.code.length?(this.$Message.warning("特权卡分类不能为空"),!1):0!==this.formItem.valid_start_time.length&&0!==this.formItem.valid_end_time.length||(this.$Message.warning("有效期不能为空"),!1)},getRequestParams:function(){var e={title:this.formItem.title,code:this.formItem.code,valid_start_time:this.formItem.valid_start_time,valid_end_time:this.formItem.valid_end_time,notice:this.formItem.notice,app_route:this.formItem.app_route};return"edit"===this.usage&&(e.id=this.formItem.id),e},submitRequest:function(e){bus.$emit("on-loading");var t=this,i=a.create;"edit"===this.usage&&(i=a.update),this.$Util.api.post(i,e,t).then(function(){t.$Message.success("请求成功"),t.back()},function(e){bus.$emit("on-loading"),t.$Message.warning("请求失败")})},loadResource:function(){var e=this;bus.$emit("on-loading"),this.$Util.api.get(a.resource,e).then(function(t){bus.$emit("on-loading"),e.categories=t.categories,"edit"===e.usage&&e.$nextTick(function(){e.loadPrivilegeCardCategory()}),e.submitEnable=!1},function(t){e.$Message.warning("加载资源失败")})},loadPrivilegeCardCategory:function(){var e=this;bus.$emit("on-loading"),this.$Util.api.get(a.find,e).then(function(t){bus.$emit("on-loading");var i=new Date;i=t.data.valid_start_time?i.setTime(1e3*t.data.valid_start_time):"";var a=new Date;a=t.data.valid_end_time?a.setTime(1e3*t.data.valid_end_time):"",t.data.valid_time=[i,a],e.formItem=t.data,e.submitEnable=!1},function(t){bus.$emit("on-loading"),e.$Message.warning("加载特权卡活动详情失败")})},initIds:function(){if("edit"===this.usage){var e=this.id;if(!parseInt(e))return alert("特权卡活动id格式有误"),!1;e=parseInt(e),this.formItem.id=e,a.find.api.params.id=e}}},created:function(){this.initIds(),"edit"===this.usage&&(a.resource.api.path="/boss/education/recruitment/privilege-card-group/edit-page-info"),this.$nextTick(function(){this.loadResource()})}}},dM0R:function(e,t,i){var a=i("VU/8")(i("/FXN"),i("iCMZ"),null,null);e.exports=a.exports},henV:function(e,t,i){i("OL7L");var a=i("VU/8")(i("PRYf"),i("Ibs6"),"data-v-19b396bd",null);e.exports=a.exports},iCMZ:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("m-page-edit",[i("m-privilege-card-group-form",{attrs:{usage:"edit",id:e.id}})],1)},staticRenderFns:[]}}});