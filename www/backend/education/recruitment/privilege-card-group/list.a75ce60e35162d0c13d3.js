webpackJsonp([245],{Q8Hl:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"list",data:function(){return{addRoute:"/education/recruitment/privilege-card-group/add",api:{path:"/boss/education/recruitment/privilege-card-group/find-list",params:{fields:"{id,title,valid_start_time,valid_end_time,category{code,name}}",limit:24}},categories:[],pageInfoApi:{path:"/boss/education/recruitment/privilege-card-group/list-page-info",params:{fields:"{categories{name,code}}"}},columns:[{title:"特权卡活动ID",key:"id"},{title:"特权卡活动标题",key:"title"},{title:"特权卡种类",key:"category",render:function(e,t){return e("div",t.row.category?t.row.category.name:"")}},{title:"有效期的开始时间",key:"valid_start_time"},{title:"有效期的结束时间",key:"valid_end_time"},{title:"操作",key:"action",render:function(e,t){return e("m-action-list",{props:{list:[{text:"编辑",click:function(){location.hash="/education/recruitment/privilege-card-group/edit/"+t.row.id}},{text:"删除",color:"#f57",click:function(){confirm("确认删除?")&&vm.$Util.api.delete({api:{path:"/boss/education/recruitment/privilege-card-group/delete",params:{id:t.row.id}},loading:!0})}}]}})}}],responseHandle:function(e,t){var i=null===e.data?[]:e.data;for(var a in i)i[a].valid_start_time=t.$Util.dateFormat(i[a].valid_start_time,"yyyy-MM-dd<br>hh:mm:ss"),i[a].valid_end_time=t.$Util.dateFormat(i[a].valid_end_time,"yyyy-MM-dd<br>hh:mm:ss");return e},searchCondition:{title:"",code:"",valid_times:[],start_time:"",end_time:""},searchConditionHandle:function(e){return e.valid_times&&(e.valid_times[0]&&"number"!=typeof e.valid_times[0]?e.start_time=Date.parse(e.valid_times[0])/1e3:e.start_time=0,e.valid_times[1]&&"number"!=typeof e.valid_times[1]?(e.end_time=Date.parse(e.valid_times[1])/1e3,e.end_time=e.end_time+86400-1):e.end_time=0),e}}},methods:{handlePageInfoSuccess:function(e){this.categories=e.data.filter.categories}}}},Ubuw:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("m-page-list",{attrs:{path:e.api.path,params:e.api.params,columns:e.columns,"page-info-path":e.pageInfoApi.path,"response-handle":e.responseHandle,"page-info-params":e.pageInfoApi.params},on:{"on-page-info-success":e.handlePageInfoSuccess}},[i("m-action-bar",[i("m-action-button-add",{attrs:{route:e.addRoute}})],1),e._v(" "),i("m-action-bar",{attrs:{slot:"search"},slot:"search"},[i("m-action-search-bar",{attrs:{"search-condition":e.searchCondition,"search-condition-handle":e.searchConditionHandle}},[i("m-form-item",[i("Date-picker",{attrs:{type:"daterange",placeholder:"特权卡有效期"},model:{value:e.searchCondition.valid_times,callback:function(t){e.$set(e.searchCondition,"valid_times",t)},expression:"searchCondition.valid_times"}})],1),e._v(" "),i("m-form-item",[i("Input",{staticStyle:{width:"150px"},attrs:{placeholder:"输入活动名称搜索"},model:{value:e.searchCondition.title,callback:function(t){e.$set(e.searchCondition,"title",t)},expression:"searchCondition.title"}}),e._v(" "),i("Select",{staticStyle:{width:"200px"},attrs:{clearable:"",filterable:"",placeholder:"请选择分类"},model:{value:e.searchCondition.code,callback:function(t){e.$set(e.searchCondition,"code",t)},expression:"searchCondition.code"}},e._l(e.categories,function(t){return i("Option",{attrs:{value:t.code}},[e._v(e._s(t.name))])}))],1)],1)],1)],1)},staticRenderFns:[]}},jIzq:function(e,t,i){var a=i("VU/8")(i("Q8Hl"),i("Ubuw"),null,null);e.exports=a.exports}});