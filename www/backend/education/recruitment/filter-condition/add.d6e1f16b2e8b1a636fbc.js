webpackJsonp([39],{"+5Oe":function(e,t,a){var i=a("VU/8")(a("luMP"),a("1IYB"),null,null);e.exports=i.exports},"1IYB":function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("m-page-add",[a("m-filter-condition-form",{attrs:{usage:"add"}})],1)},staticRenderFns:[]}},OLor:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{"padding-top":"20px"}},[a("Form",{attrs:{model:e.formItem,"label-width":100}},[a("Form-item",{attrs:{label:"标题"}},[a("Input",{staticStyle:{width:"200px"},attrs:{placeholder:"10字内",maxlength:10},model:{value:e.formItem.title,callback:function(t){e.$set(e.formItem,"title",t)},expression:"formItem.title"}})],1),e._v(" "),a("Form-item",{attrs:{label:"数据类型"}},[a("Radio-group",{model:{value:e.formItem.usage,callback:function(t){e.$set(e.formItem,"usage",t)},expression:"formItem.usage"}},[a("Radio",{attrs:{label:"resume"}},[a("span",[e._v("简历")])]),e._v(" "),a("Radio",{attrs:{label:"company"}},[a("span",[e._v("店铺")])])],1)],1),e._v(" "),a("Form-item",{attrs:{label:""}},[a("Tag",{attrs:{type:"border",color:"red"}},[e._v("自定义配置慎用，请找程序员或产品经理确认")])],1),e._v(" "),a("Form-item",{attrs:{label:""}},[a("Card",{attrs:{bordered:!1}},[a("p",[e._v("配置条件中，个别字段具体值需要填数字，对应关系分别是：")]),e._v(" "),a("p",[e._v("是否男性：0 女性 1 男性 ")]),e._v(" "),a("p",[e._v("工作性质: 1 全职 2 兼职 3 可兼职")]),e._v(" "),a("p",[e._v("求职状态：0 在职暂不考虑 1 在职考虑机会 2 离职随时入职 3 离职一周内入职 4 离职月内入职")]),e._v(" "),a("p",[e._v("系统标签：CPMA 标签 支持 Cpma, CPMA, cpma 任意一个，未支持等级; 建议单独一个条件配置")])])],1),e._v(" "),a("Form-item",{attrs:{label:"数据条件"}},[a("Tabs",{staticStyle:{width:"800px",height:"600px"},model:{value:e.formItem.type,callback:function(t){e.$set(e.formItem,"type",t)},expression:"formItem.type"}},[a("Tab-pane",{attrs:{label:"配置条件",name:"config"}},[a("MFilterConditionEl",{attrs:{usages:e.formItem.usage},on:{"get-item":e.getItem},model:{value:e.formItem.configGroup,callback:function(t){e.$set(e.formItem,"configGroup",t)},expression:"formItem.configGroup"}})],1),e._v(" "),a("Tab-pane",{attrs:{label:"自定义",name:"custom"}},[a("Input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:10},placeholder:"直接输入sql语句的where条件"},model:{value:e.formItem.customSql,callback:function(t){e.$set(e.formItem,"customSql",t)},expression:"formItem.customSql"}}),e._v(" "),a("Card",{attrs:{bordered:!1}},[a("p",[e._v("自定义配置示例:")]),e._v(" "),a("p",[e._v("店铺自定义："),a("br"),e._v("\n                            假如店铺的SQL是：select id from my_company where city_id in (110100000,440100000; "),a("br"),e._v("\n                            职位的SQL是: select id from my_job where property = 1; "),a("br"),e._v("\n                            输入框里填写 company: city_id in (110100000,440100000); job: property = 1;")]),e._v(" "),a("p",[e._v("简历自定义: "),a("br"),e._v("\n                            假如简历的SQL是：select id from my_job_resume where expected_city_id in (110100000,440100000);"),a("br"),e._v("\n                            输入框里填写 expected_city_id in (110100000,440100000) (不需分号）\n                         ")])])],1)],1)],1),e._v(" "),a("Form-item",{attrs:{id:"bottomSubmitCard"}},[a("i-button",{attrs:{type:"primary"},nativeOn:{click:function(t){return e.submit(t)}}},[e._v("提交")]),e._v(" "),a("i-button",{staticStyle:{"margin-left":"8px"},attrs:{type:"ghost"},nativeOn:{click:function(t){return e.back(t)}}},[e._v("取消")])],1)],1)],1)},staticRenderFns:[]}},Q5pt:function(e,t,a){t=e.exports=a(0)(),t.push([e.i,".delete[data-v-bdb35198],.el[data-v-bdb35198]{display:inline-block;vertical-align:top}.el[data-v-bdb35198]{width:150px}.add[data-v-bdb35198]{margin-top:5px}[class*=span][data-v-bdb35198]{margin-left:0}",""])},R9vj:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("c0mO"),o=a.n(i),l={create:{api:{path:"/boss/education/recruitment/filter-condition/create"}},update:{api:{path:"/boss/education/recruitment/filter-condition/update"}},remove:{api:{path:"/boss/education/recruitment/filter-condition/delete",params:{id:0}}},find:{api:{path:"/boss/education/recruitment/filter-condition/find",params:{fields:"{id,title,usage,condition}",id:0}}},resource:{api:{path:"/boss/education/recruitment/filter-condition/add-page-info",params:{}}}};t.default={components:{MFilterConditionEl:o.a},name:"MFilterConditionForm",props:{id:{type:String,name:""},usage:{type:String,name:"edit"}},data:function(){return{formItem:{id:0,title:"",usage:"",condition:[],configGroup:{},customSql:"",type:"config"}}},methods:{back:function(){location.hash="/education/recruitment/filter-condition/list"},submit:function(){if(this.validateFormData()){var e=this.getRequestParams();this.submitRequest(e)}},validateFormData:function(){return 0===this.formItem.title.length?(this.$Message.warning("标题不能为空"),!1):0===this.formItem.usage.length?(this.$Message.warning("数据类型不能为空"),!1):void 0!=this.formItem.customSql||0!=this.formItem.configGroup.length||(this.$Message.warning("数据条件不能为空"),!1)},makeCondition:function(){var e=[];switch(this.formItem.type||"config"){case"config":e={type:"statement",clauses:this.formItem.configGroup};break;case"custom":e={type:"sql",sql:this.formItem.customSql}}return this.formItem.condition=e,e},getRequestParams:function(){var e={};return this.makeCondition(),e={title:this.formItem.title,usage:this.formItem.usage,condition:this.formItem.condition},"edit"===this.usage&&(e.id=this.formItem.id),e},submitRequest:function(e){bus.$emit("on-loading");var t=this,a=l.create;"edit"===this.usage&&(a=l.update),this.$Util.api.post(a,JSON.stringify(e),t).then(function(){t.$Message.success("请求成功"),t.back()},function(e){bus.$emit("on-loading"),t.$Message.warning("请求失败")})},loadResource:function(){var e=this;bus.$emit("on-loading"),this.$Util.api.get(l.resource,e).then(function(t){bus.$emit("on-loading"),"edit"===e.usage&&e.$nextTick(function(){e.loadFormData()}),e.submitEnable=!1},function(t){e.$Message.warning("加载资源失败")})},loadFormData:function(){var e=this;bus.$emit("on-loading"),this.$Util.api.get(l.find,e).then(function(t){if(bus.$emit("on-loading"),t.data.condition){switch(t.data.condition.type||"statement"){case"statement":t.data.configGroup=t.data.condition.clauses,t.data.type="config";break;case"sql":t.data.customSql=t.data.condition.sql,t.data.type="custom"}}e.formItem=t.data,e.submitEnable=!1},function(t){bus.$emit("on-loading"),e.$Message.warning("加载详情失败")})},initIds:function(){if("edit"===this.usage){var e=this.id;if(!parseInt(e))return alert("id格式有误"),!1;e=parseInt(e),this.formItem.id=e,l.find.api.params.id=e}},getItem:function(e){this.formItem.configGroup=e}},created:function(){this.initIds(),"edit"===this.usage&&(l.resource.api.path="/boss/education/recruitment/filter-condition/edit-page-info"),this.$nextTick(function(){this.loadResource()})}}},SNlv:function(e,t,a){a("dvBf");var i=a("VU/8")(a("R9vj"),a("OLor"),"data-v-b8ec5456",null);e.exports=i.exports},WMZd:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("m-card",[a("Form",{attrs:{model:e.formItem,"label-width":80}},[e._l(e.formItem.items,function(t,i){return a("Form-item",[a("Row",[a("div",{staticClass:"el"},[a("Select",{staticStyle:{width:"140px"},attrs:{filterable:"",clearable:"",placeholder:"字段"},model:{value:t.field,callback:function(a){e.$set(t,"field",a)},expression:"item.field"}},e._l(e.fieldsList,function(t){return a("Option",{key:t.value,attrs:{value:t.value}},[e._v(e._s(t.label))])}))],1),e._v(" "),a("div",{staticClass:"el"},[a("Select",{staticStyle:{width:"140px"},attrs:{filterable:"",clearable:"",placeholder:"操作符"},model:{value:t.operator,callback:function(a){e.$set(t,"operator",a)},expression:"item.operator"}},e._l(e.operatorsList,function(t){return a("Option",{attrs:{value:t.value}},[e._v(e._s(t.label))])}))],1),e._v(" "),a("div",{staticClass:"el"},[a("Input",{staticStyle:{width:"140px",display:"inline-block"},attrs:{placeholder:"具体值"},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"item.value"}})],1),e._v(" "),a("div",{staticClass:"delete"},[a("Button",{staticStyle:{"background-color":"#fff"},attrs:{type:"ghost"},on:{click:function(t){e.handleDelete(i)}}},[e._v("删除")])],1)])],1)}),e._v(" "),a("Form-item",[a("div",{staticClass:"add"},[a("Row",{attrs:{span:"12"}},[a("i-col",{attrs:{span:"12"}},[a("Button",{attrs:{type:"ghost",long:"",icon:"plus-round"},on:{click:e.handleAdd}},[e._v("新增一组条件（计算多组条件的交集）")])],1)],1)],1)])],2)],1)},staticRenderFns:[]}},c0mO:function(e,t,a){a("tsfv");var i=a("VU/8")(a("jvIw"),a("WMZd"),"data-v-bdb35198",null);e.exports=i.exports},dvBf:function(e,t,a){var i=a("iazG");"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);a("rjj0")("6dfadcb2",i,!0)},iazG:function(e,t,a){t=e.exports=a(0)(),t.push([e.i,"#bottomSubmitCard[data-v-b8ec5456]{position:fixed;bottom:0;left:0;width:100%;text-align:center}",""])},jvIw:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"MFilterConditionEl",watch:{formItem:{handler:function(e,t){this.$emit("get-item",e)},deep:!0},value:function(){this.formItem=this.value}},props:{index:{type:Number,name:0},value:{type:Object,name:{}},usages:{type:String,name:"resume"}},computed:{fieldsList:function(){return"company"===this.usages?this.CompanyFieldsList:this.ResumeFieldsList}},data:function(){return{formItem:{items:[{field:"",operator:"",value:""}]},operatorsList:[{value:"=",label:"等于(单个)"},{value:"!=",label:"不等于(单个)"},{value:">",label:"大于"},{value:"<",label:"小于"},{value:">=",label:"大于等于"},{value:"<=",label:"小于等于"},{value:"in",label:"在多个列表项内"},{value:"not in",label:"不在多个列表项内"}],CompanyFieldsList:[{value:"province",label:"省份"},{value:"city",label:"城市"},{value:"benefits",label:"福利"},{value:"location_type",label:"位置类型"},{value:"style",label:"店铺风格"},{value:"businesses",label:"业务范围"},{value:"opening_years",label:"开业年限"},{value:"employee",label:"员工人数"},{value:"tags",label:"系统标签"},{value:"experience",label:"工作经验"},{value:"salary_max",label:"最高薪资"},{value:"salary_min",label:"最低薪资"},{value:"property",label:"工作性质"},{value:"skills",label:"擅长"},{value:"job",label:"职位"},{value:"id",label:"ID"},{value:"create_time",label:"创建时间"}],ResumeFieldsList:[{value:"expected_city",label:"期望城市"},{value:"expected_job_salary",label:"期望薪资"},{value:"expected_job_name",label:"职位"},{value:"experience",label:"工作经验"},{value:"expected_job_property",label:"全职/兼职"},{value:"mode",label:"求职状态"},{value:"skills",label:"擅长"},{value:"is_male",label:"是否男性"},{value:"age",label:"年龄"},{value:"tags",label:"系统标签"},{value:"id",label:"ID"},{value:"create_time",label:"创建时间"}]}},methods:{handleDelete:function(e){this.formItem.items.splice(e,1)},handleAdd:function(){this.formItem.items.push({field:"",operator:"",value:""})}}}},luMP:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("SNlv"),o=a.n(i);t.default={name:"app",components:{MFilterConditionForm:o.a},data:function(){return{}}}},tsfv:function(e,t,a){var i=a("Q5pt");"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);a("rjj0")("7360dbfb",i,!0)}});