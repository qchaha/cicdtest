webpackJsonp([250],{fIpO:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("m-page-list",{attrs:{path:e.api.path,params:e.api.params,columns:e.columns,"response-handle":e.responseHandle,"page-info-path":e.pageInfoApi.path,"page-info-params":e.pageInfoApi.params},on:{"on-page-info-success":e.handlePageInfoSuccess}},[i("m-action-bar",[i("m-action-button-add",{attrs:{route:e.addRoute}})],1),e._v(" "),i("m-action-bar",{attrs:{slot:"search"},slot:"search"},[i("m-action-search-bar",{attrs:{"search-condition":e.searchCondition,"search-condition-handle":e.searchConditionHandle}},[i("m-form-item",[i("Date-picker",{attrs:{type:"daterange",placeholder:"招聘时间"},model:{value:e.searchCondition.update_times,callback:function(t){e.$set(e.searchCondition,"update_times",t)},expression:"searchCondition.update_times"}})],1),e._v(" "),i("m-form-item",[i("Cascader",{staticStyle:{width:"300px"},attrs:{data:e.regions,trigger:"hover"},model:{value:e.searchCondition.region,callback:function(t){e.$set(e.searchCondition,"region",t)},expression:"searchCondition.region"}})],1),e._v(" "),i("m-form-item",[i("Input",{model:{value:e.searchCondition.keyword,callback:function(t){e.$set(e.searchCondition,"keyword",t)},expression:"searchCondition.keyword"}},[i("Select",{staticStyle:{width:"80px"},attrs:{slot:"prepend"},slot:"prepend",model:{value:e.searchCondition.select,callback:function(t){e.$set(e.searchCondition,"select",t)},expression:"searchCondition.select"}},[i("Option",{attrs:{value:"id"}},[e._v("店铺ID")]),e._v(" "),i("Option",{attrs:{value:"name"}},[e._v("店铺名称")]),e._v(" "),i("Option",{attrs:{value:"uid"}},[e._v("用户ID")]),e._v(" "),i("Option",{attrs:{value:"nickname"}},[e._v("用户昵称")])],1)],1)],1)],1)],1)],1)},staticRenderFns:[]}},m0x8:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"list",computed:{api:function(){var e={path:"/boss/education/recruitment/company/find-list",params:{fields:"{id,name,creator{uid,nickname},location{province,city,district},tags{name},images{s(w:80){url}},jobs{id},recommend_start_time,recommend_end_time,update_time,completion_percent}"}};return e.params.uid=this.$route.params.uid||0,e}},data:function(){return{searchCondition:{update_times:[],region:[],province_id:0,city_id:0,district_id:0,start_time:"",end_time:"",keyword:"",select:"",id:0,name:"",nickname:"",uid:0},regions:[],addRoute:"/education/recruitment/company/add",pageInfoApi:{path:"/boss/education/recruitment/company/list-page-info",params:{}},columns:[{title:"店铺id",key:"id"},{title:"店铺名称",key:"name"},{title:"用户id & 用户昵称",key:"creator",render:function(e,t){return t.row.creator?e("div",[e("p",t.row.creator.uid),e("p",t.row.creator.nickname)]):""}},{title:"所在地区",key:"location",render:function(e,t){return e("div",[e("p",t.row.location.province),e("p",t.row.location.city),e("p",t.row.location.district)])}},{title:"系统标签",key:"tags",render:function(e,t){var i=[];if(t.row.tags)for(var n in t.row.tags)i.push(e("p",t.row.tags[n].name));return e("div",i)}},{title:"店铺环境",key:"images",width:200,render:function(e,t){var i=[];if(t.row.images)for(var n in t.row.images){if(n>2)break;i.push(e("img",{style:{width:"50px",padding:"0 10px"},attrs:{src:t.row.images[n].s.url}}))}return e("div",i)}},{title:"资料完成度",key:"completion_percent"},{title:"在招职位",key:"jobs",render:function(e,t){return e("div",t.row.jobs.length)}},{title:"招聘时间",key:"update_time"},{title:"置顶状态",key:"recommend_end_time",width:200,render:function(e,t){return t.row.recommend_end_time?e("div",t.row.recommend_start_time+" ~ "+t.row.recommend_end_time):""}},{title:"操作",key:"action",render:function(e,t){return e("m-action-list",{props:{list:[{text:"职位",click:function(){location.hash="/education/recruitment/job/list/"+t.row.id}},{text:"编辑",click:function(){location.hash="/education/recruitment/company/edit/"+t.row.id}},{text:"删除",color:"#f57",click:function(){confirm("确认删除?")&&vm.$Util.api.delete({api:{path:"/boss/education/recruitment/company/delete",params:{id:t.row.id}},loading:!0})}}]}})}}],responseHandle:function(e,t){return e.data.map(function(e){return e.update_time=t.$Util.dateFormat(e.update_time,"yyyy-MM-dd hh:mm:ss"),e.recommend_start_time=e.recommend_start_time?t.$Util.dateFormat(e.recommend_start_time,"yyyy-MM-dd"):"",e.recommend_end_time=e.recommend_end_time?t.$Util.dateFormat(e.recommend_end_time,"yyyy-MM-dd"):"",e}),e},searchConditionHandle:function(e){return e[e.select]=e.keyword,e.update_times.length>0&&(e.update_times[0]&&"number"!=typeof e.update_times[0]?e.start_time=Date.parse(e.update_times[0])/1e3:e.start_time=0,e.update_times[1]&&"number"!=typeof e.update_times[1]?(e.end_time=Date.parse(e.update_times[1])/1e3,e.end_time=e.end_time+86400-1):e.end_time=0),e.region&&(e.province_id=e.region[0],e.city_id=e.region[1],e.district_id=e.region[2]),e}}},methods:{handlePageInfoSuccess:function(e){var t=[];for(var i in e.data.filter.regions){var n=e.data.filter.regions[i],a={value:n.area_code,label:n.name,children:[]};for(var r in n.cities){var o=n.cities[r],d={value:o.area_code,label:o.name,children:[]};for(var s in o.areas){var c=o.areas[s],m={value:c.area_code,label:c.name};d.children.push(m)}a.children.push(d)}t.push(a)}e.data.filter.regions=t,this.regions=t}}}},y9m2:function(e,t,i){var n=i("VU/8")(i("m0x8"),i("fIpO"),null,null);e.exports=n.exports}});