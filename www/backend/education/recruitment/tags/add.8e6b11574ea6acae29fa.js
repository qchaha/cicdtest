webpackJsonp([145],{"/Owl":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("CcCj"),r=a.n(s);t.default={name:"app",components:{MTagsForm:r.a},data:function(){return{}}}},"04A9":function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("m-page-add",[a("m-tags-form",{attrs:{usage:"add"}})],1)},staticRenderFns:[]}},CcCj:function(e,t,a){var s=a("VU/8")(a("QnJO"),a("w6d2"),null,null);e.exports=s.exports},J6kD:function(e,t,a){var s=a("VU/8")(a("/Owl"),a("04A9"),null,null);e.exports=s.exports},QnJO:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s={create:{api:{path:"/boss/education/recruitment/tags/create"}},resource:{api:{path:"/boss/education/recruitment/tags/add-page-info",params:{}}}};t.default={name:"MTagsForm",props:{},data:function(){return{formItem:{dataType:[],dataInfo:"",userTags:[],companyTags:[],resumeTags:[]},userTags:[],companyTags:[],resumeTags:[]}},methods:{submit:function(){if(this.validateFormData()){var e=this.getRequestParams();this.submitRequest(e)}},validateFormData:function(){if(0===this.formItem.dataType.length)return this.$Message.warning("请选择录入类型"),!1;if(0===this.formItem.dataInfo.length)return this.$Message.warning("请填入数据"),!1;if(0===this.formItem.userTags.length&&0===this.formItem.companyTags.length&&0===this.formItem.resumeTags.length)return this.$Message.warning("请至少选择一个标签"),!1;if("phone"===this.formItem.dataType)for(var e=this.formItem.dataInfo.split(","),t=0;t<e.length;t++)if(11!==e[t].length)return this.$Message.warning(e[t]+":该号码格式不正确"),!1;return!0},getRequestParams:function(){var e=this.userTags,t=[];return this.formItem.userTags.forEach(function(a){for(var s=0;s<e.length;s++)a===e[s].name&&t.push(e[s].code)}),{type:this.formItem.dataType,data:this.formItem.dataInfo,userTags:t,companyTags:this.formItem.companyTags,resumeTags:this.formItem.resumeTags}},submitRequest:function(e){bus.$emit("on-loading");var t=this,a=s.create;this.$Util.api.post(a,e,this).then(function(){t.$Message.success("添加成功"),bus.$emit("on-loading")},function(e){bus.$emit("on-loading"),t.$Message.warning("请求失败")})},loadResource:function(){var e=this;bus.$emit("on-loading"),this.$Util.api.get(s.resource,e).then(function(t){bus.$emit("on-loading"),e.userTags=t.data.form.userTags,e.companyTags=t.data.form.companyTags,e.resumeTags=t.data.form.resumeTags,e.submitEnable=!1},function(t){e.$Message.warning("加载资源失败")})}},created:function(){this.$nextTick(function(){this.loadResource()})}}},w6d2:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{"padding-top":"20px"}},[a("Form",{attrs:{model:e.formItem,"label-width":120}},["add"===e.usage?a("h3",{staticStyle:{"margin-bottom":"10px"}},[e._v("打标签")]):e._e(),e._v(" "),a("Form-item",{attrs:{label:"录入类型"}},[a("Radio-group",{model:{value:e.formItem.dataType,callback:function(t){e.$set(e.formItem,"dataType",t)},expression:"formItem.dataType"}},[a("Radio",{attrs:{label:"phone"}},[a("span",[e._v("手机号")])]),e._v(" "),a("Radio",{attrs:{label:"uid"}},[a("span",[e._v("用户ID")])]),e._v(" "),a("Input",{staticStyle:{width:"300px"},attrs:{placeholder:"多个号码/ID用,隔开",type:"textarea",autosize:{minRows:5}},model:{value:e.formItem.dataInfo,callback:function(t){e.$set(e.formItem,"dataInfo",t)},expression:"formItem.dataInfo"}})],1)],1),e._v(" "),a("Form-item",{attrs:{label:"用户标签"}},[a("Checkbox-group",{model:{value:e.formItem.userTags,callback:function(t){e.$set(e.formItem,"userTags",t)},expression:"formItem.userTags"}},e._l(e.userTags,function(e){return a("Checkbox",{attrs:{label:e.name}})}))],1),e._v(" "),a("Form-item",{attrs:{label:"招聘标签"}},[a("Checkbox-group",{model:{value:e.formItem.companyTags,callback:function(t){e.$set(e.formItem,"companyTags",t)},expression:"formItem.companyTags"}},e._l(e.companyTags,function(e){return a("Checkbox",{attrs:{label:e}})}))],1),e._v(" "),a("Form-item",{attrs:{label:"求职标签"}},[a("Checkbox-group",{model:{value:e.formItem.resumeTags,callback:function(t){e.$set(e.formItem,"resumeTags",t)},expression:"formItem.resumeTags"}},e._l(e.resumeTags,function(e){return a("Checkbox",{attrs:{label:e}})}))],1),e._v(" "),a("m-card",[a("Affix",{attrs:{"offset-bottom":0}},[a("Form-item",[a("i-button",{attrs:{type:"primary"},nativeOn:{click:function(t){return e.submit(t)}}},[e._v("提交")])],1)],1)],1)],1)],1)},staticRenderFns:[]}}});