webpackJsonp([189],{CIw6:function(t,e,s){var a=s("VU/8")(s("FHnr"),s("InS2"),null,null);t.exports=a.exports},FHnr:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a={create:{api:{path:"/boss/UserAsset/DiamondCoin/diamond-coin-record/create"}},resource:{api:{path:"/boss/UserAsset/DiamondCoin/diamond-coin-record/add-page-info"}}};e.default={name:"add",data:function(){return{formItem:{users:"",amount:0,usage:0,reason:""},usages:[]}},computed:{isGift:function(){return-6===this.formItem.usage}},methods:{back:function(){location.hash="/user-asset/diamond-coin/backend-recharge-record/list"},loadResource:function(){var t=this;this.$Util.api.get(a.resource,this).then(function(e){bus.$emit("on-loading"),t.usages=e.data.form.usages},function(e){t.$Message.warning("加载资源失败")})},validateFormData:function(){return 0===this.formItem.users.length?(this.$Message.warning("请输入充值对象"),!1):0===this.formItem.amount.length||0===this.formItem.amount?(this.$Message.warning("请输入充值数量"),!1):0===this.formItem.usage?(this.$Message.warning("请选择充值用途"),!1):-2!==this.formItem.usage||""!=this.formItem.reason||(this.$Message.warning("请输入赠送原因"),!1)},getRequestParams:function(){return{users:this.formItem.users,amount:this.formItem.amount,usage:this.formItem.usage,reason:this.formItem.reason}},submit:function(){if(this.validateFormData()){var t=this.getRequestParams();this.submitRequest(t)}},submitRequest:function(t){bus.$emit("on-loading");var e=this,s=a.create;this.$Util.api.post(s,t,e).then(function(){e.$Message.success("请求成功"),e.back()},function(t){bus.$emit("on-loading"),e.$Message.warning("请求失败")})}},created:function(){var t=this;this.$nextTick(function(){bus.$emit("on-loading"),t.loadResource()})}}},InS2:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("m-page",[s("m-card",[s("div",{staticStyle:{"padding-top":"20px"}},[s("Form",{attrs:{model:t.formItem,"label-width":100}},[s("Form-item",{attrs:{label:"充值对象"}},[s("Input",{staticStyle:{width:"300px"},attrs:{placeholder:"多个UID用英文逗号隔开",type:"textarea",autosize:{minRows:2,maxRows:5}},model:{value:t.formItem.users,callback:function(e){t.$set(t.formItem,"users",e)},expression:"formItem.users"}})],1),t._v(" "),s("Form-item",{attrs:{label:"充值数量"}},[s("Input",{staticStyle:{width:"300px"},attrs:{maxlength:50,placeholder:"请输入充值数量"},model:{value:t.formItem.amount,callback:function(e){t.$set(t.formItem,"amount",e)},expression:"formItem.amount"}})],1),t._v(" "),s("Form-item",{attrs:{label:"充值用途",required:""}},[s("Select",{staticStyle:{width:"200px"},attrs:{clearable:"",filterable:"",placeholder:"选择充值用途"},model:{value:t.formItem.usage,callback:function(e){t.$set(t.formItem,"usage",e)},expression:"formItem.usage"}},t._l(t.usages,function(e){return s("Option",{attrs:{value:e.type}},[t._v(t._s(e.name))])}))],1),t._v(" "),t.isGift?s("Form-item",{attrs:{label:"赠送理由",required:""}},[s("Input",{staticStyle:{width:"300px"},attrs:{placeholder:"输入赠送原因",type:"textarea",autosize:{minRows:2,maxRows:5}},model:{value:t.formItem.reason,callback:function(e){t.$set(t.formItem,"reason",e)},expression:"formItem.reason"}})],1):t._e(),t._v(" "),s("Form-item",[s("i-button",{attrs:{type:"primary"},nativeOn:{click:function(e){return t.submit(e)}}},[t._v("提交")]),t._v(" "),s("i-button",{staticStyle:{"margin-left":"8px"},attrs:{type:"ghost"},nativeOn:{click:function(e){return t.back(e)}}},[t._v("取消")])],1)],1)],1)])],1)},staticRenderFns:[]}}});